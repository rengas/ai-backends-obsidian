/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/types/config.ts
var config_exports = {};
__export(config_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS
});
var DEFAULT_SETTINGS;
var init_config = __esm({
  "src/types/config.ts"() {
    DEFAULT_SETTINGS = {
      apiUrl: "http://localhost:3000",
      apiKey: "",
      configFilePath: "ai-config/config.yaml",
      // Will be removed after migration
      // Global defaults
      defaultProvider: "ollama",
      defaultModel: "gemma3:4b",
      defaultTemperature: 0.3,
      defaultStream: true,
      // Operation-specific defaults
      summarize: {
        provider: "ollama",
        model: "gemma3:4b",
        temperature: 0.3,
        stream: true,
        maxLength: 100
      },
      keywords: {
        provider: "ollama",
        model: "mistrallite:latest",
        temperature: 0.3,
        stream: false,
        maxKeywords: 500
      },
      translate: {
        provider: "ollama",
        model: "gemma3:4b",
        temperature: 0.1,
        stream: true,
        defaultTargetLanguage: "en"
      },
      rewrite: {
        provider: "ollama",
        model: "gemma3:4b",
        temperature: 0.3,
        stream: true
      },
      compose: {
        provider: "ollama",
        model: "gemma3:4b",
        temperature: 0.3,
        stream: true,
        maxLength: 50
      }
    };
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AIPlugin
});
module.exports = __toCommonJS(main_exports);

// src/main.ts
var import_obsidian17 = require("obsidian");
init_config();

// src/services/config-service.ts
var import_obsidian = require("obsidian");

// node_modules/js-yaml/dist/js-yaml.mjs
function isNothing(subject) {
  return typeof subject === "undefined" || subject === null;
}
function isObject(subject) {
  return typeof subject === "object" && subject !== null;
}
function toArray(sequence) {
  if (Array.isArray(sequence))
    return sequence;
  else if (isNothing(sequence))
    return [];
  return [sequence];
}
function extend(target, source) {
  var index, length, key, sourceKeys;
  if (source) {
    sourceKeys = Object.keys(source);
    for (index = 0, length = sourceKeys.length; index < length; index += 1) {
      key = sourceKeys[index];
      target[key] = source[key];
    }
  }
  return target;
}
function repeat(string, count) {
  var result = "", cycle;
  for (cycle = 0; cycle < count; cycle += 1) {
    result += string;
  }
  return result;
}
function isNegativeZero(number) {
  return number === 0 && Number.NEGATIVE_INFINITY === 1 / number;
}
var isNothing_1 = isNothing;
var isObject_1 = isObject;
var toArray_1 = toArray;
var repeat_1 = repeat;
var isNegativeZero_1 = isNegativeZero;
var extend_1 = extend;
var common = {
  isNothing: isNothing_1,
  isObject: isObject_1,
  toArray: toArray_1,
  repeat: repeat_1,
  isNegativeZero: isNegativeZero_1,
  extend: extend_1
};
function formatError(exception2, compact) {
  var where = "", message = exception2.reason || "(unknown reason)";
  if (!exception2.mark)
    return message;
  if (exception2.mark.name) {
    where += 'in "' + exception2.mark.name + '" ';
  }
  where += "(" + (exception2.mark.line + 1) + ":" + (exception2.mark.column + 1) + ")";
  if (!compact && exception2.mark.snippet) {
    where += "\n\n" + exception2.mark.snippet;
  }
  return message + " " + where;
}
function YAMLException$1(reason, mark) {
  Error.call(this);
  this.name = "YAMLException";
  this.reason = reason;
  this.mark = mark;
  this.message = formatError(this, false);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack || "";
  }
}
YAMLException$1.prototype = Object.create(Error.prototype);
YAMLException$1.prototype.constructor = YAMLException$1;
YAMLException$1.prototype.toString = function toString(compact) {
  return this.name + ": " + formatError(this, compact);
};
var exception = YAMLException$1;
function getLine(buffer, lineStart, lineEnd, position, maxLineLength) {
  var head = "";
  var tail = "";
  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;
  if (position - lineStart > maxHalfLength) {
    head = " ... ";
    lineStart = position - maxHalfLength + head.length;
  }
  if (lineEnd - position > maxHalfLength) {
    tail = " ...";
    lineEnd = position + maxHalfLength - tail.length;
  }
  return {
    str: head + buffer.slice(lineStart, lineEnd).replace(/\t/g, "\u2192") + tail,
    pos: position - lineStart + head.length
    // relative position
  };
}
function padStart(string, max) {
  return common.repeat(" ", max - string.length) + string;
}
function makeSnippet(mark, options) {
  options = Object.create(options || null);
  if (!mark.buffer)
    return null;
  if (!options.maxLength)
    options.maxLength = 79;
  if (typeof options.indent !== "number")
    options.indent = 1;
  if (typeof options.linesBefore !== "number")
    options.linesBefore = 3;
  if (typeof options.linesAfter !== "number")
    options.linesAfter = 2;
  var re = /\r?\n|\r|\0/g;
  var lineStarts = [0];
  var lineEnds = [];
  var match;
  var foundLineNo = -1;
  while (match = re.exec(mark.buffer)) {
    lineEnds.push(match.index);
    lineStarts.push(match.index + match[0].length);
    if (mark.position <= match.index && foundLineNo < 0) {
      foundLineNo = lineStarts.length - 2;
    }
  }
  if (foundLineNo < 0)
    foundLineNo = lineStarts.length - 1;
  var result = "", i, line;
  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;
  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);
  for (i = 1; i <= options.linesBefore; i++) {
    if (foundLineNo - i < 0)
      break;
    line = getLine(
      mark.buffer,
      lineStarts[foundLineNo - i],
      lineEnds[foundLineNo - i],
      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),
      maxLineLength
    );
    result = common.repeat(" ", options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) + " | " + line.str + "\n" + result;
  }
  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);
  result += common.repeat(" ", options.indent) + padStart((mark.line + 1).toString(), lineNoLength) + " | " + line.str + "\n";
  result += common.repeat("-", options.indent + lineNoLength + 3 + line.pos) + "^\n";
  for (i = 1; i <= options.linesAfter; i++) {
    if (foundLineNo + i >= lineEnds.length)
      break;
    line = getLine(
      mark.buffer,
      lineStarts[foundLineNo + i],
      lineEnds[foundLineNo + i],
      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),
      maxLineLength
    );
    result += common.repeat(" ", options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) + " | " + line.str + "\n";
  }
  return result.replace(/\n$/, "");
}
var snippet = makeSnippet;
var TYPE_CONSTRUCTOR_OPTIONS = [
  "kind",
  "multi",
  "resolve",
  "construct",
  "instanceOf",
  "predicate",
  "represent",
  "representName",
  "defaultStyle",
  "styleAliases"
];
var YAML_NODE_KINDS = [
  "scalar",
  "sequence",
  "mapping"
];
function compileStyleAliases(map2) {
  var result = {};
  if (map2 !== null) {
    Object.keys(map2).forEach(function(style) {
      map2[style].forEach(function(alias) {
        result[String(alias)] = style;
      });
    });
  }
  return result;
}
function Type$1(tag, options) {
  options = options || {};
  Object.keys(options).forEach(function(name) {
    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {
      throw new exception('Unknown option "' + name + '" is met in definition of "' + tag + '" YAML type.');
    }
  });
  this.options = options;
  this.tag = tag;
  this.kind = options["kind"] || null;
  this.resolve = options["resolve"] || function() {
    return true;
  };
  this.construct = options["construct"] || function(data) {
    return data;
  };
  this.instanceOf = options["instanceOf"] || null;
  this.predicate = options["predicate"] || null;
  this.represent = options["represent"] || null;
  this.representName = options["representName"] || null;
  this.defaultStyle = options["defaultStyle"] || null;
  this.multi = options["multi"] || false;
  this.styleAliases = compileStyleAliases(options["styleAliases"] || null);
  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {
    throw new exception('Unknown kind "' + this.kind + '" is specified for "' + tag + '" YAML type.');
  }
}
var type = Type$1;
function compileList(schema2, name) {
  var result = [];
  schema2[name].forEach(function(currentType) {
    var newIndex = result.length;
    result.forEach(function(previousType, previousIndex) {
      if (previousType.tag === currentType.tag && previousType.kind === currentType.kind && previousType.multi === currentType.multi) {
        newIndex = previousIndex;
      }
    });
    result[newIndex] = currentType;
  });
  return result;
}
function compileMap() {
  var result = {
    scalar: {},
    sequence: {},
    mapping: {},
    fallback: {},
    multi: {
      scalar: [],
      sequence: [],
      mapping: [],
      fallback: []
    }
  }, index, length;
  function collectType(type2) {
    if (type2.multi) {
      result.multi[type2.kind].push(type2);
      result.multi["fallback"].push(type2);
    } else {
      result[type2.kind][type2.tag] = result["fallback"][type2.tag] = type2;
    }
  }
  for (index = 0, length = arguments.length; index < length; index += 1) {
    arguments[index].forEach(collectType);
  }
  return result;
}
function Schema$1(definition) {
  return this.extend(definition);
}
Schema$1.prototype.extend = function extend2(definition) {
  var implicit = [];
  var explicit = [];
  if (definition instanceof type) {
    explicit.push(definition);
  } else if (Array.isArray(definition)) {
    explicit = explicit.concat(definition);
  } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {
    if (definition.implicit)
      implicit = implicit.concat(definition.implicit);
    if (definition.explicit)
      explicit = explicit.concat(definition.explicit);
  } else {
    throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");
  }
  implicit.forEach(function(type$1) {
    if (!(type$1 instanceof type)) {
      throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");
    }
    if (type$1.loadKind && type$1.loadKind !== "scalar") {
      throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");
    }
    if (type$1.multi) {
      throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.");
    }
  });
  explicit.forEach(function(type$1) {
    if (!(type$1 instanceof type)) {
      throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");
    }
  });
  var result = Object.create(Schema$1.prototype);
  result.implicit = (this.implicit || []).concat(implicit);
  result.explicit = (this.explicit || []).concat(explicit);
  result.compiledImplicit = compileList(result, "implicit");
  result.compiledExplicit = compileList(result, "explicit");
  result.compiledTypeMap = compileMap(result.compiledImplicit, result.compiledExplicit);
  return result;
};
var schema = Schema$1;
var str = new type("tag:yaml.org,2002:str", {
  kind: "scalar",
  construct: function(data) {
    return data !== null ? data : "";
  }
});
var seq = new type("tag:yaml.org,2002:seq", {
  kind: "sequence",
  construct: function(data) {
    return data !== null ? data : [];
  }
});
var map = new type("tag:yaml.org,2002:map", {
  kind: "mapping",
  construct: function(data) {
    return data !== null ? data : {};
  }
});
var failsafe = new schema({
  explicit: [
    str,
    seq,
    map
  ]
});
function resolveYamlNull(data) {
  if (data === null)
    return true;
  var max = data.length;
  return max === 1 && data === "~" || max === 4 && (data === "null" || data === "Null" || data === "NULL");
}
function constructYamlNull() {
  return null;
}
function isNull(object) {
  return object === null;
}
var _null = new type("tag:yaml.org,2002:null", {
  kind: "scalar",
  resolve: resolveYamlNull,
  construct: constructYamlNull,
  predicate: isNull,
  represent: {
    canonical: function() {
      return "~";
    },
    lowercase: function() {
      return "null";
    },
    uppercase: function() {
      return "NULL";
    },
    camelcase: function() {
      return "Null";
    },
    empty: function() {
      return "";
    }
  },
  defaultStyle: "lowercase"
});
function resolveYamlBoolean(data) {
  if (data === null)
    return false;
  var max = data.length;
  return max === 4 && (data === "true" || data === "True" || data === "TRUE") || max === 5 && (data === "false" || data === "False" || data === "FALSE");
}
function constructYamlBoolean(data) {
  return data === "true" || data === "True" || data === "TRUE";
}
function isBoolean(object) {
  return Object.prototype.toString.call(object) === "[object Boolean]";
}
var bool = new type("tag:yaml.org,2002:bool", {
  kind: "scalar",
  resolve: resolveYamlBoolean,
  construct: constructYamlBoolean,
  predicate: isBoolean,
  represent: {
    lowercase: function(object) {
      return object ? "true" : "false";
    },
    uppercase: function(object) {
      return object ? "TRUE" : "FALSE";
    },
    camelcase: function(object) {
      return object ? "True" : "False";
    }
  },
  defaultStyle: "lowercase"
});
function isHexCode(c) {
  return 48 <= c && c <= 57 || 65 <= c && c <= 70 || 97 <= c && c <= 102;
}
function isOctCode(c) {
  return 48 <= c && c <= 55;
}
function isDecCode(c) {
  return 48 <= c && c <= 57;
}
function resolveYamlInteger(data) {
  if (data === null)
    return false;
  var max = data.length, index = 0, hasDigits = false, ch;
  if (!max)
    return false;
  ch = data[index];
  if (ch === "-" || ch === "+") {
    ch = data[++index];
  }
  if (ch === "0") {
    if (index + 1 === max)
      return true;
    ch = data[++index];
    if (ch === "b") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_")
          continue;
        if (ch !== "0" && ch !== "1")
          return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
    if (ch === "x") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_")
          continue;
        if (!isHexCode(data.charCodeAt(index)))
          return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
    if (ch === "o") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_")
          continue;
        if (!isOctCode(data.charCodeAt(index)))
          return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
  }
  if (ch === "_")
    return false;
  for (; index < max; index++) {
    ch = data[index];
    if (ch === "_")
      continue;
    if (!isDecCode(data.charCodeAt(index))) {
      return false;
    }
    hasDigits = true;
  }
  if (!hasDigits || ch === "_")
    return false;
  return true;
}
function constructYamlInteger(data) {
  var value = data, sign = 1, ch;
  if (value.indexOf("_") !== -1) {
    value = value.replace(/_/g, "");
  }
  ch = value[0];
  if (ch === "-" || ch === "+") {
    if (ch === "-")
      sign = -1;
    value = value.slice(1);
    ch = value[0];
  }
  if (value === "0")
    return 0;
  if (ch === "0") {
    if (value[1] === "b")
      return sign * parseInt(value.slice(2), 2);
    if (value[1] === "x")
      return sign * parseInt(value.slice(2), 16);
    if (value[1] === "o")
      return sign * parseInt(value.slice(2), 8);
  }
  return sign * parseInt(value, 10);
}
function isInteger(object) {
  return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 === 0 && !common.isNegativeZero(object));
}
var int = new type("tag:yaml.org,2002:int", {
  kind: "scalar",
  resolve: resolveYamlInteger,
  construct: constructYamlInteger,
  predicate: isInteger,
  represent: {
    binary: function(obj) {
      return obj >= 0 ? "0b" + obj.toString(2) : "-0b" + obj.toString(2).slice(1);
    },
    octal: function(obj) {
      return obj >= 0 ? "0o" + obj.toString(8) : "-0o" + obj.toString(8).slice(1);
    },
    decimal: function(obj) {
      return obj.toString(10);
    },
    /* eslint-disable max-len */
    hexadecimal: function(obj) {
      return obj >= 0 ? "0x" + obj.toString(16).toUpperCase() : "-0x" + obj.toString(16).toUpperCase().slice(1);
    }
  },
  defaultStyle: "decimal",
  styleAliases: {
    binary: [2, "bin"],
    octal: [8, "oct"],
    decimal: [10, "dec"],
    hexadecimal: [16, "hex"]
  }
});
var YAML_FLOAT_PATTERN = new RegExp(
  // 2.5e4, 2.5 and integers
  "^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"
);
function resolveYamlFloat(data) {
  if (data === null)
    return false;
  if (!YAML_FLOAT_PATTERN.test(data) || // Quick hack to not allow integers end with `_`
  // Probably should update regexp & check speed
  data[data.length - 1] === "_") {
    return false;
  }
  return true;
}
function constructYamlFloat(data) {
  var value, sign;
  value = data.replace(/_/g, "").toLowerCase();
  sign = value[0] === "-" ? -1 : 1;
  if ("+-".indexOf(value[0]) >= 0) {
    value = value.slice(1);
  }
  if (value === ".inf") {
    return sign === 1 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;
  } else if (value === ".nan") {
    return NaN;
  }
  return sign * parseFloat(value, 10);
}
var SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;
function representYamlFloat(object, style) {
  var res;
  if (isNaN(object)) {
    switch (style) {
      case "lowercase":
        return ".nan";
      case "uppercase":
        return ".NAN";
      case "camelcase":
        return ".NaN";
    }
  } else if (Number.POSITIVE_INFINITY === object) {
    switch (style) {
      case "lowercase":
        return ".inf";
      case "uppercase":
        return ".INF";
      case "camelcase":
        return ".Inf";
    }
  } else if (Number.NEGATIVE_INFINITY === object) {
    switch (style) {
      case "lowercase":
        return "-.inf";
      case "uppercase":
        return "-.INF";
      case "camelcase":
        return "-.Inf";
    }
  } else if (common.isNegativeZero(object)) {
    return "-0.0";
  }
  res = object.toString(10);
  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace("e", ".e") : res;
}
function isFloat(object) {
  return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 !== 0 || common.isNegativeZero(object));
}
var float = new type("tag:yaml.org,2002:float", {
  kind: "scalar",
  resolve: resolveYamlFloat,
  construct: constructYamlFloat,
  predicate: isFloat,
  represent: representYamlFloat,
  defaultStyle: "lowercase"
});
var json = failsafe.extend({
  implicit: [
    _null,
    bool,
    int,
    float
  ]
});
var core = json;
var YAML_DATE_REGEXP = new RegExp(
  "^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"
);
var YAML_TIMESTAMP_REGEXP = new RegExp(
  "^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"
);
function resolveYamlTimestamp(data) {
  if (data === null)
    return false;
  if (YAML_DATE_REGEXP.exec(data) !== null)
    return true;
  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null)
    return true;
  return false;
}
function constructYamlTimestamp(data) {
  var match, year, month, day, hour, minute, second, fraction = 0, delta = null, tz_hour, tz_minute, date;
  match = YAML_DATE_REGEXP.exec(data);
  if (match === null)
    match = YAML_TIMESTAMP_REGEXP.exec(data);
  if (match === null)
    throw new Error("Date resolve error");
  year = +match[1];
  month = +match[2] - 1;
  day = +match[3];
  if (!match[4]) {
    return new Date(Date.UTC(year, month, day));
  }
  hour = +match[4];
  minute = +match[5];
  second = +match[6];
  if (match[7]) {
    fraction = match[7].slice(0, 3);
    while (fraction.length < 3) {
      fraction += "0";
    }
    fraction = +fraction;
  }
  if (match[9]) {
    tz_hour = +match[10];
    tz_minute = +(match[11] || 0);
    delta = (tz_hour * 60 + tz_minute) * 6e4;
    if (match[9] === "-")
      delta = -delta;
  }
  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));
  if (delta)
    date.setTime(date.getTime() - delta);
  return date;
}
function representYamlTimestamp(object) {
  return object.toISOString();
}
var timestamp = new type("tag:yaml.org,2002:timestamp", {
  kind: "scalar",
  resolve: resolveYamlTimestamp,
  construct: constructYamlTimestamp,
  instanceOf: Date,
  represent: representYamlTimestamp
});
function resolveYamlMerge(data) {
  return data === "<<" || data === null;
}
var merge = new type("tag:yaml.org,2002:merge", {
  kind: "scalar",
  resolve: resolveYamlMerge
});
var BASE64_MAP = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";
function resolveYamlBinary(data) {
  if (data === null)
    return false;
  var code, idx, bitlen = 0, max = data.length, map2 = BASE64_MAP;
  for (idx = 0; idx < max; idx++) {
    code = map2.indexOf(data.charAt(idx));
    if (code > 64)
      continue;
    if (code < 0)
      return false;
    bitlen += 6;
  }
  return bitlen % 8 === 0;
}
function constructYamlBinary(data) {
  var idx, tailbits, input = data.replace(/[\r\n=]/g, ""), max = input.length, map2 = BASE64_MAP, bits = 0, result = [];
  for (idx = 0; idx < max; idx++) {
    if (idx % 4 === 0 && idx) {
      result.push(bits >> 16 & 255);
      result.push(bits >> 8 & 255);
      result.push(bits & 255);
    }
    bits = bits << 6 | map2.indexOf(input.charAt(idx));
  }
  tailbits = max % 4 * 6;
  if (tailbits === 0) {
    result.push(bits >> 16 & 255);
    result.push(bits >> 8 & 255);
    result.push(bits & 255);
  } else if (tailbits === 18) {
    result.push(bits >> 10 & 255);
    result.push(bits >> 2 & 255);
  } else if (tailbits === 12) {
    result.push(bits >> 4 & 255);
  }
  return new Uint8Array(result);
}
function representYamlBinary(object) {
  var result = "", bits = 0, idx, tail, max = object.length, map2 = BASE64_MAP;
  for (idx = 0; idx < max; idx++) {
    if (idx % 3 === 0 && idx) {
      result += map2[bits >> 18 & 63];
      result += map2[bits >> 12 & 63];
      result += map2[bits >> 6 & 63];
      result += map2[bits & 63];
    }
    bits = (bits << 8) + object[idx];
  }
  tail = max % 3;
  if (tail === 0) {
    result += map2[bits >> 18 & 63];
    result += map2[bits >> 12 & 63];
    result += map2[bits >> 6 & 63];
    result += map2[bits & 63];
  } else if (tail === 2) {
    result += map2[bits >> 10 & 63];
    result += map2[bits >> 4 & 63];
    result += map2[bits << 2 & 63];
    result += map2[64];
  } else if (tail === 1) {
    result += map2[bits >> 2 & 63];
    result += map2[bits << 4 & 63];
    result += map2[64];
    result += map2[64];
  }
  return result;
}
function isBinary(obj) {
  return Object.prototype.toString.call(obj) === "[object Uint8Array]";
}
var binary = new type("tag:yaml.org,2002:binary", {
  kind: "scalar",
  resolve: resolveYamlBinary,
  construct: constructYamlBinary,
  predicate: isBinary,
  represent: representYamlBinary
});
var _hasOwnProperty$3 = Object.prototype.hasOwnProperty;
var _toString$2 = Object.prototype.toString;
function resolveYamlOmap(data) {
  if (data === null)
    return true;
  var objectKeys = [], index, length, pair, pairKey, pairHasKey, object = data;
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    pairHasKey = false;
    if (_toString$2.call(pair) !== "[object Object]")
      return false;
    for (pairKey in pair) {
      if (_hasOwnProperty$3.call(pair, pairKey)) {
        if (!pairHasKey)
          pairHasKey = true;
        else
          return false;
      }
    }
    if (!pairHasKey)
      return false;
    if (objectKeys.indexOf(pairKey) === -1)
      objectKeys.push(pairKey);
    else
      return false;
  }
  return true;
}
function constructYamlOmap(data) {
  return data !== null ? data : [];
}
var omap = new type("tag:yaml.org,2002:omap", {
  kind: "sequence",
  resolve: resolveYamlOmap,
  construct: constructYamlOmap
});
var _toString$1 = Object.prototype.toString;
function resolveYamlPairs(data) {
  if (data === null)
    return true;
  var index, length, pair, keys, result, object = data;
  result = new Array(object.length);
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    if (_toString$1.call(pair) !== "[object Object]")
      return false;
    keys = Object.keys(pair);
    if (keys.length !== 1)
      return false;
    result[index] = [keys[0], pair[keys[0]]];
  }
  return true;
}
function constructYamlPairs(data) {
  if (data === null)
    return [];
  var index, length, pair, keys, result, object = data;
  result = new Array(object.length);
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    keys = Object.keys(pair);
    result[index] = [keys[0], pair[keys[0]]];
  }
  return result;
}
var pairs = new type("tag:yaml.org,2002:pairs", {
  kind: "sequence",
  resolve: resolveYamlPairs,
  construct: constructYamlPairs
});
var _hasOwnProperty$2 = Object.prototype.hasOwnProperty;
function resolveYamlSet(data) {
  if (data === null)
    return true;
  var key, object = data;
  for (key in object) {
    if (_hasOwnProperty$2.call(object, key)) {
      if (object[key] !== null)
        return false;
    }
  }
  return true;
}
function constructYamlSet(data) {
  return data !== null ? data : {};
}
var set = new type("tag:yaml.org,2002:set", {
  kind: "mapping",
  resolve: resolveYamlSet,
  construct: constructYamlSet
});
var _default = core.extend({
  implicit: [
    timestamp,
    merge
  ],
  explicit: [
    binary,
    omap,
    pairs,
    set
  ]
});
var _hasOwnProperty$1 = Object.prototype.hasOwnProperty;
var CONTEXT_FLOW_IN = 1;
var CONTEXT_FLOW_OUT = 2;
var CONTEXT_BLOCK_IN = 3;
var CONTEXT_BLOCK_OUT = 4;
var CHOMPING_CLIP = 1;
var CHOMPING_STRIP = 2;
var CHOMPING_KEEP = 3;
var PATTERN_NON_PRINTABLE = /[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
var PATTERN_NON_ASCII_LINE_BREAKS = /[\x85\u2028\u2029]/;
var PATTERN_FLOW_INDICATORS = /[,\[\]\{\}]/;
var PATTERN_TAG_HANDLE = /^(?:!|!!|![a-z\-]+!)$/i;
var PATTERN_TAG_URI = /^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;
function _class(obj) {
  return Object.prototype.toString.call(obj);
}
function is_EOL(c) {
  return c === 10 || c === 13;
}
function is_WHITE_SPACE(c) {
  return c === 9 || c === 32;
}
function is_WS_OR_EOL(c) {
  return c === 9 || c === 32 || c === 10 || c === 13;
}
function is_FLOW_INDICATOR(c) {
  return c === 44 || c === 91 || c === 93 || c === 123 || c === 125;
}
function fromHexCode(c) {
  var lc;
  if (48 <= c && c <= 57) {
    return c - 48;
  }
  lc = c | 32;
  if (97 <= lc && lc <= 102) {
    return lc - 97 + 10;
  }
  return -1;
}
function escapedHexLen(c) {
  if (c === 120) {
    return 2;
  }
  if (c === 117) {
    return 4;
  }
  if (c === 85) {
    return 8;
  }
  return 0;
}
function fromDecimalCode(c) {
  if (48 <= c && c <= 57) {
    return c - 48;
  }
  return -1;
}
function simpleEscapeSequence(c) {
  return c === 48 ? "\0" : c === 97 ? "\x07" : c === 98 ? "\b" : c === 116 ? "	" : c === 9 ? "	" : c === 110 ? "\n" : c === 118 ? "\v" : c === 102 ? "\f" : c === 114 ? "\r" : c === 101 ? "\x1B" : c === 32 ? " " : c === 34 ? '"' : c === 47 ? "/" : c === 92 ? "\\" : c === 78 ? "\x85" : c === 95 ? "\xA0" : c === 76 ? "\u2028" : c === 80 ? "\u2029" : "";
}
function charFromCodepoint(c) {
  if (c <= 65535) {
    return String.fromCharCode(c);
  }
  return String.fromCharCode(
    (c - 65536 >> 10) + 55296,
    (c - 65536 & 1023) + 56320
  );
}
var simpleEscapeCheck = new Array(256);
var simpleEscapeMap = new Array(256);
for (i = 0; i < 256; i++) {
  simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;
  simpleEscapeMap[i] = simpleEscapeSequence(i);
}
var i;
function State$1(input, options) {
  this.input = input;
  this.filename = options["filename"] || null;
  this.schema = options["schema"] || _default;
  this.onWarning = options["onWarning"] || null;
  this.legacy = options["legacy"] || false;
  this.json = options["json"] || false;
  this.listener = options["listener"] || null;
  this.implicitTypes = this.schema.compiledImplicit;
  this.typeMap = this.schema.compiledTypeMap;
  this.length = input.length;
  this.position = 0;
  this.line = 0;
  this.lineStart = 0;
  this.lineIndent = 0;
  this.firstTabInLine = -1;
  this.documents = [];
}
function generateError(state, message) {
  var mark = {
    name: state.filename,
    buffer: state.input.slice(0, -1),
    // omit trailing \0
    position: state.position,
    line: state.line,
    column: state.position - state.lineStart
  };
  mark.snippet = snippet(mark);
  return new exception(message, mark);
}
function throwError(state, message) {
  throw generateError(state, message);
}
function throwWarning(state, message) {
  if (state.onWarning) {
    state.onWarning.call(null, generateError(state, message));
  }
}
var directiveHandlers = {
  YAML: function handleYamlDirective(state, name, args) {
    var match, major, minor;
    if (state.version !== null) {
      throwError(state, "duplication of %YAML directive");
    }
    if (args.length !== 1) {
      throwError(state, "YAML directive accepts exactly one argument");
    }
    match = /^([0-9]+)\.([0-9]+)$/.exec(args[0]);
    if (match === null) {
      throwError(state, "ill-formed argument of the YAML directive");
    }
    major = parseInt(match[1], 10);
    minor = parseInt(match[2], 10);
    if (major !== 1) {
      throwError(state, "unacceptable YAML version of the document");
    }
    state.version = args[0];
    state.checkLineBreaks = minor < 2;
    if (minor !== 1 && minor !== 2) {
      throwWarning(state, "unsupported YAML version of the document");
    }
  },
  TAG: function handleTagDirective(state, name, args) {
    var handle, prefix;
    if (args.length !== 2) {
      throwError(state, "TAG directive accepts exactly two arguments");
    }
    handle = args[0];
    prefix = args[1];
    if (!PATTERN_TAG_HANDLE.test(handle)) {
      throwError(state, "ill-formed tag handle (first argument) of the TAG directive");
    }
    if (_hasOwnProperty$1.call(state.tagMap, handle)) {
      throwError(state, 'there is a previously declared suffix for "' + handle + '" tag handle');
    }
    if (!PATTERN_TAG_URI.test(prefix)) {
      throwError(state, "ill-formed tag prefix (second argument) of the TAG directive");
    }
    try {
      prefix = decodeURIComponent(prefix);
    } catch (err) {
      throwError(state, "tag prefix is malformed: " + prefix);
    }
    state.tagMap[handle] = prefix;
  }
};
function captureSegment(state, start, end, checkJson) {
  var _position, _length, _character, _result;
  if (start < end) {
    _result = state.input.slice(start, end);
    if (checkJson) {
      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {
        _character = _result.charCodeAt(_position);
        if (!(_character === 9 || 32 <= _character && _character <= 1114111)) {
          throwError(state, "expected valid JSON character");
        }
      }
    } else if (PATTERN_NON_PRINTABLE.test(_result)) {
      throwError(state, "the stream contains non-printable characters");
    }
    state.result += _result;
  }
}
function mergeMappings(state, destination, source, overridableKeys) {
  var sourceKeys, key, index, quantity;
  if (!common.isObject(source)) {
    throwError(state, "cannot merge mappings; the provided source object is unacceptable");
  }
  sourceKeys = Object.keys(source);
  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {
    key = sourceKeys[index];
    if (!_hasOwnProperty$1.call(destination, key)) {
      destination[key] = source[key];
      overridableKeys[key] = true;
    }
  }
}
function storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, startLine, startLineStart, startPos) {
  var index, quantity;
  if (Array.isArray(keyNode)) {
    keyNode = Array.prototype.slice.call(keyNode);
    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {
      if (Array.isArray(keyNode[index])) {
        throwError(state, "nested arrays are not supported inside keys");
      }
      if (typeof keyNode === "object" && _class(keyNode[index]) === "[object Object]") {
        keyNode[index] = "[object Object]";
      }
    }
  }
  if (typeof keyNode === "object" && _class(keyNode) === "[object Object]") {
    keyNode = "[object Object]";
  }
  keyNode = String(keyNode);
  if (_result === null) {
    _result = {};
  }
  if (keyTag === "tag:yaml.org,2002:merge") {
    if (Array.isArray(valueNode)) {
      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {
        mergeMappings(state, _result, valueNode[index], overridableKeys);
      }
    } else {
      mergeMappings(state, _result, valueNode, overridableKeys);
    }
  } else {
    if (!state.json && !_hasOwnProperty$1.call(overridableKeys, keyNode) && _hasOwnProperty$1.call(_result, keyNode)) {
      state.line = startLine || state.line;
      state.lineStart = startLineStart || state.lineStart;
      state.position = startPos || state.position;
      throwError(state, "duplicated mapping key");
    }
    if (keyNode === "__proto__") {
      Object.defineProperty(_result, keyNode, {
        configurable: true,
        enumerable: true,
        writable: true,
        value: valueNode
      });
    } else {
      _result[keyNode] = valueNode;
    }
    delete overridableKeys[keyNode];
  }
  return _result;
}
function readLineBreak(state) {
  var ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 10) {
    state.position++;
  } else if (ch === 13) {
    state.position++;
    if (state.input.charCodeAt(state.position) === 10) {
      state.position++;
    }
  } else {
    throwError(state, "a line break is expected");
  }
  state.line += 1;
  state.lineStart = state.position;
  state.firstTabInLine = -1;
}
function skipSeparationSpace(state, allowComments, checkIndent) {
  var lineBreaks = 0, ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    while (is_WHITE_SPACE(ch)) {
      if (ch === 9 && state.firstTabInLine === -1) {
        state.firstTabInLine = state.position;
      }
      ch = state.input.charCodeAt(++state.position);
    }
    if (allowComments && ch === 35) {
      do {
        ch = state.input.charCodeAt(++state.position);
      } while (ch !== 10 && ch !== 13 && ch !== 0);
    }
    if (is_EOL(ch)) {
      readLineBreak(state);
      ch = state.input.charCodeAt(state.position);
      lineBreaks++;
      state.lineIndent = 0;
      while (ch === 32) {
        state.lineIndent++;
        ch = state.input.charCodeAt(++state.position);
      }
    } else {
      break;
    }
  }
  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {
    throwWarning(state, "deficient indentation");
  }
  return lineBreaks;
}
function testDocumentSeparator(state) {
  var _position = state.position, ch;
  ch = state.input.charCodeAt(_position);
  if ((ch === 45 || ch === 46) && ch === state.input.charCodeAt(_position + 1) && ch === state.input.charCodeAt(_position + 2)) {
    _position += 3;
    ch = state.input.charCodeAt(_position);
    if (ch === 0 || is_WS_OR_EOL(ch)) {
      return true;
    }
  }
  return false;
}
function writeFoldedLines(state, count) {
  if (count === 1) {
    state.result += " ";
  } else if (count > 1) {
    state.result += common.repeat("\n", count - 1);
  }
}
function readPlainScalar(state, nodeIndent, withinFlowCollection) {
  var preceding, following, captureStart, captureEnd, hasPendingContent, _line, _lineStart, _lineIndent, _kind = state.kind, _result = state.result, ch;
  ch = state.input.charCodeAt(state.position);
  if (is_WS_OR_EOL(ch) || is_FLOW_INDICATOR(ch) || ch === 35 || ch === 38 || ch === 42 || ch === 33 || ch === 124 || ch === 62 || ch === 39 || ch === 34 || ch === 37 || ch === 64 || ch === 96) {
    return false;
  }
  if (ch === 63 || ch === 45) {
    following = state.input.charCodeAt(state.position + 1);
    if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
      return false;
    }
  }
  state.kind = "scalar";
  state.result = "";
  captureStart = captureEnd = state.position;
  hasPendingContent = false;
  while (ch !== 0) {
    if (ch === 58) {
      following = state.input.charCodeAt(state.position + 1);
      if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
        break;
      }
    } else if (ch === 35) {
      preceding = state.input.charCodeAt(state.position - 1);
      if (is_WS_OR_EOL(preceding)) {
        break;
      }
    } else if (state.position === state.lineStart && testDocumentSeparator(state) || withinFlowCollection && is_FLOW_INDICATOR(ch)) {
      break;
    } else if (is_EOL(ch)) {
      _line = state.line;
      _lineStart = state.lineStart;
      _lineIndent = state.lineIndent;
      skipSeparationSpace(state, false, -1);
      if (state.lineIndent >= nodeIndent) {
        hasPendingContent = true;
        ch = state.input.charCodeAt(state.position);
        continue;
      } else {
        state.position = captureEnd;
        state.line = _line;
        state.lineStart = _lineStart;
        state.lineIndent = _lineIndent;
        break;
      }
    }
    if (hasPendingContent) {
      captureSegment(state, captureStart, captureEnd, false);
      writeFoldedLines(state, state.line - _line);
      captureStart = captureEnd = state.position;
      hasPendingContent = false;
    }
    if (!is_WHITE_SPACE(ch)) {
      captureEnd = state.position + 1;
    }
    ch = state.input.charCodeAt(++state.position);
  }
  captureSegment(state, captureStart, captureEnd, false);
  if (state.result) {
    return true;
  }
  state.kind = _kind;
  state.result = _result;
  return false;
}
function readSingleQuotedScalar(state, nodeIndent) {
  var ch, captureStart, captureEnd;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 39) {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  state.position++;
  captureStart = captureEnd = state.position;
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    if (ch === 39) {
      captureSegment(state, captureStart, state.position, true);
      ch = state.input.charCodeAt(++state.position);
      if (ch === 39) {
        captureStart = state.position;
        state.position++;
        captureEnd = state.position;
      } else {
        return true;
      }
    } else if (is_EOL(ch)) {
      captureSegment(state, captureStart, captureEnd, true);
      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
      captureStart = captureEnd = state.position;
    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
      throwError(state, "unexpected end of the document within a single quoted scalar");
    } else {
      state.position++;
      captureEnd = state.position;
    }
  }
  throwError(state, "unexpected end of the stream within a single quoted scalar");
}
function readDoubleQuotedScalar(state, nodeIndent) {
  var captureStart, captureEnd, hexLength, hexResult, tmp, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 34) {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  state.position++;
  captureStart = captureEnd = state.position;
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    if (ch === 34) {
      captureSegment(state, captureStart, state.position, true);
      state.position++;
      return true;
    } else if (ch === 92) {
      captureSegment(state, captureStart, state.position, true);
      ch = state.input.charCodeAt(++state.position);
      if (is_EOL(ch)) {
        skipSeparationSpace(state, false, nodeIndent);
      } else if (ch < 256 && simpleEscapeCheck[ch]) {
        state.result += simpleEscapeMap[ch];
        state.position++;
      } else if ((tmp = escapedHexLen(ch)) > 0) {
        hexLength = tmp;
        hexResult = 0;
        for (; hexLength > 0; hexLength--) {
          ch = state.input.charCodeAt(++state.position);
          if ((tmp = fromHexCode(ch)) >= 0) {
            hexResult = (hexResult << 4) + tmp;
          } else {
            throwError(state, "expected hexadecimal character");
          }
        }
        state.result += charFromCodepoint(hexResult);
        state.position++;
      } else {
        throwError(state, "unknown escape sequence");
      }
      captureStart = captureEnd = state.position;
    } else if (is_EOL(ch)) {
      captureSegment(state, captureStart, captureEnd, true);
      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
      captureStart = captureEnd = state.position;
    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
      throwError(state, "unexpected end of the document within a double quoted scalar");
    } else {
      state.position++;
      captureEnd = state.position;
    }
  }
  throwError(state, "unexpected end of the stream within a double quoted scalar");
}
function readFlowCollection(state, nodeIndent) {
  var readNext = true, _line, _lineStart, _pos, _tag = state.tag, _result, _anchor = state.anchor, following, terminator, isPair, isExplicitPair, isMapping, overridableKeys = /* @__PURE__ */ Object.create(null), keyNode, keyTag, valueNode, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 91) {
    terminator = 93;
    isMapping = false;
    _result = [];
  } else if (ch === 123) {
    terminator = 125;
    isMapping = true;
    _result = {};
  } else {
    return false;
  }
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(++state.position);
  while (ch !== 0) {
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if (ch === terminator) {
      state.position++;
      state.tag = _tag;
      state.anchor = _anchor;
      state.kind = isMapping ? "mapping" : "sequence";
      state.result = _result;
      return true;
    } else if (!readNext) {
      throwError(state, "missed comma between flow collection entries");
    } else if (ch === 44) {
      throwError(state, "expected the node content, but found ','");
    }
    keyTag = keyNode = valueNode = null;
    isPair = isExplicitPair = false;
    if (ch === 63) {
      following = state.input.charCodeAt(state.position + 1);
      if (is_WS_OR_EOL(following)) {
        isPair = isExplicitPair = true;
        state.position++;
        skipSeparationSpace(state, true, nodeIndent);
      }
    }
    _line = state.line;
    _lineStart = state.lineStart;
    _pos = state.position;
    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
    keyTag = state.tag;
    keyNode = state.result;
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if ((isExplicitPair || state.line === _line) && ch === 58) {
      isPair = true;
      ch = state.input.charCodeAt(++state.position);
      skipSeparationSpace(state, true, nodeIndent);
      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
      valueNode = state.result;
    }
    if (isMapping) {
      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);
    } else if (isPair) {
      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));
    } else {
      _result.push(keyNode);
    }
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if (ch === 44) {
      readNext = true;
      ch = state.input.charCodeAt(++state.position);
    } else {
      readNext = false;
    }
  }
  throwError(state, "unexpected end of the stream within a flow collection");
}
function readBlockScalar(state, nodeIndent) {
  var captureStart, folding, chomping = CHOMPING_CLIP, didReadContent = false, detectedIndent = false, textIndent = nodeIndent, emptyLines = 0, atMoreIndented = false, tmp, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 124) {
    folding = false;
  } else if (ch === 62) {
    folding = true;
  } else {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  while (ch !== 0) {
    ch = state.input.charCodeAt(++state.position);
    if (ch === 43 || ch === 45) {
      if (CHOMPING_CLIP === chomping) {
        chomping = ch === 43 ? CHOMPING_KEEP : CHOMPING_STRIP;
      } else {
        throwError(state, "repeat of a chomping mode identifier");
      }
    } else if ((tmp = fromDecimalCode(ch)) >= 0) {
      if (tmp === 0) {
        throwError(state, "bad explicit indentation width of a block scalar; it cannot be less than one");
      } else if (!detectedIndent) {
        textIndent = nodeIndent + tmp - 1;
        detectedIndent = true;
      } else {
        throwError(state, "repeat of an indentation width identifier");
      }
    } else {
      break;
    }
  }
  if (is_WHITE_SPACE(ch)) {
    do {
      ch = state.input.charCodeAt(++state.position);
    } while (is_WHITE_SPACE(ch));
    if (ch === 35) {
      do {
        ch = state.input.charCodeAt(++state.position);
      } while (!is_EOL(ch) && ch !== 0);
    }
  }
  while (ch !== 0) {
    readLineBreak(state);
    state.lineIndent = 0;
    ch = state.input.charCodeAt(state.position);
    while ((!detectedIndent || state.lineIndent < textIndent) && ch === 32) {
      state.lineIndent++;
      ch = state.input.charCodeAt(++state.position);
    }
    if (!detectedIndent && state.lineIndent > textIndent) {
      textIndent = state.lineIndent;
    }
    if (is_EOL(ch)) {
      emptyLines++;
      continue;
    }
    if (state.lineIndent < textIndent) {
      if (chomping === CHOMPING_KEEP) {
        state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
      } else if (chomping === CHOMPING_CLIP) {
        if (didReadContent) {
          state.result += "\n";
        }
      }
      break;
    }
    if (folding) {
      if (is_WHITE_SPACE(ch)) {
        atMoreIndented = true;
        state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
      } else if (atMoreIndented) {
        atMoreIndented = false;
        state.result += common.repeat("\n", emptyLines + 1);
      } else if (emptyLines === 0) {
        if (didReadContent) {
          state.result += " ";
        }
      } else {
        state.result += common.repeat("\n", emptyLines);
      }
    } else {
      state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
    }
    didReadContent = true;
    detectedIndent = true;
    emptyLines = 0;
    captureStart = state.position;
    while (!is_EOL(ch) && ch !== 0) {
      ch = state.input.charCodeAt(++state.position);
    }
    captureSegment(state, captureStart, state.position, false);
  }
  return true;
}
function readBlockSequence(state, nodeIndent) {
  var _line, _tag = state.tag, _anchor = state.anchor, _result = [], following, detected = false, ch;
  if (state.firstTabInLine !== -1)
    return false;
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    if (state.firstTabInLine !== -1) {
      state.position = state.firstTabInLine;
      throwError(state, "tab characters must not be used in indentation");
    }
    if (ch !== 45) {
      break;
    }
    following = state.input.charCodeAt(state.position + 1);
    if (!is_WS_OR_EOL(following)) {
      break;
    }
    detected = true;
    state.position++;
    if (skipSeparationSpace(state, true, -1)) {
      if (state.lineIndent <= nodeIndent) {
        _result.push(null);
        ch = state.input.charCodeAt(state.position);
        continue;
      }
    }
    _line = state.line;
    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);
    _result.push(state.result);
    skipSeparationSpace(state, true, -1);
    ch = state.input.charCodeAt(state.position);
    if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
      throwError(state, "bad indentation of a sequence entry");
    } else if (state.lineIndent < nodeIndent) {
      break;
    }
  }
  if (detected) {
    state.tag = _tag;
    state.anchor = _anchor;
    state.kind = "sequence";
    state.result = _result;
    return true;
  }
  return false;
}
function readBlockMapping(state, nodeIndent, flowIndent) {
  var following, allowCompact, _line, _keyLine, _keyLineStart, _keyPos, _tag = state.tag, _anchor = state.anchor, _result = {}, overridableKeys = /* @__PURE__ */ Object.create(null), keyTag = null, keyNode = null, valueNode = null, atExplicitKey = false, detected = false, ch;
  if (state.firstTabInLine !== -1)
    return false;
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    if (!atExplicitKey && state.firstTabInLine !== -1) {
      state.position = state.firstTabInLine;
      throwError(state, "tab characters must not be used in indentation");
    }
    following = state.input.charCodeAt(state.position + 1);
    _line = state.line;
    if ((ch === 63 || ch === 58) && is_WS_OR_EOL(following)) {
      if (ch === 63) {
        if (atExplicitKey) {
          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
          keyTag = keyNode = valueNode = null;
        }
        detected = true;
        atExplicitKey = true;
        allowCompact = true;
      } else if (atExplicitKey) {
        atExplicitKey = false;
        allowCompact = true;
      } else {
        throwError(state, "incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");
      }
      state.position += 1;
      ch = following;
    } else {
      _keyLine = state.line;
      _keyLineStart = state.lineStart;
      _keyPos = state.position;
      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {
        break;
      }
      if (state.line === _line) {
        ch = state.input.charCodeAt(state.position);
        while (is_WHITE_SPACE(ch)) {
          ch = state.input.charCodeAt(++state.position);
        }
        if (ch === 58) {
          ch = state.input.charCodeAt(++state.position);
          if (!is_WS_OR_EOL(ch)) {
            throwError(state, "a whitespace character is expected after the key-value separator within a block mapping");
          }
          if (atExplicitKey) {
            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
            keyTag = keyNode = valueNode = null;
          }
          detected = true;
          atExplicitKey = false;
          allowCompact = false;
          keyTag = state.tag;
          keyNode = state.result;
        } else if (detected) {
          throwError(state, "can not read an implicit mapping pair; a colon is missed");
        } else {
          state.tag = _tag;
          state.anchor = _anchor;
          return true;
        }
      } else if (detected) {
        throwError(state, "can not read a block mapping entry; a multiline key may not be an implicit key");
      } else {
        state.tag = _tag;
        state.anchor = _anchor;
        return true;
      }
    }
    if (state.line === _line || state.lineIndent > nodeIndent) {
      if (atExplicitKey) {
        _keyLine = state.line;
        _keyLineStart = state.lineStart;
        _keyPos = state.position;
      }
      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {
        if (atExplicitKey) {
          keyNode = state.result;
        } else {
          valueNode = state.result;
        }
      }
      if (!atExplicitKey) {
        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);
        keyTag = keyNode = valueNode = null;
      }
      skipSeparationSpace(state, true, -1);
      ch = state.input.charCodeAt(state.position);
    }
    if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
      throwError(state, "bad indentation of a mapping entry");
    } else if (state.lineIndent < nodeIndent) {
      break;
    }
  }
  if (atExplicitKey) {
    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
  }
  if (detected) {
    state.tag = _tag;
    state.anchor = _anchor;
    state.kind = "mapping";
    state.result = _result;
  }
  return detected;
}
function readTagProperty(state) {
  var _position, isVerbatim = false, isNamed = false, tagHandle, tagName, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 33)
    return false;
  if (state.tag !== null) {
    throwError(state, "duplication of a tag property");
  }
  ch = state.input.charCodeAt(++state.position);
  if (ch === 60) {
    isVerbatim = true;
    ch = state.input.charCodeAt(++state.position);
  } else if (ch === 33) {
    isNamed = true;
    tagHandle = "!!";
    ch = state.input.charCodeAt(++state.position);
  } else {
    tagHandle = "!";
  }
  _position = state.position;
  if (isVerbatim) {
    do {
      ch = state.input.charCodeAt(++state.position);
    } while (ch !== 0 && ch !== 62);
    if (state.position < state.length) {
      tagName = state.input.slice(_position, state.position);
      ch = state.input.charCodeAt(++state.position);
    } else {
      throwError(state, "unexpected end of the stream within a verbatim tag");
    }
  } else {
    while (ch !== 0 && !is_WS_OR_EOL(ch)) {
      if (ch === 33) {
        if (!isNamed) {
          tagHandle = state.input.slice(_position - 1, state.position + 1);
          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {
            throwError(state, "named tag handle cannot contain such characters");
          }
          isNamed = true;
          _position = state.position + 1;
        } else {
          throwError(state, "tag suffix cannot contain exclamation marks");
        }
      }
      ch = state.input.charCodeAt(++state.position);
    }
    tagName = state.input.slice(_position, state.position);
    if (PATTERN_FLOW_INDICATORS.test(tagName)) {
      throwError(state, "tag suffix cannot contain flow indicator characters");
    }
  }
  if (tagName && !PATTERN_TAG_URI.test(tagName)) {
    throwError(state, "tag name cannot contain such characters: " + tagName);
  }
  try {
    tagName = decodeURIComponent(tagName);
  } catch (err) {
    throwError(state, "tag name is malformed: " + tagName);
  }
  if (isVerbatim) {
    state.tag = tagName;
  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {
    state.tag = state.tagMap[tagHandle] + tagName;
  } else if (tagHandle === "!") {
    state.tag = "!" + tagName;
  } else if (tagHandle === "!!") {
    state.tag = "tag:yaml.org,2002:" + tagName;
  } else {
    throwError(state, 'undeclared tag handle "' + tagHandle + '"');
  }
  return true;
}
function readAnchorProperty(state) {
  var _position, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 38)
    return false;
  if (state.anchor !== null) {
    throwError(state, "duplication of an anchor property");
  }
  ch = state.input.charCodeAt(++state.position);
  _position = state.position;
  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
    ch = state.input.charCodeAt(++state.position);
  }
  if (state.position === _position) {
    throwError(state, "name of an anchor node must contain at least one character");
  }
  state.anchor = state.input.slice(_position, state.position);
  return true;
}
function readAlias(state) {
  var _position, alias, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 42)
    return false;
  ch = state.input.charCodeAt(++state.position);
  _position = state.position;
  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
    ch = state.input.charCodeAt(++state.position);
  }
  if (state.position === _position) {
    throwError(state, "name of an alias node must contain at least one character");
  }
  alias = state.input.slice(_position, state.position);
  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {
    throwError(state, 'unidentified alias "' + alias + '"');
  }
  state.result = state.anchorMap[alias];
  skipSeparationSpace(state, true, -1);
  return true;
}
function composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {
  var allowBlockStyles, allowBlockScalars, allowBlockCollections, indentStatus = 1, atNewLine = false, hasContent = false, typeIndex, typeQuantity, typeList, type2, flowIndent, blockIndent;
  if (state.listener !== null) {
    state.listener("open", state);
  }
  state.tag = null;
  state.anchor = null;
  state.kind = null;
  state.result = null;
  allowBlockStyles = allowBlockScalars = allowBlockCollections = CONTEXT_BLOCK_OUT === nodeContext || CONTEXT_BLOCK_IN === nodeContext;
  if (allowToSeek) {
    if (skipSeparationSpace(state, true, -1)) {
      atNewLine = true;
      if (state.lineIndent > parentIndent) {
        indentStatus = 1;
      } else if (state.lineIndent === parentIndent) {
        indentStatus = 0;
      } else if (state.lineIndent < parentIndent) {
        indentStatus = -1;
      }
    }
  }
  if (indentStatus === 1) {
    while (readTagProperty(state) || readAnchorProperty(state)) {
      if (skipSeparationSpace(state, true, -1)) {
        atNewLine = true;
        allowBlockCollections = allowBlockStyles;
        if (state.lineIndent > parentIndent) {
          indentStatus = 1;
        } else if (state.lineIndent === parentIndent) {
          indentStatus = 0;
        } else if (state.lineIndent < parentIndent) {
          indentStatus = -1;
        }
      } else {
        allowBlockCollections = false;
      }
    }
  }
  if (allowBlockCollections) {
    allowBlockCollections = atNewLine || allowCompact;
  }
  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {
    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {
      flowIndent = parentIndent;
    } else {
      flowIndent = parentIndent + 1;
    }
    blockIndent = state.position - state.lineStart;
    if (indentStatus === 1) {
      if (allowBlockCollections && (readBlockSequence(state, blockIndent) || readBlockMapping(state, blockIndent, flowIndent)) || readFlowCollection(state, flowIndent)) {
        hasContent = true;
      } else {
        if (allowBlockScalars && readBlockScalar(state, flowIndent) || readSingleQuotedScalar(state, flowIndent) || readDoubleQuotedScalar(state, flowIndent)) {
          hasContent = true;
        } else if (readAlias(state)) {
          hasContent = true;
          if (state.tag !== null || state.anchor !== null) {
            throwError(state, "alias node should not have any properties");
          }
        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {
          hasContent = true;
          if (state.tag === null) {
            state.tag = "?";
          }
        }
        if (state.anchor !== null) {
          state.anchorMap[state.anchor] = state.result;
        }
      }
    } else if (indentStatus === 0) {
      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);
    }
  }
  if (state.tag === null) {
    if (state.anchor !== null) {
      state.anchorMap[state.anchor] = state.result;
    }
  } else if (state.tag === "?") {
    if (state.result !== null && state.kind !== "scalar") {
      throwError(state, 'unacceptable node kind for !<?> tag; it should be "scalar", not "' + state.kind + '"');
    }
    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {
      type2 = state.implicitTypes[typeIndex];
      if (type2.resolve(state.result)) {
        state.result = type2.construct(state.result);
        state.tag = type2.tag;
        if (state.anchor !== null) {
          state.anchorMap[state.anchor] = state.result;
        }
        break;
      }
    }
  } else if (state.tag !== "!") {
    if (_hasOwnProperty$1.call(state.typeMap[state.kind || "fallback"], state.tag)) {
      type2 = state.typeMap[state.kind || "fallback"][state.tag];
    } else {
      type2 = null;
      typeList = state.typeMap.multi[state.kind || "fallback"];
      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {
        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {
          type2 = typeList[typeIndex];
          break;
        }
      }
    }
    if (!type2) {
      throwError(state, "unknown tag !<" + state.tag + ">");
    }
    if (state.result !== null && type2.kind !== state.kind) {
      throwError(state, "unacceptable node kind for !<" + state.tag + '> tag; it should be "' + type2.kind + '", not "' + state.kind + '"');
    }
    if (!type2.resolve(state.result, state.tag)) {
      throwError(state, "cannot resolve a node with !<" + state.tag + "> explicit tag");
    } else {
      state.result = type2.construct(state.result, state.tag);
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = state.result;
      }
    }
  }
  if (state.listener !== null) {
    state.listener("close", state);
  }
  return state.tag !== null || state.anchor !== null || hasContent;
}
function readDocument(state) {
  var documentStart = state.position, _position, directiveName, directiveArgs, hasDirectives = false, ch;
  state.version = null;
  state.checkLineBreaks = state.legacy;
  state.tagMap = /* @__PURE__ */ Object.create(null);
  state.anchorMap = /* @__PURE__ */ Object.create(null);
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    skipSeparationSpace(state, true, -1);
    ch = state.input.charCodeAt(state.position);
    if (state.lineIndent > 0 || ch !== 37) {
      break;
    }
    hasDirectives = true;
    ch = state.input.charCodeAt(++state.position);
    _position = state.position;
    while (ch !== 0 && !is_WS_OR_EOL(ch)) {
      ch = state.input.charCodeAt(++state.position);
    }
    directiveName = state.input.slice(_position, state.position);
    directiveArgs = [];
    if (directiveName.length < 1) {
      throwError(state, "directive name must not be less than one character in length");
    }
    while (ch !== 0) {
      while (is_WHITE_SPACE(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      if (ch === 35) {
        do {
          ch = state.input.charCodeAt(++state.position);
        } while (ch !== 0 && !is_EOL(ch));
        break;
      }
      if (is_EOL(ch))
        break;
      _position = state.position;
      while (ch !== 0 && !is_WS_OR_EOL(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      directiveArgs.push(state.input.slice(_position, state.position));
    }
    if (ch !== 0)
      readLineBreak(state);
    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {
      directiveHandlers[directiveName](state, directiveName, directiveArgs);
    } else {
      throwWarning(state, 'unknown document directive "' + directiveName + '"');
    }
  }
  skipSeparationSpace(state, true, -1);
  if (state.lineIndent === 0 && state.input.charCodeAt(state.position) === 45 && state.input.charCodeAt(state.position + 1) === 45 && state.input.charCodeAt(state.position + 2) === 45) {
    state.position += 3;
    skipSeparationSpace(state, true, -1);
  } else if (hasDirectives) {
    throwError(state, "directives end mark is expected");
  }
  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);
  skipSeparationSpace(state, true, -1);
  if (state.checkLineBreaks && PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {
    throwWarning(state, "non-ASCII line breaks are interpreted as content");
  }
  state.documents.push(state.result);
  if (state.position === state.lineStart && testDocumentSeparator(state)) {
    if (state.input.charCodeAt(state.position) === 46) {
      state.position += 3;
      skipSeparationSpace(state, true, -1);
    }
    return;
  }
  if (state.position < state.length - 1) {
    throwError(state, "end of the stream or a document separator is expected");
  } else {
    return;
  }
}
function loadDocuments(input, options) {
  input = String(input);
  options = options || {};
  if (input.length !== 0) {
    if (input.charCodeAt(input.length - 1) !== 10 && input.charCodeAt(input.length - 1) !== 13) {
      input += "\n";
    }
    if (input.charCodeAt(0) === 65279) {
      input = input.slice(1);
    }
  }
  var state = new State$1(input, options);
  var nullpos = input.indexOf("\0");
  if (nullpos !== -1) {
    state.position = nullpos;
    throwError(state, "null byte is not allowed in input");
  }
  state.input += "\0";
  while (state.input.charCodeAt(state.position) === 32) {
    state.lineIndent += 1;
    state.position += 1;
  }
  while (state.position < state.length - 1) {
    readDocument(state);
  }
  return state.documents;
}
function loadAll$1(input, iterator, options) {
  if (iterator !== null && typeof iterator === "object" && typeof options === "undefined") {
    options = iterator;
    iterator = null;
  }
  var documents = loadDocuments(input, options);
  if (typeof iterator !== "function") {
    return documents;
  }
  for (var index = 0, length = documents.length; index < length; index += 1) {
    iterator(documents[index]);
  }
}
function load$1(input, options) {
  var documents = loadDocuments(input, options);
  if (documents.length === 0) {
    return void 0;
  } else if (documents.length === 1) {
    return documents[0];
  }
  throw new exception("expected a single document in the stream, but found more");
}
var loadAll_1 = loadAll$1;
var load_1 = load$1;
var loader = {
  loadAll: loadAll_1,
  load: load_1
};
var _toString = Object.prototype.toString;
var _hasOwnProperty = Object.prototype.hasOwnProperty;
var CHAR_BOM = 65279;
var CHAR_TAB = 9;
var CHAR_LINE_FEED = 10;
var CHAR_CARRIAGE_RETURN = 13;
var CHAR_SPACE = 32;
var CHAR_EXCLAMATION = 33;
var CHAR_DOUBLE_QUOTE = 34;
var CHAR_SHARP = 35;
var CHAR_PERCENT = 37;
var CHAR_AMPERSAND = 38;
var CHAR_SINGLE_QUOTE = 39;
var CHAR_ASTERISK = 42;
var CHAR_COMMA = 44;
var CHAR_MINUS = 45;
var CHAR_COLON = 58;
var CHAR_EQUALS = 61;
var CHAR_GREATER_THAN = 62;
var CHAR_QUESTION = 63;
var CHAR_COMMERCIAL_AT = 64;
var CHAR_LEFT_SQUARE_BRACKET = 91;
var CHAR_RIGHT_SQUARE_BRACKET = 93;
var CHAR_GRAVE_ACCENT = 96;
var CHAR_LEFT_CURLY_BRACKET = 123;
var CHAR_VERTICAL_LINE = 124;
var CHAR_RIGHT_CURLY_BRACKET = 125;
var ESCAPE_SEQUENCES = {};
ESCAPE_SEQUENCES[0] = "\\0";
ESCAPE_SEQUENCES[7] = "\\a";
ESCAPE_SEQUENCES[8] = "\\b";
ESCAPE_SEQUENCES[9] = "\\t";
ESCAPE_SEQUENCES[10] = "\\n";
ESCAPE_SEQUENCES[11] = "\\v";
ESCAPE_SEQUENCES[12] = "\\f";
ESCAPE_SEQUENCES[13] = "\\r";
ESCAPE_SEQUENCES[27] = "\\e";
ESCAPE_SEQUENCES[34] = '\\"';
ESCAPE_SEQUENCES[92] = "\\\\";
ESCAPE_SEQUENCES[133] = "\\N";
ESCAPE_SEQUENCES[160] = "\\_";
ESCAPE_SEQUENCES[8232] = "\\L";
ESCAPE_SEQUENCES[8233] = "\\P";
var DEPRECATED_BOOLEANS_SYNTAX = [
  "y",
  "Y",
  "yes",
  "Yes",
  "YES",
  "on",
  "On",
  "ON",
  "n",
  "N",
  "no",
  "No",
  "NO",
  "off",
  "Off",
  "OFF"
];
var DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;
function compileStyleMap(schema2, map2) {
  var result, keys, index, length, tag, style, type2;
  if (map2 === null)
    return {};
  result = {};
  keys = Object.keys(map2);
  for (index = 0, length = keys.length; index < length; index += 1) {
    tag = keys[index];
    style = String(map2[tag]);
    if (tag.slice(0, 2) === "!!") {
      tag = "tag:yaml.org,2002:" + tag.slice(2);
    }
    type2 = schema2.compiledTypeMap["fallback"][tag];
    if (type2 && _hasOwnProperty.call(type2.styleAliases, style)) {
      style = type2.styleAliases[style];
    }
    result[tag] = style;
  }
  return result;
}
function encodeHex(character) {
  var string, handle, length;
  string = character.toString(16).toUpperCase();
  if (character <= 255) {
    handle = "x";
    length = 2;
  } else if (character <= 65535) {
    handle = "u";
    length = 4;
  } else if (character <= 4294967295) {
    handle = "U";
    length = 8;
  } else {
    throw new exception("code point within a string may not be greater than 0xFFFFFFFF");
  }
  return "\\" + handle + common.repeat("0", length - string.length) + string;
}
var QUOTING_TYPE_SINGLE = 1;
var QUOTING_TYPE_DOUBLE = 2;
function State(options) {
  this.schema = options["schema"] || _default;
  this.indent = Math.max(1, options["indent"] || 2);
  this.noArrayIndent = options["noArrayIndent"] || false;
  this.skipInvalid = options["skipInvalid"] || false;
  this.flowLevel = common.isNothing(options["flowLevel"]) ? -1 : options["flowLevel"];
  this.styleMap = compileStyleMap(this.schema, options["styles"] || null);
  this.sortKeys = options["sortKeys"] || false;
  this.lineWidth = options["lineWidth"] || 80;
  this.noRefs = options["noRefs"] || false;
  this.noCompatMode = options["noCompatMode"] || false;
  this.condenseFlow = options["condenseFlow"] || false;
  this.quotingType = options["quotingType"] === '"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;
  this.forceQuotes = options["forceQuotes"] || false;
  this.replacer = typeof options["replacer"] === "function" ? options["replacer"] : null;
  this.implicitTypes = this.schema.compiledImplicit;
  this.explicitTypes = this.schema.compiledExplicit;
  this.tag = null;
  this.result = "";
  this.duplicates = [];
  this.usedDuplicates = null;
}
function indentString(string, spaces) {
  var ind = common.repeat(" ", spaces), position = 0, next = -1, result = "", line, length = string.length;
  while (position < length) {
    next = string.indexOf("\n", position);
    if (next === -1) {
      line = string.slice(position);
      position = length;
    } else {
      line = string.slice(position, next + 1);
      position = next + 1;
    }
    if (line.length && line !== "\n")
      result += ind;
    result += line;
  }
  return result;
}
function generateNextLine(state, level) {
  return "\n" + common.repeat(" ", state.indent * level);
}
function testImplicitResolving(state, str2) {
  var index, length, type2;
  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {
    type2 = state.implicitTypes[index];
    if (type2.resolve(str2)) {
      return true;
    }
  }
  return false;
}
function isWhitespace(c) {
  return c === CHAR_SPACE || c === CHAR_TAB;
}
function isPrintable(c) {
  return 32 <= c && c <= 126 || 161 <= c && c <= 55295 && c !== 8232 && c !== 8233 || 57344 <= c && c <= 65533 && c !== CHAR_BOM || 65536 <= c && c <= 1114111;
}
function isNsCharOrWhitespace(c) {
  return isPrintable(c) && c !== CHAR_BOM && c !== CHAR_CARRIAGE_RETURN && c !== CHAR_LINE_FEED;
}
function isPlainSafe(c, prev, inblock) {
  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);
  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);
  return (
    // ns-plain-safe
    (inblock ? (
      // c = flow-in
      cIsNsCharOrWhitespace
    ) : cIsNsCharOrWhitespace && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET) && c !== CHAR_SHARP && !(prev === CHAR_COLON && !cIsNsChar) || isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP || prev === CHAR_COLON && cIsNsChar
  );
}
function isPlainSafeFirst(c) {
  return isPrintable(c) && c !== CHAR_BOM && !isWhitespace(c) && c !== CHAR_MINUS && c !== CHAR_QUESTION && c !== CHAR_COLON && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET && c !== CHAR_SHARP && c !== CHAR_AMPERSAND && c !== CHAR_ASTERISK && c !== CHAR_EXCLAMATION && c !== CHAR_VERTICAL_LINE && c !== CHAR_EQUALS && c !== CHAR_GREATER_THAN && c !== CHAR_SINGLE_QUOTE && c !== CHAR_DOUBLE_QUOTE && c !== CHAR_PERCENT && c !== CHAR_COMMERCIAL_AT && c !== CHAR_GRAVE_ACCENT;
}
function isPlainSafeLast(c) {
  return !isWhitespace(c) && c !== CHAR_COLON;
}
function codePointAt(string, pos) {
  var first = string.charCodeAt(pos), second;
  if (first >= 55296 && first <= 56319 && pos + 1 < string.length) {
    second = string.charCodeAt(pos + 1);
    if (second >= 56320 && second <= 57343) {
      return (first - 55296) * 1024 + second - 56320 + 65536;
    }
  }
  return first;
}
function needIndentIndicator(string) {
  var leadingSpaceRe = /^\n* /;
  return leadingSpaceRe.test(string);
}
var STYLE_PLAIN = 1;
var STYLE_SINGLE = 2;
var STYLE_LITERAL = 3;
var STYLE_FOLDED = 4;
var STYLE_DOUBLE = 5;
function chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth, testAmbiguousType, quotingType, forceQuotes, inblock) {
  var i;
  var char = 0;
  var prevChar = null;
  var hasLineBreak = false;
  var hasFoldableLine = false;
  var shouldTrackWidth = lineWidth !== -1;
  var previousLineBreak = -1;
  var plain = isPlainSafeFirst(codePointAt(string, 0)) && isPlainSafeLast(codePointAt(string, string.length - 1));
  if (singleLineOnly || forceQuotes) {
    for (i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
      char = codePointAt(string, i);
      if (!isPrintable(char)) {
        return STYLE_DOUBLE;
      }
      plain = plain && isPlainSafe(char, prevChar, inblock);
      prevChar = char;
    }
  } else {
    for (i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
      char = codePointAt(string, i);
      if (char === CHAR_LINE_FEED) {
        hasLineBreak = true;
        if (shouldTrackWidth) {
          hasFoldableLine = hasFoldableLine || // Foldable line = too long, and not more-indented.
          i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ";
          previousLineBreak = i;
        }
      } else if (!isPrintable(char)) {
        return STYLE_DOUBLE;
      }
      plain = plain && isPlainSafe(char, prevChar, inblock);
      prevChar = char;
    }
    hasFoldableLine = hasFoldableLine || shouldTrackWidth && (i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ");
  }
  if (!hasLineBreak && !hasFoldableLine) {
    if (plain && !forceQuotes && !testAmbiguousType(string)) {
      return STYLE_PLAIN;
    }
    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;
  }
  if (indentPerLevel > 9 && needIndentIndicator(string)) {
    return STYLE_DOUBLE;
  }
  if (!forceQuotes) {
    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;
  }
  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;
}
function writeScalar(state, string, level, iskey, inblock) {
  state.dump = function() {
    if (string.length === 0) {
      return state.quotingType === QUOTING_TYPE_DOUBLE ? '""' : "''";
    }
    if (!state.noCompatMode) {
      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {
        return state.quotingType === QUOTING_TYPE_DOUBLE ? '"' + string + '"' : "'" + string + "'";
      }
    }
    var indent = state.indent * Math.max(1, level);
    var lineWidth = state.lineWidth === -1 ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);
    var singleLineOnly = iskey || state.flowLevel > -1 && level >= state.flowLevel;
    function testAmbiguity(string2) {
      return testImplicitResolving(state, string2);
    }
    switch (chooseScalarStyle(
      string,
      singleLineOnly,
      state.indent,
      lineWidth,
      testAmbiguity,
      state.quotingType,
      state.forceQuotes && !iskey,
      inblock
    )) {
      case STYLE_PLAIN:
        return string;
      case STYLE_SINGLE:
        return "'" + string.replace(/'/g, "''") + "'";
      case STYLE_LITERAL:
        return "|" + blockHeader(string, state.indent) + dropEndingNewline(indentString(string, indent));
      case STYLE_FOLDED:
        return ">" + blockHeader(string, state.indent) + dropEndingNewline(indentString(foldString(string, lineWidth), indent));
      case STYLE_DOUBLE:
        return '"' + escapeString(string) + '"';
      default:
        throw new exception("impossible error: invalid scalar style");
    }
  }();
}
function blockHeader(string, indentPerLevel) {
  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : "";
  var clip = string[string.length - 1] === "\n";
  var keep = clip && (string[string.length - 2] === "\n" || string === "\n");
  var chomp = keep ? "+" : clip ? "" : "-";
  return indentIndicator + chomp + "\n";
}
function dropEndingNewline(string) {
  return string[string.length - 1] === "\n" ? string.slice(0, -1) : string;
}
function foldString(string, width) {
  var lineRe = /(\n+)([^\n]*)/g;
  var result = function() {
    var nextLF = string.indexOf("\n");
    nextLF = nextLF !== -1 ? nextLF : string.length;
    lineRe.lastIndex = nextLF;
    return foldLine(string.slice(0, nextLF), width);
  }();
  var prevMoreIndented = string[0] === "\n" || string[0] === " ";
  var moreIndented;
  var match;
  while (match = lineRe.exec(string)) {
    var prefix = match[1], line = match[2];
    moreIndented = line[0] === " ";
    result += prefix + (!prevMoreIndented && !moreIndented && line !== "" ? "\n" : "") + foldLine(line, width);
    prevMoreIndented = moreIndented;
  }
  return result;
}
function foldLine(line, width) {
  if (line === "" || line[0] === " ")
    return line;
  var breakRe = / [^ ]/g;
  var match;
  var start = 0, end, curr = 0, next = 0;
  var result = "";
  while (match = breakRe.exec(line)) {
    next = match.index;
    if (next - start > width) {
      end = curr > start ? curr : next;
      result += "\n" + line.slice(start, end);
      start = end + 1;
    }
    curr = next;
  }
  result += "\n";
  if (line.length - start > width && curr > start) {
    result += line.slice(start, curr) + "\n" + line.slice(curr + 1);
  } else {
    result += line.slice(start);
  }
  return result.slice(1);
}
function escapeString(string) {
  var result = "";
  var char = 0;
  var escapeSeq;
  for (var i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
    char = codePointAt(string, i);
    escapeSeq = ESCAPE_SEQUENCES[char];
    if (!escapeSeq && isPrintable(char)) {
      result += string[i];
      if (char >= 65536)
        result += string[i + 1];
    } else {
      result += escapeSeq || encodeHex(char);
    }
  }
  return result;
}
function writeFlowSequence(state, level, object) {
  var _result = "", _tag = state.tag, index, length, value;
  for (index = 0, length = object.length; index < length; index += 1) {
    value = object[index];
    if (state.replacer) {
      value = state.replacer.call(object, String(index), value);
    }
    if (writeNode(state, level, value, false, false) || typeof value === "undefined" && writeNode(state, level, null, false, false)) {
      if (_result !== "")
        _result += "," + (!state.condenseFlow ? " " : "");
      _result += state.dump;
    }
  }
  state.tag = _tag;
  state.dump = "[" + _result + "]";
}
function writeBlockSequence(state, level, object, compact) {
  var _result = "", _tag = state.tag, index, length, value;
  for (index = 0, length = object.length; index < length; index += 1) {
    value = object[index];
    if (state.replacer) {
      value = state.replacer.call(object, String(index), value);
    }
    if (writeNode(state, level + 1, value, true, true, false, true) || typeof value === "undefined" && writeNode(state, level + 1, null, true, true, false, true)) {
      if (!compact || _result !== "") {
        _result += generateNextLine(state, level);
      }
      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
        _result += "-";
      } else {
        _result += "- ";
      }
      _result += state.dump;
    }
  }
  state.tag = _tag;
  state.dump = _result || "[]";
}
function writeFlowMapping(state, level, object) {
  var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, pairBuffer;
  for (index = 0, length = objectKeyList.length; index < length; index += 1) {
    pairBuffer = "";
    if (_result !== "")
      pairBuffer += ", ";
    if (state.condenseFlow)
      pairBuffer += '"';
    objectKey = objectKeyList[index];
    objectValue = object[objectKey];
    if (state.replacer) {
      objectValue = state.replacer.call(object, objectKey, objectValue);
    }
    if (!writeNode(state, level, objectKey, false, false)) {
      continue;
    }
    if (state.dump.length > 1024)
      pairBuffer += "? ";
    pairBuffer += state.dump + (state.condenseFlow ? '"' : "") + ":" + (state.condenseFlow ? "" : " ");
    if (!writeNode(state, level, objectValue, false, false)) {
      continue;
    }
    pairBuffer += state.dump;
    _result += pairBuffer;
  }
  state.tag = _tag;
  state.dump = "{" + _result + "}";
}
function writeBlockMapping(state, level, object, compact) {
  var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, explicitPair, pairBuffer;
  if (state.sortKeys === true) {
    objectKeyList.sort();
  } else if (typeof state.sortKeys === "function") {
    objectKeyList.sort(state.sortKeys);
  } else if (state.sortKeys) {
    throw new exception("sortKeys must be a boolean or a function");
  }
  for (index = 0, length = objectKeyList.length; index < length; index += 1) {
    pairBuffer = "";
    if (!compact || _result !== "") {
      pairBuffer += generateNextLine(state, level);
    }
    objectKey = objectKeyList[index];
    objectValue = object[objectKey];
    if (state.replacer) {
      objectValue = state.replacer.call(object, objectKey, objectValue);
    }
    if (!writeNode(state, level + 1, objectKey, true, true, true)) {
      continue;
    }
    explicitPair = state.tag !== null && state.tag !== "?" || state.dump && state.dump.length > 1024;
    if (explicitPair) {
      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
        pairBuffer += "?";
      } else {
        pairBuffer += "? ";
      }
    }
    pairBuffer += state.dump;
    if (explicitPair) {
      pairBuffer += generateNextLine(state, level);
    }
    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {
      continue;
    }
    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
      pairBuffer += ":";
    } else {
      pairBuffer += ": ";
    }
    pairBuffer += state.dump;
    _result += pairBuffer;
  }
  state.tag = _tag;
  state.dump = _result || "{}";
}
function detectType(state, object, explicit) {
  var _result, typeList, index, length, type2, style;
  typeList = explicit ? state.explicitTypes : state.implicitTypes;
  for (index = 0, length = typeList.length; index < length; index += 1) {
    type2 = typeList[index];
    if ((type2.instanceOf || type2.predicate) && (!type2.instanceOf || typeof object === "object" && object instanceof type2.instanceOf) && (!type2.predicate || type2.predicate(object))) {
      if (explicit) {
        if (type2.multi && type2.representName) {
          state.tag = type2.representName(object);
        } else {
          state.tag = type2.tag;
        }
      } else {
        state.tag = "?";
      }
      if (type2.represent) {
        style = state.styleMap[type2.tag] || type2.defaultStyle;
        if (_toString.call(type2.represent) === "[object Function]") {
          _result = type2.represent(object, style);
        } else if (_hasOwnProperty.call(type2.represent, style)) {
          _result = type2.represent[style](object, style);
        } else {
          throw new exception("!<" + type2.tag + '> tag resolver accepts not "' + style + '" style');
        }
        state.dump = _result;
      }
      return true;
    }
  }
  return false;
}
function writeNode(state, level, object, block, compact, iskey, isblockseq) {
  state.tag = null;
  state.dump = object;
  if (!detectType(state, object, false)) {
    detectType(state, object, true);
  }
  var type2 = _toString.call(state.dump);
  var inblock = block;
  var tagStr;
  if (block) {
    block = state.flowLevel < 0 || state.flowLevel > level;
  }
  var objectOrArray = type2 === "[object Object]" || type2 === "[object Array]", duplicateIndex, duplicate;
  if (objectOrArray) {
    duplicateIndex = state.duplicates.indexOf(object);
    duplicate = duplicateIndex !== -1;
  }
  if (state.tag !== null && state.tag !== "?" || duplicate || state.indent !== 2 && level > 0) {
    compact = false;
  }
  if (duplicate && state.usedDuplicates[duplicateIndex]) {
    state.dump = "*ref_" + duplicateIndex;
  } else {
    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {
      state.usedDuplicates[duplicateIndex] = true;
    }
    if (type2 === "[object Object]") {
      if (block && Object.keys(state.dump).length !== 0) {
        writeBlockMapping(state, level, state.dump, compact);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + state.dump;
        }
      } else {
        writeFlowMapping(state, level, state.dump);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + " " + state.dump;
        }
      }
    } else if (type2 === "[object Array]") {
      if (block && state.dump.length !== 0) {
        if (state.noArrayIndent && !isblockseq && level > 0) {
          writeBlockSequence(state, level - 1, state.dump, compact);
        } else {
          writeBlockSequence(state, level, state.dump, compact);
        }
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + state.dump;
        }
      } else {
        writeFlowSequence(state, level, state.dump);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + " " + state.dump;
        }
      }
    } else if (type2 === "[object String]") {
      if (state.tag !== "?") {
        writeScalar(state, state.dump, level, iskey, inblock);
      }
    } else if (type2 === "[object Undefined]") {
      return false;
    } else {
      if (state.skipInvalid)
        return false;
      throw new exception("unacceptable kind of an object to dump " + type2);
    }
    if (state.tag !== null && state.tag !== "?") {
      tagStr = encodeURI(
        state.tag[0] === "!" ? state.tag.slice(1) : state.tag
      ).replace(/!/g, "%21");
      if (state.tag[0] === "!") {
        tagStr = "!" + tagStr;
      } else if (tagStr.slice(0, 18) === "tag:yaml.org,2002:") {
        tagStr = "!!" + tagStr.slice(18);
      } else {
        tagStr = "!<" + tagStr + ">";
      }
      state.dump = tagStr + " " + state.dump;
    }
  }
  return true;
}
function getDuplicateReferences(object, state) {
  var objects = [], duplicatesIndexes = [], index, length;
  inspectNode(object, objects, duplicatesIndexes);
  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {
    state.duplicates.push(objects[duplicatesIndexes[index]]);
  }
  state.usedDuplicates = new Array(length);
}
function inspectNode(object, objects, duplicatesIndexes) {
  var objectKeyList, index, length;
  if (object !== null && typeof object === "object") {
    index = objects.indexOf(object);
    if (index !== -1) {
      if (duplicatesIndexes.indexOf(index) === -1) {
        duplicatesIndexes.push(index);
      }
    } else {
      objects.push(object);
      if (Array.isArray(object)) {
        for (index = 0, length = object.length; index < length; index += 1) {
          inspectNode(object[index], objects, duplicatesIndexes);
        }
      } else {
        objectKeyList = Object.keys(object);
        for (index = 0, length = objectKeyList.length; index < length; index += 1) {
          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);
        }
      }
    }
  }
}
function dump$1(input, options) {
  options = options || {};
  var state = new State(options);
  if (!state.noRefs)
    getDuplicateReferences(input, state);
  var value = input;
  if (state.replacer) {
    value = state.replacer.call({ "": value }, "", value);
  }
  if (writeNode(state, 0, value, true, true))
    return state.dump + "\n";
  return "";
}
var dump_1 = dump$1;
var dumper = {
  dump: dump_1
};
function renamed(from, to) {
  return function() {
    throw new Error("Function yaml." + from + " is removed in js-yaml 4. Use yaml." + to + " instead, which is now safe by default.");
  };
}
var load = loader.load;
var loadAll = loader.loadAll;
var dump = dumper.dump;
var safeLoad = renamed("safeLoad", "load");
var safeLoadAll = renamed("safeLoadAll", "loadAll");
var safeDump = renamed("safeDump", "dump");

// src/services/config-service.ts
var ConfigService = class {
  constructor(app, settings) {
    this.config = null;
    this.configWatcher = null;
    this.app = app;
    this.settings = settings;
    this.initializeConfigFromSettings();
  }
  /**
   * Initialize config from plugin settings instead of YAML file
   */
  initializeConfigFromSettings() {
    if (!this.settings.summarize || !this.settings.keywords || !this.settings.translate || !this.settings.rewrite || !this.settings.compose) {
      console.error("Missing required operation settings");
      return;
    }
    this.config = {
      summarize: this.settings.summarize,
      keywords: this.settings.keywords,
      translate: this.settings.translate,
      rewrite: this.settings.rewrite,
      compose: this.settings.compose
    };
    console.log("Config initialized from plugin settings:", this.config);
  }
  getConfig() {
    return this.config;
  }
  updateSettings(settings) {
    this.settings = settings;
    this.initializeConfigFromSettings();
  }
  /**
   * Migration method to load config from YAML file and convert to settings
   */
  async migrateFromYAML() {
    try {
      if (!this.settings.configFilePath) {
        console.log("No config file path set for migration");
        return null;
      }
      const configPath = this.settings.configFilePath;
      console.log("Attempting migration from:", configPath);
      const configFile = this.app.vault.getAbstractFileByPath(configPath);
      if (!configFile) {
        console.log("No existing config file found for migration");
        return null;
      }
      const configContent = await this.app.vault.read(configFile);
      const yamlConfig = load(configContent);
      const migratedSettings = {
        summarize: yamlConfig.summarize,
        keywords: yamlConfig.keywords,
        translate: yamlConfig.translate,
        rewrite: yamlConfig.rewrite,
        compose: yamlConfig.compose
      };
      console.log("Migration successful:", migratedSettings);
      new import_obsidian.Notice("Configuration migrated from YAML file successfully");
      return migratedSettings;
    } catch (error) {
      console.error("Error during migration:", error);
      new import_obsidian.Notice("Error migrating configuration: " + error.message);
      return null;
    }
  }
  /**
   * Migration method to load config from YAML content string and convert to settings
   */
  async migrateFromYAMLContent(yamlContent) {
    try {
      console.log("Attempting migration from YAML content");
      const yamlConfig = load(yamlContent);
      const migratedSettings = {
        summarize: yamlConfig.summarize,
        keywords: yamlConfig.keywords,
        translate: yamlConfig.translate,
        rewrite: yamlConfig.rewrite,
        compose: yamlConfig.compose
      };
      console.log("Migration from content successful:", migratedSettings);
      return migratedSettings;
    } catch (error) {
      console.error("Error during migration from content:", error);
      throw new Error("Error migrating configuration: " + error.message);
    }
  }
  /**
   * Export current settings to YAML format
   */
  async exportToYAML() {
    try {
      const config = this.getConfig();
      if (!config) {
        throw new Error("No configuration available");
      }
      const yamlContent = dump(config, {
        indent: 2,
        lineWidth: 120
      });
      console.log("Settings exported to YAML");
      return yamlContent;
    } catch (error) {
      console.error("Error exporting to YAML:", error);
      throw new Error("Failed to export configuration: " + error.message);
    }
  }
  /**
   * Setup config watcher (deprecated, kept for backward compatibility)
   */
  setupConfigWatcher() {
    if (this.configWatcher) {
      this.app.vault.offref(this.configWatcher);
    }
    console.log("Config watcher setup skipped (using UI settings)");
  }
  /**
   * Load config from YAML file (deprecated, kept for backward compatibility)
   */
  async loadConfig() {
    console.log("YAML config loading skipped (using UI settings)");
  }
  cleanup() {
    if (this.configWatcher) {
      this.app.vault.offref(this.configWatcher);
      this.configWatcher = null;
    }
  }
};

// src/services/ai-service.ts
var AIService = class {
  constructor(settings) {
    this.settings = settings;
  }
  updateSettings(settings) {
    this.settings = settings;
  }
  async summarize(request) {
    return this.makeRequest("/api/v1/summarize", request, request.config.stream);
  }
  async extractKeywords(request) {
    return this.makeRequest("/api/v1/keywords", request, false);
  }
  async translate(request) {
    return this.makeRequest("/api/v1/translate", request, request.config.stream);
  }
  async rewrite(request) {
    return this.makeRequest("/api/v1/rewrite", request, request.config.stream);
  }
  async compose(request) {
    return this.makeRequest("/api/v1/compose", request, request.config.stream);
  }
  async makeRequest(endpoint, requestBody, isStreaming) {
    const normalizedEndpoint = endpoint.startsWith("/") ? endpoint : "/" + endpoint;
    const headers = {
      "Content-Type": "application/json",
      "Origin": "app://obsidian.md",
      "Accept": isStreaming ? "text/event-stream, application/x-ndjson, application/json" : "application/json"
    };
    if (this.settings.apiKey) {
      headers["Authorization"] = `Bearer ${this.settings.apiKey}`;
    }
    const response = await fetch(`${this.settings.apiUrl}${normalizedEndpoint}`, {
      method: "POST",
      headers,
      body: JSON.stringify(requestBody)
    });
    if (!response.ok) {
      const errorText = await response.text();
      throw new Error(`HTTP error! status: ${response.status} - ${errorText}`);
    }
    return response;
  }
};

// src/services/streaming-service.ts
var import_obsidian2 = require("obsidian");

// src/utils/editor-utils.ts
function appendToEndOfDocument(editor, text) {
  const lastLine = editor.lastLine();
  const lastLineContent = editor.getLine(lastLine);
  const endOfDocument = { line: lastLine, ch: lastLineContent.length };
  editor.setCursor(endOfDocument);
  editor.replaceRange(text, endOfDocument, endOfDocument);
}

// src/services/streaming-service.ts
var StreamingService = class {
  async handleStreamingResponse(response, editor, headerText, successMessage) {
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    appendToEndOfDocument(editor, headerText);
    let buffer = "";
    let totalContent = "";
    try {
      while (true) {
        const { done, value } = await reader.read();
        if (done) {
          break;
        }
        const chunk = decoder.decode(value, { stream: true });
        buffer += chunk;
        const lines = buffer.split(/\r?\n/);
        buffer = lines.pop() || "";
        for (const line of lines) {
          if (line.trim() === "")
            continue;
          try {
            let jsonStr = line;
            if (line.startsWith("data: ")) {
              jsonStr = line.slice(6).trim();
            } else if (line.startsWith("event:") || line.startsWith("id:") || line.startsWith("retry:")) {
              continue;
            }
            if (jsonStr === "[DONE]" || jsonStr === "data: [DONE]") {
              continue;
            }
            if (!jsonStr || !jsonStr.startsWith("{") && !jsonStr.startsWith("[")) {
              continue;
            }
            const streamData = JSON.parse(jsonStr);
            const content = streamData.content || streamData.text || streamData.delta || streamData.chunk || streamData.message;
            if (content) {
              totalContent += content;
              await new Promise((resolve) => setTimeout(resolve, 10));
              const lastLine = editor.lastLine();
              const lastLineContent = editor.getLine(lastLine);
              const appendPosition = { line: lastLine, ch: lastLineContent.length };
              editor.replaceRange(content, appendPosition, appendPosition);
              const newLastLine = editor.lastLine();
              editor.setCursor({ line: newLastLine, ch: editor.getLine(newLastLine).length });
              editor.scrollIntoView({ from: { line: newLastLine, ch: 0 }, to: { line: newLastLine, ch: 0 } }, true);
            }
            if (streamData.done) {
              new import_obsidian2.Notice(successMessage);
              return;
            }
          } catch (parseError) {
          }
        }
      }
      if (buffer.trim()) {
        try {
          let jsonStr = buffer.trim();
          if (jsonStr.startsWith("data: ")) {
            jsonStr = jsonStr.slice(6).trim();
          }
          if (jsonStr !== "[DONE]" && jsonStr.startsWith("{")) {
            const streamData = JSON.parse(jsonStr);
            const content = streamData.content || streamData.text || streamData.delta || streamData.chunk || streamData.message;
            if (content) {
              totalContent += content;
              const lastLine = editor.lastLine();
              const lastLineContent = editor.getLine(lastLine);
              const appendPosition = { line: lastLine, ch: lastLineContent.length };
              editor.replaceRange(content, appendPosition, appendPosition);
            }
          }
        } catch (e) {
        }
      }
    } catch (streamError) {
      new import_obsidian2.Notice("Error during streaming: " + streamError.message);
    } finally {
      reader.releaseLock();
    }
    new import_obsidian2.Notice(successMessage);
  }
};

// src/services/ui-state-service.ts
var import_obsidian3 = require("obsidian");
var UIStateService = class extends import_obsidian3.Events {
  constructor() {
    super(...arguments);
    this.state = {
      isModalOpen: false
    };
  }
  getState() {
    return this.state;
  }
  setModalState(isOpen) {
    if (this.state.isModalOpen !== isOpen) {
      this.state.isModalOpen = isOpen;
      this.trigger("modal-state-change", this.state);
    }
  }
};

// src/operations/summarize.ts
var import_obsidian4 = require("obsidian");
var SummarizeOperation = class {
  constructor(aiService, streamingService, configService) {
    this.aiService = aiService;
    this.streamingService = streamingService;
    this.configService = configService;
  }
  async execute(editor, text, settings) {
    if (!settings.summarize) {
      new import_obsidian4.Notice("Please configure the summarize settings in the plugin settings first");
      return;
    }
    if (!settings.apiUrl) {
      new import_obsidian4.Notice("Please configure the summarize settings in the plugin settings first");
      return;
    }
    try {
      const requestBody = {
        payload: {
          text,
          maxLength: settings.summarize.maxLength || 200
        },
        config: {
          provider: settings.summarize.provider,
          model: settings.summarize.model,
          temperature: settings.summarize.temperature,
          stream: settings.summarize.stream
        }
      };
      const response = await this.aiService.summarize(requestBody);
      const contentType = response.headers.get("content-type") || "";
      const isStreaming = settings.summarize.stream && (contentType.includes("text/event-stream") || contentType.includes("application/x-ndjson") || response.body);
      if (isStreaming && response.body) {
        await this.streamingService.handleStreamingResponse(
          response,
          editor,
          "\n\n**Summary:**\n\n",
          "Text summarized successfully"
        );
      } else {
        const result = await response.json();
        appendToEndOfDocument(editor, `

**Summary:**

 ${result.summary}`);
        new import_obsidian4.Notice("Text summarized successfully");
      }
    } catch (error) {
      console.error("Error summarizing text:", error);
      new import_obsidian4.Notice("Please configure the summarize settings in the plugin settings first");
    }
  }
};

// src/operations/translate.ts
var import_obsidian5 = require("obsidian");
var TranslateOperation = class {
  constructor(aiService, streamingService, configService) {
    this.aiService = aiService;
    this.streamingService = streamingService;
    this.configService = configService;
  }
  async execute(editor, text, settings, customTargetLanguage) {
    if (!settings.translate) {
      new import_obsidian5.Notice("Please configure the translate settings in the plugin settings first");
      return;
    }
    if (!settings.apiUrl) {
      new import_obsidian5.Notice("Please configure the translate settings in the plugin settings first");
      return;
    }
    const targetLanguage = customTargetLanguage || settings.translate.defaultTargetLanguage;
    if (!targetLanguage) {
      new import_obsidian5.Notice("Please configure the translate settings in the plugin settings first");
      return;
    }
    try {
      const requestBody = {
        payload: {
          text,
          targetLanguage
        },
        config: {
          provider: settings.translate.provider,
          model: settings.translate.model,
          temperature: settings.translate.temperature,
          stream: settings.translate.stream
        }
      };
      const response = await this.aiService.translate(requestBody);
      const contentType = response.headers.get("content-type") || "";
      const isStreaming = settings.translate.stream && (contentType.includes("text/event-stream") || contentType.includes("application/x-ndjson") || response.body);
      if (isStreaming && response.body) {
        await this.streamingService.handleStreamingResponse(
          response,
          editor,
          `

**Translation (${targetLanguage}):**

`,
          "Text translated successfully"
        );
      } else {
        const result = await response.json();
        appendToEndOfDocument(editor, `

**Translation (${targetLanguage}):**

${result.translation}`);
        new import_obsidian5.Notice("Text translated successfully");
      }
    } catch (error) {
      console.error("Error translating text:", error);
      new import_obsidian5.Notice("Please configure the translate settings in the plugin settings first");
    }
  }
};

// src/operations/keywords.ts
var import_obsidian6 = require("obsidian");
var KeywordsOperation = class {
  constructor(aiService, configService) {
    this.aiService = aiService;
    this.configService = configService;
  }
  async execute(editor, text, settings) {
    if (!settings.keywords) {
      new import_obsidian6.Notice("Please configure the keywords settings in the plugin settings first");
      return;
    }
    if (!settings.apiUrl) {
      new import_obsidian6.Notice("Please configure the keywords settings in the plugin settings first");
      return;
    }
    try {
      const requestBody = {
        payload: {
          text,
          maxKeywords: settings.keywords.maxKeywords || 10
        },
        config: {
          provider: settings.keywords.provider,
          model: settings.keywords.model,
          temperature: settings.keywords.temperature || 0.3,
          stream: settings.keywords.stream
        }
      };
      const response = await this.aiService.extractKeywords(requestBody);
      const result = await response.json();
      const cursor = editor.getCursor("to");
      editor.setCursor(cursor);
      const keywordsList = result.keywords.map((keyword) => `- ${keyword}`).join("\n");
      editor.replaceRange(`

**Keywords:**
${keywordsList}`, cursor);
      new import_obsidian6.Notice("Keywords extracted successfully");
    } catch (error) {
      console.error("Error extracting keywords:", error);
      new import_obsidian6.Notice("Please configure the keywords settings in the plugin settings first");
    }
  }
};

// src/operations/rewrite.ts
var import_obsidian7 = require("obsidian");
var RewriteOperation = class {
  constructor(aiService, streamingService, configService) {
    this.aiService = aiService;
    this.streamingService = streamingService;
    this.configService = configService;
  }
  async execute(editor, text, instruction, tone, headerLabel, settings) {
    if (!settings.rewrite) {
      new import_obsidian7.Notice("Please configure the rewrite settings in the plugin settings first");
      return;
    }
    if (!settings.apiUrl) {
      new import_obsidian7.Notice("Please configure the rewrite settings in the plugin settings first");
      return;
    }
    try {
      const requestBody = {
        payload: {
          text,
          instruction,
          ...tone && tone.trim() !== "" && { tone }
        },
        config: {
          provider: settings.rewrite.provider,
          model: settings.rewrite.model,
          temperature: settings.rewrite.temperature,
          stream: settings.rewrite.stream
        }
      };
      const response = await this.aiService.rewrite(requestBody);
      const contentType = response.headers.get("content-type") || "";
      const isStreaming = settings.rewrite.stream && (contentType.includes("text/event-stream") || contentType.includes("application/x-ndjson") || response.body);
      if (isStreaming && response.body) {
        await this.streamingService.handleStreamingResponse(
          response,
          editor,
          `

**${headerLabel}:**

`,
          "Action applied successfully"
        );
      } else {
        const result = await response.json();
        const output = result.text || result.result || result.output || result.content || result.message || "";
        appendToEndOfDocument(editor, `

**${headerLabel}:**

${output}`);
        new import_obsidian7.Notice("Action applied successfully");
      }
    } catch (error) {
      console.error("Error applying rewrite:", error);
      new import_obsidian7.Notice("Please configure the rewrite settings in the plugin settings first");
    }
  }
  // Convenience methods for different rewrite operations
  async improveDescription(editor, text, settings) {
    await this.execute(editor, text, "improve_text", "", "Improved description", settings);
  }
  async improveWriting(editor, text, settings) {
    await this.execute(editor, text, "improve_text", "", "Improved writing", settings);
  }
  async fixSpellingGrammar(editor, text, settings) {
    await this.execute(editor, text, "fix_spelling_grammar", "", "Fixed spelling & grammar", settings);
  }
  async brainstorm(editor, text, settings) {
    await this.execute(editor, text, "brainstorm_ideas", "", "Brainstorm", settings);
  }
  async makeShorter(editor, text, settings) {
    await this.execute(editor, text, "shorten", "", "Shorter version", settings);
  }
  async changeTone(editor, text, tone, settings) {
    await this.execute(editor, text, "rewrite_with_tone", tone, "Changing tone", settings);
  }
};

// src/operations/compose.ts
var import_obsidian8 = require("obsidian");
var ComposeOperation = class {
  constructor(aiService, streamingService, configService) {
    this.aiService = aiService;
    this.streamingService = streamingService;
    this.configService = configService;
  }
  async execute(editor, topic, settings) {
    var _a;
    if (!settings.compose) {
      new import_obsidian8.Notice("Please configure the compose settings in the plugin settings first");
      return;
    }
    if (!settings.apiUrl) {
      new import_obsidian8.Notice("Please configure the compose settings in the plugin settings first");
      return;
    }
    try {
      const requestBody = {
        payload: {
          topic,
          maxLength: ((_a = settings.compose) == null ? void 0 : _a.maxLength) || 200
        },
        config: {
          provider: settings.compose.provider,
          model: settings.compose.model,
          temperature: settings.compose.temperature,
          stream: settings.compose.stream
        }
      };
      const response = await this.aiService.compose(requestBody);
      const contentType = response.headers.get("content-type") || "";
      const isStreaming = settings.compose.stream && (contentType.includes("text/event-stream") || contentType.includes("application/x-ndjson") || response.body);
      if (isStreaming && response.body) {
        await this.streamingService.handleStreamingResponse(
          response,
          editor,
          `

**New Idea**

`,
          "Composed successfully"
        );
      } else {
        const result = await response.json();
        appendToEndOfDocument(editor, `

**New Idea**

`);
        new import_obsidian8.Notice("Composed successfully");
      }
    } catch (error) {
      console.error("Compose operation error:", error);
      new import_obsidian8.Notice("Please configure the compose settings in the plugin settings first");
    }
  }
};

// src/ui/commands.ts
var import_obsidian9 = require("obsidian");

// src/types/languages.ts
var SUPPORTED_LANGUAGES = [
  { label: "English", code: "en" },
  { label: "Spanish", code: "es" },
  { label: "French", code: "fr" },
  { label: "German", code: "de" },
  { label: "Italian", code: "it" },
  { label: "Portuguese", code: "pt" },
  { label: "Chinese (Simplified)", code: "zh" },
  { label: "Japanese", code: "ja" },
  { label: "Korean", code: "ko" },
  { label: "Hindi", code: "hi" },
  { label: "Arabic", code: "ar" },
  { label: "Dutch", code: "nl" },
  { label: "Russian", code: "ru" }
];
var POPULAR_LANGUAGES = [
  { label: "English", code: "en" },
  { label: "Spanish", code: "es" },
  { label: "French", code: "fr" },
  { label: "German", code: "de" },
  { label: "Italian", code: "it" },
  { label: "Portuguese", code: "pt" },
  { label: "Chinese (Simplified)", code: "zh" },
  { label: "Japanese", code: "ja" },
  { label: "Korean", code: "ko" },
  { label: "Hindi", code: "hi" },
  { label: "Arabic", code: "ar" },
  { label: "Dutch", code: "nl" },
  { label: "Russian", code: "ru" }
];

// src/types/tones.ts
var TONES = [
  "Friendly",
  "Formal",
  "Casual",
  "Professional",
  "Confident",
  "Empathetic",
  "Persuasive",
  "Playful",
  "Direct"
];

// src/ui/commands.ts
var CommandsManager = class {
  constructor(summarizeOperation, translateOperation, keywordsOperation, rewriterOperation, settings) {
    this.tones = TONES;
    this.summarizeOperation = summarizeOperation;
    this.translateOperation = translateOperation;
    this.keywordsOperation = keywordsOperation;
    this.rewriterOperation = rewriterOperation;
    this.settings = settings;
    this.languages = [...SUPPORTED_LANGUAGES];
  }
  updateSettings(settings) {
    this.settings = settings;
  }
  getCommands() {
    const baseCommands = [
      {
        id: "summarize-selection",
        name: "Summarize selected text",
        editorCallback: async (editor, view) => {
          const selection = editor.getSelection();
          if (selection.length > 0) {
            await this.summarizeOperation.execute(editor, selection, this.settings);
          } else {
            new import_obsidian9.Notice("Please select some text to summarize");
          }
        }
      },
      {
        id: "extract-keywords-selection",
        name: "Extract keywords from selected text",
        editorCallback: async (editor, view) => {
          const selection = editor.getSelection();
          if (selection.length > 0) {
            await this.keywordsOperation.execute(editor, selection, this.settings);
          } else {
            new import_obsidian9.Notice("Please select some text to extract keywords from");
          }
        }
      },
      {
        id: "translate-selection",
        name: "Translate selected text (default language)",
        editorCallback: async (editor, view) => {
          const selection = editor.getSelection();
          if (selection.length > 0) {
            await this.translateOperation.execute(editor, selection, this.settings);
          } else {
            new import_obsidian9.Notice("Please select some text to translate");
          }
        }
      },
      {
        id: "improve-description-selection",
        name: "Improve description of selected text",
        editorCallback: async (editor, view) => {
          const selection = editor.getSelection();
          if (selection.length > 0) {
            await this.rewriterOperation.improveDescription(editor, selection, this.settings);
          } else {
            new import_obsidian9.Notice("Please select some text to improve");
          }
        }
      },
      {
        id: "improve-writing-selection",
        name: "Improve writing of selected text",
        editorCallback: async (editor, view) => {
          const selection = editor.getSelection();
          if (selection.length > 0) {
            await this.rewriterOperation.improveWriting(editor, selection, this.settings);
          } else {
            new import_obsidian9.Notice("Please select some text to improve");
          }
        }
      },
      {
        id: "fix-spelling-grammar-selection",
        name: "Fix spelling & grammar of selection",
        editorCallback: async (editor, view) => {
          const selection = editor.getSelection();
          if (selection.length > 0) {
            await this.rewriterOperation.fixSpellingGrammar(editor, selection, this.settings);
          } else {
            new import_obsidian9.Notice("Please select some text to correct");
          }
        }
      },
      {
        id: "brainstorm-selection",
        name: "Brainstorm ideas from selection",
        editorCallback: async (editor, view) => {
          const selection = editor.getSelection();
          if (selection.length > 0) {
            await this.rewriterOperation.brainstorm(editor, selection, this.settings);
          } else {
            new import_obsidian9.Notice("Please select some text to brainstorm on");
          }
        }
      },
      {
        id: "make-shorter-selection",
        name: "Make selected text shorter",
        editorCallback: async (editor, view) => {
          const selection = editor.getSelection();
          if (selection.length > 0) {
            await this.rewriterOperation.makeShorter(editor, selection, this.settings);
          } else {
            new import_obsidian9.Notice("Please select some text to shorten");
          }
        }
      }
    ];
    const translationCommands = this.languages.map((language) => ({
      id: `translate-selection-to-${language.code}`,
      name: `Translate selection to ${language.label}`,
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        if (selection.length > 0) {
          await this.translateOperation.execute(editor, selection, this.settings, language.code);
        } else {
          new import_obsidian9.Notice("Please select some text to translate");
        }
      }
    }));
    const rewriteCommands = this.tones.map((tone) => ({
      id: `change-tone-${tone.toLowerCase()}-selection`,
      name: `Change tone to ${tone}`,
      editorCallback: async (editor, view) => {
        const selection = editor.getSelection();
        if (selection.length > 0) {
          await this.rewriterOperation.changeTone(editor, selection, tone, this.settings);
        } else {
          new import_obsidian9.Notice("Please select some text to translate");
        }
      }
    }));
    return [...baseCommands, ...translationCommands, ...rewriteCommands];
  }
};

// src/ui/settings-tab.ts
var import_obsidian12 = require("obsidian");

// src/ui/export-path-modal.ts
var import_obsidian10 = require("obsidian");
var ExportPathModal = class extends import_obsidian10.Modal {
  constructor(app, defaultFileName, extension, content) {
    super(app);
    this.fileName = defaultFileName;
    this.extension = extension;
    this.content = content;
    this.onExportComplete = () => {
    };
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Export Configuration" });
    new import_obsidian10.Setting(contentEl).setName("File name").setDesc("Enter the name for the exported file").addText((text) => {
      text.setValue(this.fileName).setPlaceholder(`Enter file name`).onChange((value) => {
        this.fileName = value;
      });
    });
    const pathInfo = contentEl.createDiv();
    pathInfo.style.marginBottom = "1em";
    pathInfo.style.padding = "0.5em";
    pathInfo.style.background = "var(--background-secondary)";
    pathInfo.style.borderRadius = "4px";
    pathInfo.style.fontSize = "0.9em";
    pathInfo.textContent = `The file will be saved in your vault's root directory as: ${this.fileName}.${this.extension}`;
    const buttonContainer = contentEl.createDiv();
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "1em";
    buttonContainer.style.marginTop = "2em";
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.style.padding = "0.5em 1em";
    cancelButton.style.borderRadius = "4px";
    cancelButton.style.border = "1px solid var(--background-modifier-border)";
    cancelButton.style.background = "var(--background-primary)";
    cancelButton.style.cursor = "pointer";
    cancelButton.onclick = () => {
      this.close();
    };
    const exportButton = buttonContainer.createEl("button", { text: "Export" });
    exportButton.style.padding = "0.5em 1em";
    exportButton.style.borderRadius = "4px";
    exportButton.style.border = "none";
    exportButton.style.background = "var(--interactive-accent)";
    exportButton.style.color = "var(--text-on-accent)";
    exportButton.style.cursor = "pointer";
    exportButton.onclick = async () => {
      await this.exportFile();
    };
    const handleKeyPress = (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        this.exportFile();
      } else if (event.key === "Escape") {
        event.preventDefault();
        this.close();
      }
    };
    contentEl.addEventListener("keydown", handleKeyPress);
    this.register(() => {
      contentEl.removeEventListener("keydown", handleKeyPress);
    });
  }
  async exportFile() {
    try {
      let finalFileName = this.fileName;
      if (!finalFileName.endsWith(`.${this.extension}`)) {
        finalFileName = `${finalFileName}.${this.extension}`;
      }
      await this.app.vault.create(finalFileName, this.content);
      this.close();
      this.onExportComplete(finalFileName);
    } catch (error) {
      console.error("Failed to export file:", error);
      const errorDiv = this.contentEl.createDiv();
      errorDiv.style.color = "var(--text-error)";
      errorDiv.style.padding = "1em";
      errorDiv.style.background = "var(--background-modifier-error)";
      errorDiv.style.borderRadius = "4px";
      errorDiv.style.marginTop = "1em";
      errorDiv.textContent = `Failed to export: ${error.message}`;
      setTimeout(() => {
        errorDiv.remove();
      }, 3e3);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.onExportComplete(null);
  }
};

// src/ui/import-file-modal.ts
var import_obsidian11 = require("obsidian");
var ImportFileModal = class extends import_obsidian11.Modal {
  constructor(app, extension) {
    super(app);
    this.selectedFile = null;
    this.extension = extension;
    this.onImportComplete = () => {
    };
  }
  onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "Import Configuration" });
    const files = this.app.vault.getFiles().filter(
      (file) => file.name.endsWith(`.${this.extension}`)
    );
    if (files.length === 0) {
      const noFilesMsg = contentEl.createDiv();
      noFilesMsg.style.padding = "1em";
      noFilesMsg.style.background = "var(--background-modifier-error)";
      noFilesMsg.style.color = "var(--text-normal)";
      noFilesMsg.style.borderRadius = "4px";
      noFilesMsg.textContent = `No .${this.extension} files found in your vault.`;
      return;
    }
    new import_obsidian11.Setting(contentEl).setName("Select file").setDesc(`Choose a .${this.extension} file to import`).addDropdown((dropdown) => {
      files.forEach((file) => {
        dropdown.addOption(file.path, file.name);
      });
      dropdown.setValue(files[0].path);
      dropdown.onChange((value) => {
        this.selectedFile = files.find((f) => f.path === value) || null;
      });
      this.selectedFile = files[0];
    });
    const fileInfo = contentEl.createDiv();
    fileInfo.style.marginBottom = "1em";
    fileInfo.style.padding = "0.5em";
    fileInfo.style.background = "var(--background-secondary)";
    fileInfo.style.borderRadius = "4px";
    fileInfo.style.fontSize = "0.9em";
    fileInfo.textContent = `Selected file: ${((_a = this.selectedFile) == null ? void 0 : _a.name) || "None"}`;
    const buttonContainer = contentEl.createDiv();
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "1em";
    buttonContainer.style.marginTop = "2em";
    const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
    cancelButton.style.padding = "0.5em 1em";
    cancelButton.style.borderRadius = "4px";
    cancelButton.style.border = "1px solid var(--background-modifier-border)";
    cancelButton.style.background = "var(--background-primary)";
    cancelButton.style.cursor = "pointer";
    cancelButton.onclick = () => {
      this.close();
    };
    const importButton = buttonContainer.createEl("button", { text: "Import" });
    importButton.style.padding = "0.5em 1em";
    importButton.style.borderRadius = "4px";
    importButton.style.border = "none";
    importButton.style.background = "var(--interactive-accent)";
    importButton.style.color = "var(--text-on-accent)";
    importButton.style.cursor = "pointer";
    importButton.onclick = async () => {
      await this.importFile();
    };
    const updateFileInfo = () => {
      var _a2;
      fileInfo.textContent = `Selected file: ${((_a2 = this.selectedFile) == null ? void 0 : _a2.name) || "None"}`;
    };
    const handleKeyPress = (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        this.importFile();
      } else if (event.key === "Escape") {
        event.preventDefault();
        this.close();
      }
    };
    contentEl.addEventListener("keydown", handleKeyPress);
    this.register(() => {
      contentEl.removeEventListener("keydown", handleKeyPress);
    });
  }
  async importFile() {
    try {
      if (!this.selectedFile) {
        throw new Error("No file selected");
      }
      const fileContent = await this.app.vault.read(this.selectedFile);
      this.close();
      this.onImportComplete(this.selectedFile.path, fileContent);
    } catch (error) {
      console.error("Failed to import file:", error);
      const errorDiv = this.contentEl.createDiv();
      errorDiv.style.color = "var(--text-error)";
      errorDiv.style.padding = "1em";
      errorDiv.style.background = "var(--background-modifier-error)";
      errorDiv.style.borderRadius = "4px";
      errorDiv.style.marginTop = "1em";
      errorDiv.textContent = `Failed to import: ${error.message}`;
      setTimeout(() => {
        errorDiv.remove();
      }, 3e3);
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
    this.onImportComplete(null, null);
  }
};

// src/ui/settings-tab.ts
var AIPluginSettingTab = class extends import_obsidian12.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.activeTab = "general";
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "AI Backends Settings" });
    const tabContainer = containerEl.createDiv("tab-container");
    tabContainer.style.display = "flex";
    tabContainer.style.marginBottom = "20px";
    tabContainer.style.borderBottom = "1px solid var(--background-modifier-border)";
    this.createTab(tabContainer, "General", "general", () => this.displayGeneralSettings());
    this.createTab(tabContainer, "Operations", "operations", () => this.displayOperationsSettings());
    this.createTab(tabContainer, "Advanced", "advanced", () => this.displayAdvancedSettings());
    const contentContainer = containerEl.createDiv("tab-content");
    switch (this.activeTab) {
      case "general":
        this.displayGeneralSettings();
        break;
      case "operations":
        this.displayOperationsSettings();
        break;
      case "advanced":
        this.displayAdvancedSettings();
        break;
    }
  }
  createTab(container, label, tabId, onClick) {
    const tab = container.createEl("button", { text: label });
    tab.style.padding = "10px 20px";
    tab.style.border = "none";
    tab.style.background = this.activeTab === tabId ? "var(--background-modifier-error-hover)" : "transparent";
    tab.style.cursor = "pointer";
    tab.style.borderBottom = this.activeTab === tabId ? "2px solid var(--text-accent)" : "none";
    tab.addEventListener("click", () => {
      this.activeTab = tabId;
      this.display();
    });
  }
  displayGeneralSettings() {
    const container = this.containerEl.querySelector(".tab-content");
    if (!container)
      return;
    container.empty();
    container.createEl("h3", { text: "API Configuration" });
    new import_obsidian12.Setting(container).setName("API URL").setDesc("Enter the base URL for the AI API (e.g., http://localhost:3000)").addText((text) => text.setPlaceholder("http://localhost:3000").setValue(this.plugin.settings.apiUrl).onChange(async (value) => {
      this.plugin.settings.apiUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian12.Setting(container).setName("API Key").setDesc("Enter your API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.apiKey || "").onChange(async (value) => {
      this.plugin.settings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    container.createEl("h3", { text: "Global Defaults" });
    new import_obsidian12.Setting(container).setName("Default Provider").setDesc("Default AI provider for all operations").addDropdown((dropdown) => dropdown.addOption("ollama", "Ollama").addOption("openai", "OpenAI").addOption("anthropic", "Anthropic").setValue(this.plugin.settings.defaultProvider || "ollama").onChange(async (value) => {
      this.plugin.settings.defaultProvider = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian12.Setting(container).setName("Default Model").setDesc("Default AI model for all operations").addText((text) => text.setPlaceholder("gemma3:4b").setValue(this.plugin.settings.defaultModel || "").onChange(async (value) => {
      this.plugin.settings.defaultModel = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian12.Setting(container).setName("Default Temperature").setDesc("Default temperature (0.0 = conservative, 1.0 = creative)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(this.plugin.settings.defaultTemperature || 0.3).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.defaultTemperature = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian12.Setting(container).setName("Default Streaming").setDesc("Enable streaming responses by default").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultStream || true).onChange(async (value) => {
      this.plugin.settings.defaultStream = value;
      await this.plugin.saveSettings();
    }));
  }
  displayOperationsSettings() {
    const container = this.containerEl.querySelector(".tab-content");
    if (!container)
      return;
    container.empty();
    this.createOperationAccordion(container, "Summarize", this.plugin.settings.summarize, async (config) => {
      this.plugin.settings.summarize = config;
      await this.plugin.saveSettings();
    });
    this.createOperationAccordion(container, "Keywords", this.plugin.settings.keywords, async (config) => {
      this.plugin.settings.keywords = config;
      await this.plugin.saveSettings();
    });
    this.createOperationAccordion(container, "Translate", this.plugin.settings.translate, async (config) => {
      this.plugin.settings.translate = config;
      await this.plugin.saveSettings();
    }, true);
    this.createOperationAccordion(container, "Rewrite", this.plugin.settings.rewrite, async (config) => {
      this.plugin.settings.rewrite = config;
      await this.plugin.saveSettings();
    });
    this.createOperationAccordion(container, "Compose", this.plugin.settings.compose, async (config) => {
      this.plugin.settings.compose = config;
      await this.plugin.saveSettings();
    });
  }
  createOperationAccordion(container, name, config, onSave, includeLanguage = false) {
    const accordion = container.createDiv("operation-accordion");
    accordion.style.marginBottom = "15px";
    accordion.style.border = "1px solid var(--background-modifier-border)";
    accordion.style.borderRadius = "5px";
    const header = accordion.createDiv("accordion-header");
    header.style.padding = "10px";
    header.style.background = "var(--background-secondary)";
    header.style.cursor = "pointer";
    header.style.display = "flex";
    header.style.justifyContent = "space-between";
    header.style.alignItems = "center";
    const title = header.createEl("h4", { text: name });
    title.style.margin = "0";
    const toggle = header.createEl("span", { text: "\u25BC" });
    toggle.style.transition = "transform 0.2s";
    const content = accordion.createDiv("accordion-content");
    content.style.padding = "10px";
    content.style.display = "none";
    header.addEventListener("click", () => {
      const isVisible = content.style.display !== "none";
      content.style.display = isVisible ? "none" : "block";
      toggle.style.transform = isVisible ? "rotate(0deg)" : "rotate(180deg)";
    });
    new import_obsidian12.Setting(content).setName("Provider").setDesc("AI provider for this operation").addDropdown((dropdown) => dropdown.addOption("ollama", "Ollama").addOption("openai", "OpenAI").addOption("anthropic", "Anthropic").setValue(config.provider).onChange(async (value) => {
      config.provider = value;
      await onSave(config);
    }));
    new import_obsidian12.Setting(content).setName("Model").setDesc("AI model to use").addText((text) => text.setPlaceholder("Model name").setValue(config.model).onChange(async (value) => {
      config.model = value;
      await onSave(config);
    }));
    new import_obsidian12.Setting(content).setName("Temperature").setDesc("Temperature (0.0 = conservative, 1.0 = creative)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(config.temperature).setDynamicTooltip().onChange(async (value) => {
      config.temperature = value;
      await onSave(config);
    }));
    new import_obsidian12.Setting(content).setName("Streaming").setDesc("Enable streaming responses").addToggle((toggle2) => toggle2.setValue(config.stream).onChange(async (value) => {
      config.stream = value;
      await onSave(config);
    }));
    if (name === "Summarize" || name === "Compose") {
      new import_obsidian12.Setting(content).setName("Max Length").setDesc("Maximum length of the output").addText((text) => text.setPlaceholder("100").setValue(config.maxLength.toString()).onChange(async (value) => {
        config.maxLength = parseInt(value) || 100;
        await onSave(config);
      }));
    }
    if (name === "Keywords") {
      new import_obsidian12.Setting(content).setName("Max Keywords").setDesc("Maximum number of keywords to extract").addText((text) => text.setPlaceholder("10").setValue(config.maxKeywords.toString()).onChange(async (value) => {
        config.maxKeywords = parseInt(value) || 10;
        await onSave(config);
      }));
    }
    if (includeLanguage) {
      new import_obsidian12.Setting(content).setName("Default Target Language").setDesc("Default language for translation").addDropdown((dropdown) => {
        SUPPORTED_LANGUAGES.forEach((lang) => {
          dropdown.addOption(lang.code, lang.label);
        });
        dropdown.setValue(config.defaultTargetLanguage);
        dropdown.onChange(async (value) => {
          config.defaultTargetLanguage = value;
          await onSave(config);
        });
      });
    }
  }
  displayAdvancedSettings() {
    const container = this.containerEl.querySelector(".tab-content");
    if (!container)
      return;
    container.empty();
    container.createEl("h3", { text: "Configuration Migration" });
    new import_obsidian12.Setting(container).setName("Import from YAML").setDesc("Import configuration from existing YAML file").addButton((button) => button.setButtonText("Import").setCta().onClick(async () => {
      try {
        const modal = new ImportFileModal(this.app, "yaml");
        modal.onImportComplete = (filePath, fileContent) => {
          if (filePath && fileContent) {
            this.plugin.configService.migrateFromYAMLContent(fileContent).then(async (migratedSettings) => {
              if (migratedSettings) {
                Object.assign(this.plugin.settings, migratedSettings);
                await this.plugin.saveSettings();
                this.display();
                const notice = document.createElement("div");
                notice.textContent = `Configuration imported from ${filePath}`;
                notice.style.padding = "10px";
                notice.style.background = "var(--background-modifier-success)";
                notice.style.color = "var(--text-normal)";
                notice.style.borderRadius = "5px";
                notice.style.marginTop = "10px";
                container.appendChild(notice);
                setTimeout(() => notice.remove(), 3e3);
              }
            }).catch((error) => {
              console.error("Migration failed:", error);
              const notice = document.createElement("div");
              notice.textContent = `Migration failed: ${error.message}`;
              notice.style.padding = "10px";
              notice.style.background = "var(--background-modifier-error)";
              notice.style.color = "var(--text-normal)";
              notice.style.borderRadius = "5px";
              notice.style.marginTop = "10px";
              container.appendChild(notice);
              setTimeout(() => notice.remove(), 3e3);
            });
          }
        };
        modal.open();
      } catch (error) {
        console.error("Import failed:", error);
        const notice = document.createElement("div");
        notice.textContent = `Import failed: ${error.message}`;
        notice.style.padding = "10px";
        notice.style.background = "var(--background-modifier-error)";
        notice.style.color = "var(--text-normal)";
        notice.style.borderRadius = "5px";
        notice.style.marginTop = "10px";
        container.appendChild(notice);
        setTimeout(() => notice.remove(), 3e3);
      }
    }));
    new import_obsidian12.Setting(container).setName("Export to YAML").setDesc("Export current configuration to YAML format").addButton((button) => button.setButtonText("Export").onClick(async () => {
      try {
        const yamlContent = await this.plugin.configService.exportToYAML();
        const modal = new ExportPathModal(this.app, "ai-config-export", "yaml", yamlContent);
        modal.onExportComplete = (savedPath) => {
          if (savedPath) {
            const notice = document.createElement("div");
            notice.textContent = `Configuration exported to ${savedPath}`;
            notice.style.padding = "10px";
            notice.style.background = "var(--background-modifier-success)";
            notice.style.color = "var(--text-normal)";
            notice.style.borderRadius = "5px";
            notice.style.marginTop = "10px";
            container.appendChild(notice);
            setTimeout(() => notice.remove(), 3e3);
          }
        };
        modal.open();
      } catch (error) {
        console.error("Export failed:", error);
        const notice = document.createElement("div");
        notice.textContent = `Export failed: ${error.message}`;
        notice.style.padding = "10px";
        notice.style.background = "var(--background-modifier-error)";
        notice.style.color = "var(--text-normal)";
        notice.style.borderRadius = "5px";
        notice.style.marginTop = "10px";
        container.appendChild(notice);
        setTimeout(() => notice.remove(), 3e3);
      }
    }));
    new import_obsidian12.Setting(container).setName("Reset to Defaults").setDesc("Reset all settings to default values").addButton((button) => button.setButtonText("Reset").setWarning().onClick(async () => {
      const { DEFAULT_SETTINGS: DEFAULT_SETTINGS2 } = await Promise.resolve().then(() => (init_config(), config_exports));
      this.plugin.settings = { ...DEFAULT_SETTINGS2 };
      await this.plugin.saveSettings();
      this.display();
    }));
    container.createEl("h3", { text: "Diagnostics" });
    new import_obsidian12.Setting(container).setName("Test API Connection").setDesc("Test the current API configuration").addButton((button) => button.setButtonText("Test").onClick(async () => {
      try {
        const response = await fetch(`${this.plugin.settings.apiUrl}/health`, {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
            ...this.plugin.settings.apiKey && { "Authorization": `Bearer ${this.plugin.settings.apiKey}` }
          }
        });
        if (response.ok) {
          const notice = document.createElement("div");
          notice.textContent = "API connection successful!";
          notice.style.padding = "10px";
          notice.style.background = "var(--background-modifier-success)";
          notice.style.color = "var(--text-normal)";
          notice.style.borderRadius = "5px";
          notice.style.marginTop = "10px";
          container.appendChild(notice);
          setTimeout(() => notice.remove(), 3e3);
        } else {
          throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
      } catch (error) {
        console.error("API test failed:", error);
        const notice = document.createElement("div");
        notice.textContent = `API test failed: ${error.message}`;
        notice.style.padding = "10px";
        notice.style.background = "var(--background-modifier-error)";
        notice.style.color = "var(--text-normal)";
        notice.style.borderRadius = "5px";
        notice.style.marginTop = "10px";
        container.appendChild(notice);
        setTimeout(() => notice.remove(), 3e3);
      }
    }));
    new import_obsidian12.Setting(container).setName("View Current Configuration").setDesc("Show the current configuration in JSON format").addButton((button) => button.setButtonText("View").onClick(() => {
      const configJson = JSON.stringify(this.plugin.settings, null, 2);
      const modal = document.createElement("div");
      modal.style.position = "fixed";
      modal.style.top = "50%";
      modal.style.left = "50%";
      modal.style.transform = "translate(-50%, -50%)";
      modal.style.background = "var(--background-primary)";
      modal.style.border = "1px solid var(--background-modifier-border)";
      modal.style.borderRadius = "5px";
      modal.style.padding = "20px";
      modal.style.maxWidth = "80%";
      modal.style.maxHeight = "80%";
      modal.style.overflow = "auto";
      modal.style.zIndex = "1000";
      const pre = document.createElement("pre");
      pre.style.background = "var(--background-secondary)";
      pre.style.padding = "10px";
      pre.style.borderRadius = "3px";
      pre.style.overflow = "auto";
      pre.textContent = configJson;
      const closeButton = document.createElement("button");
      closeButton.textContent = "Close";
      closeButton.style.marginTop = "10px";
      closeButton.onclick = () => modal.remove();
      modal.appendChild(pre);
      modal.appendChild(closeButton);
      document.body.appendChild(modal);
    }));
  }
};

// src/ui/compose-modal.ts
var import_obsidian13 = require("obsidian");
var ComposePromptModal = class extends import_obsidian13.Modal {
  constructor(app, editor, selectedText, settings, composeOperation, uiStateService, initialValue = "") {
    super(app);
    this.editor = editor;
    this.settings = settings;
    this.composeOperation = composeOperation;
    this.initialValue = selectedText || initialValue;
    this.uiStateService = uiStateService;
  }
  onOpen() {
    this.uiStateService.setModalState(true);
    const { contentEl, modalEl } = this;
    contentEl.empty();
    const style = document.createElement("style");
    style.textContent = `
            @keyframes fadeInScaleUp {
                from {
                    opacity: 0;
                    transform: scale(0.95);
                }
                to {
                    opacity: 1;
                    transform: scale(1);
                }
            }

            @keyframes fadeOutScaleDown {
                from {
                    opacity: 1;
                    transform: scale(1);
                }
                to {
                    opacity: 0;
                    transform: scale(0.95);
                }
            }

            .modal.compose-modal-opening {
                animation: fadeInScaleUp 0.2s ease-out forwards;
            }

            .modal.compose-modal-closing {
                animation: fadeOutScaleDown 0.2s ease-in forwards;
            }
        `;
    document.head.appendChild(style);
    requestAnimationFrame(() => {
      this.modalEl.addClass("compose-modal-opening");
    });
    const textArea = contentEl.createEl("textarea", {
      placeholder: "Enter your AI prompt here..."
    });
    textArea.value = this.initialValue;
    textArea.style.cssText = `
            width: 100%;
            height: 200px;
            min-height: 200px;
            resize: vertical;
            padding: 12px;
            border: 1px solid var(--background-modifier-border);
            border-radius: 6px;
            background: var(--background-primary);
            color: var(--text-normal);
            font-family: var(--font-text);
            font-size: 14px;
            line-height: 1.5;
            box-sizing: border-box;
            margin-bottom: 15px;
        `;
    this.promptInput = {
      getValue: () => textArea.value,
      inputEl: textArea,
      setDisabled: (disabled) => {
        textArea.disabled = disabled;
      }
    };
    setTimeout(() => {
      textArea.focus();
      if (this.initialValue) {
        textArea.setSelectionRange(0, this.initialValue.length);
      }
    }, 100);
    textArea.addEventListener("keydown", (event) => {
      if (event.key === "Enter" && (event.ctrlKey || event.metaKey)) {
        event.preventDefault();
        this.handleSubmit();
      }
    });
    const buttonContainer = contentEl.createDiv("compose-modal-buttons");
    buttonContainer.style.cssText = `
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        `;
    new import_obsidian13.ButtonComponent(buttonContainer).setButtonText("Cancel").onClick(() => this.close());
    this.submitButton = new import_obsidian13.ButtonComponent(buttonContainer).setButtonText("Generate").setCta().onClick(() => this.handleSubmit());
  }
  async handleSubmit() {
    const prompt = this.promptInput.getValue().trim();
    if (!prompt) {
      new import_obsidian13.Notice("Please enter a prompt");
      this.promptInput.inputEl.focus();
      return;
    }
    this.submitButton.setButtonText("Generating...");
    this.submitButton.setDisabled(true);
    this.promptInput.setDisabled(true);
    try {
      this.close();
      await this.composeOperation.execute(this.editor, prompt, this.settings);
    } catch (error) {
      console.error("Compose operation failed:", error);
      new import_obsidian13.Notice("Failed to generate suggestions. Please try again.");
      this.submitButton.setButtonText("Generate");
      this.submitButton.setDisabled(false);
      this.promptInput.setDisabled(false);
    }
  }
  onClose() {
    this.uiStateService.setModalState(false);
    const { contentEl } = this;
    contentEl.empty();
  }
  close() {
    this.modalEl.removeClass("compose-modal-opening");
    this.modalEl.addClass("compose-modal-closing");
    setTimeout(() => {
      super.close();
    }, 200);
  }
};

// src/ui/ai-context-menu.ts
var import_obsidian14 = require("obsidian");
var AIContextMenu = class extends import_obsidian14.Component {
  constructor(app, summarizeOperation, translateOperation, keywordsOperation, rewriteOperation, composeOperation, settings, uiStateService) {
    super();
    this.tones = TONES;
    this.app = app;
    this.summarizeOperation = summarizeOperation;
    this.translateOperation = translateOperation;
    this.keywordsOperation = keywordsOperation;
    this.rewriteOperation = rewriteOperation;
    this.composeOperation = composeOperation;
    this.settings = settings;
    this.popularLanguages = [...POPULAR_LANGUAGES];
    this.uiStateService = uiStateService;
  }
  updateSettings(settings) {
    this.settings = settings;
  }
  showContextMenu(editor, evt) {
    const selection = editor.getSelection();
    const menu = new import_obsidian14.Menu();
    menu.addItem((item) => {
      item.setTitle("AI Backends").setIcon("brain-circuit").setDisabled(true);
    });
    menu.addSeparator();
    menu.addItem((item) => {
      item.setTitle("Compose with AI").setIcon("edit-3").onClick(() => {
        new ComposePromptModal(
          this.app,
          editor,
          selection,
          this.settings,
          this.composeOperation,
          this.uiStateService
        ).open();
      });
    });
    if (selection.length > 0) {
      menu.addSeparator();
      menu.addItem((item) => {
        item.setTitle("Summarize").setIcon("document-text").onClick(async () => {
          await this.summarizeOperation.execute(editor, selection, this.settings);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Extract Keywords").setIcon("tag").onClick(async () => {
          await this.keywordsOperation.execute(editor, selection, this.settings);
        });
      });
      menu.addSeparator();
      menu.addItem((item) => {
        item.setTitle("Improve description").setIcon("file-text").onClick(async () => {
          await this.rewriteOperation.improveDescription(editor, selection, this.settings);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Improve writing").setIcon("wand").onClick(async () => {
          await this.rewriteOperation.improveWriting(editor, selection, this.settings);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Fix spelling & grammar").setIcon("check").onClick(async () => {
          await this.rewriteOperation.fixSpellingGrammar(editor, selection, this.settings);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Brainstorm").setIcon("lightbulb").onClick(async () => {
          await this.rewriteOperation.brainstorm(editor, selection, this.settings);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Make shorter").setIcon("minus").onClick(async () => {
          await this.rewriteOperation.makeShorter(editor, selection, this.settings);
        });
      });
      menu.addItem((toneItem) => {
        toneItem.setTitle("Change tone to ...").setIcon("mic");
        const toneMenu = toneItem.setSubmenu();
        this.tones.forEach((tone) => {
          toneMenu.addItem((tItem) => {
            tItem.setTitle(tone).onClick(async () => {
              await this.rewriteOperation.changeTone(editor, selection, tone, this.settings);
            });
          });
        });
      });
      menu.addSeparator();
      menu.addItem((translateItem) => {
        translateItem.setTitle("Translate").setIcon("languages");
        const translateSubMenu = translateItem.setSubmenu();
        translateSubMenu.addItem((defaultItem) => {
          defaultItem.setTitle("Default Language").setIcon("globe").onClick(async () => {
            await this.translateOperation.execute(editor, selection, this.settings);
          });
        });
        translateSubMenu.addSeparator();
        this.popularLanguages.forEach((language) => {
          translateSubMenu.addItem((langItem) => {
            langItem.setTitle(language.label).onClick(async () => {
              await this.translateOperation.execute(editor, selection, this.settings, language.code);
            });
          });
        });
      });
    } else {
      menu.addItem((item) => {
        item.setTitle("Select text for more AI options").setIcon("info").setDisabled(true);
      });
    }
    let x = 0;
    let y = 0;
    if (evt) {
      x = evt.clientX;
      y = evt.clientY;
    } else {
      const activeLeaf = this.app.workspace.activeLeaf;
      if (activeLeaf && activeLeaf.view.containerEl) {
        const rect = activeLeaf.view.containerEl.getBoundingClientRect();
        x = rect.left + rect.width / 2;
        y = rect.top + rect.height / 3;
      }
    }
    menu.showAtPosition({ x, y });
  }
};

// src/ui/ribbon-icon.ts
var import_obsidian15 = require("obsidian");
var RibbonIconManager = class {
  constructor(app, aiContextMenu, composeOperation, settings, uiStateService) {
    this.app = app;
    this.aiContextMenu = aiContextMenu;
    this.composeOperation = composeOperation;
    this.settings = settings;
    this.uiStateService = uiStateService;
  }
  updateSettings(settings) {
    this.settings = settings;
  }
  handleRibbonIconClick(evt) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian15.MarkdownView);
    if (activeView) {
      const editor = activeView.editor;
      if (evt.shiftKey) {
        const selection = editor.getSelection();
        new ComposePromptModal(
          this.app,
          editor,
          selection,
          this.settings,
          this.composeOperation,
          this.uiStateService
        ).open();
      } else {
        this.aiContextMenu.showContextMenu(editor);
      }
    } else {
      const notice = new import_obsidian15.Notice("Open a note to use AI Backends");
      setTimeout(() => notice.hide(), 3e3);
    }
  }
};

// src/ui/floating-icon.ts
var import_obsidian16 = require("obsidian");
var FloatingIcon = class extends import_obsidian16.Component {
  constructor(app, aiContextMenu, composeOperation, settings, uiStateService) {
    super();
    this.isVisible = false;
    this.currentEditor = null;
    this.app = app;
    this.aiContextMenu = aiContextMenu;
    this.composeOperation = composeOperation;
    this.settings = settings;
    this.uiStateService = uiStateService;
    this.updatePositionThrottled = this.throttle(() => {
      this.updateIconPosition();
    }, 50);
  }
  updateSettings(settings) {
    this.settings = settings;
  }
  onload() {
    this.iconElement = document.createElement("div");
    this.iconElement.addClass("fab-FloatingActionButton");
    this.iconElement.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 2-3 7h6l-3 7"></path></svg>';
    this.iconElement.style.cssText = `
            position: absolute;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--interactive-accent);
            color: var(--text-on-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            transition: all 0.2s ease;
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        `;
    this.iconElement.addEventListener("mouseenter", () => {
      this.iconElement.style.backgroundColor = "var(--interactive-accent-hover)";
      this.iconElement.style.transform = "scale(1.1)";
    });
    this.iconElement.addEventListener("mouseleave", () => {
      this.iconElement.style.backgroundColor = "var(--interactive-accent)";
      this.iconElement.style.transform = "scale(1)";
    });
    this.iconElement.addEventListener("click", (evt) => {
      this.handleIconClick(evt);
    });
    (0, import_obsidian16.setTooltip)(this.iconElement, "AI Backends", {
      delay: 500,
      placement: "left"
    });
    document.body.appendChild(this.iconElement);
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        this.handleEditorChange();
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-change", (editor) => {
        if (editor === this.currentEditor) {
          this.updatePositionThrottled();
        }
      })
    );
    this.registerDomEvent(document, "mousemove", (evt) => {
      this.handleMouseMove(evt);
    });
    this.handleEditorChange();
    this.uiStateService.on("modal-state-change", (state) => {
      if (state.isModalOpen) {
        this.hideIcon();
      }
    });
  }
  onunload() {
    if (this.iconElement && this.iconElement.parentNode) {
      this.iconElement.parentNode.removeChild(this.iconElement);
    }
  }
  handleEditorChange() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian16.MarkdownView);
    if (activeView && activeView.editor) {
      this.currentEditor = activeView.editor;
      this.showIcon();
    } else {
      this.currentEditor = null;
      this.hideIcon();
    }
  }
  handleMouseMove(evt) {
    if (!this.currentEditor)
      return;
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian16.MarkdownView);
    if (!activeView)
      return;
    const editorEl = activeView.containerEl;
    const rect = editorEl.getBoundingClientRect();
    if (evt.clientX >= rect.left && evt.clientX <= rect.right && evt.clientY >= rect.top && evt.clientY <= rect.bottom) {
      this.showIcon();
      this.updatePositionThrottled();
    } else {
      this.hideIcon();
    }
  }
  updateIconPosition() {
    if (!this.iconElement)
      return;
    this.iconElement.style.position = "fixed";
    this.iconElement.style.bottom = "45px";
    this.iconElement.style.right = "20px";
  }
  showIcon() {
    if (!this.isVisible && this.iconElement && !this.uiStateService.getState().isModalOpen) {
      this.isVisible = true;
      this.iconElement.style.opacity = "1";
      this.iconElement.style.transform = "scale(1)";
      this.iconElement.style.pointerEvents = "auto";
    }
  }
  hideIcon() {
    if (this.isVisible && this.iconElement) {
      this.isVisible = false;
      this.iconElement.style.opacity = "0";
      this.iconElement.style.transform = "scale(0.8)";
      this.iconElement.style.pointerEvents = "none";
    }
  }
  handleIconClick(evt) {
    if (!this.currentEditor)
      return;
    const selection = this.currentEditor.getSelection();
    if (selection.length > 0) {
      this.aiContextMenu.showContextMenu(this.currentEditor, evt);
    } else {
      new ComposePromptModal(
        this.app,
        this.currentEditor,
        selection,
        this.settings,
        this.composeOperation,
        this.uiStateService
      ).open();
    }
  }
  // Utility function to throttle function calls
  throttle(func, limit) {
    let inThrottle;
    return () => {
      if (!inThrottle) {
        func();
        inThrottle = true;
        setTimeout(() => inThrottle = false, limit);
      }
    };
  }
};

// src/main.ts
var AIPlugin = class extends import_obsidian17.Plugin {
  async onload() {
    await this.loadSettings();
    await this.initializeServices();
    await this.registerCommands();
    this.addSettingTab(new AIPluginSettingTab(this.app, this));
    this.addRibbonIcon(
      "brain-circuit",
      "AI Backends",
      (evt) => {
        this.ribbonIconManager.handleRibbonIconClick(evt);
      }
    );
    this.app.workspace.onLayoutReady(() => {
      console.log("AI Backends plugin initialized with UI-based settings");
    });
    this.addChild(this.floatingIcon);
  }
  async initializeServices() {
    this.configService = new ConfigService(this.app, this.settings);
    this.aiService = new AIService(this.settings);
    this.streamingService = new StreamingService();
    this.uiStateService = new UIStateService();
    this.summarizeOperation = new SummarizeOperation(
      this.aiService,
      this.streamingService,
      this.configService
    );
    this.translateOperation = new TranslateOperation(
      this.aiService,
      this.streamingService,
      this.configService
    );
    this.keywordsOperation = new KeywordsOperation(
      this.aiService,
      this.configService
    );
    this.rewriterOperation = new RewriteOperation(
      this.aiService,
      this.streamingService,
      this.configService
    );
    this.composeOperation = new ComposeOperation(
      this.aiService,
      this.streamingService,
      this.configService
    );
    this.commandsManager = new CommandsManager(
      this.summarizeOperation,
      this.translateOperation,
      this.keywordsOperation,
      this.rewriterOperation,
      this.settings
    );
    this.aiContextMenu = new AIContextMenu(
      this.app,
      this.summarizeOperation,
      this.translateOperation,
      this.keywordsOperation,
      this.rewriterOperation,
      this.composeOperation,
      this.settings,
      this.uiStateService
    );
    this.ribbonIconManager = new RibbonIconManager(
      this.app,
      this.aiContextMenu,
      this.composeOperation,
      this.settings,
      this.uiStateService
    );
    this.floatingIcon = new FloatingIcon(
      this.app,
      this.aiContextMenu,
      this.composeOperation,
      this.settings,
      this.uiStateService
    );
  }
  async registerCommands() {
    const commands = this.commandsManager.getCommands();
    commands.forEach((command) => {
      this.addCommand(command);
    });
    this.addCommand({
      id: "compose-with-ai",
      name: "Compose with AI",
      editorCallback: (editor) => {
        const selection = editor.getSelection();
        new ComposePromptModal(
          this.app,
          editor,
          selection,
          this.settings,
          this.composeOperation,
          this.uiStateService
        ).open();
      }
    });
    this.addCommand({
      id: "show-ai-context-menu",
      name: "Show AI Backends Menu",
      hotkeys: [{ modifiers: ["Mod", "Shift"], key: "a" }],
      editorCallback: (editor) => {
        this.aiContextMenu.showContextMenu(editor);
      }
    });
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.configService.updateSettings(this.settings);
    this.aiService.updateSettings(this.settings);
    this.commandsManager.updateSettings(this.settings);
    this.aiContextMenu.updateSettings(this.settings);
    this.ribbonIconManager.updateSettings(this.settings);
    this.floatingIcon.updateSettings(this.settings);
    this.configService.updateSettings(this.settings);
  }
  onunload() {
    this.configService.cleanup();
  }
  // Example config creation removed - now using UI-based settings
};
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3R5cGVzL2NvbmZpZy50cyIsICJtYWluLnRzIiwgInNyYy9tYWluLnRzIiwgInNyYy9zZXJ2aWNlcy9jb25maWctc2VydmljZS50cyIsICJub2RlX21vZHVsZXMvanMteWFtbC9kaXN0L2pzLXlhbWwubWpzIiwgInNyYy9zZXJ2aWNlcy9haS1zZXJ2aWNlLnRzIiwgInNyYy9zZXJ2aWNlcy9zdHJlYW1pbmctc2VydmljZS50cyIsICJzcmMvdXRpbHMvZWRpdG9yLXV0aWxzLnRzIiwgInNyYy9zZXJ2aWNlcy91aS1zdGF0ZS1zZXJ2aWNlLnRzIiwgInNyYy9vcGVyYXRpb25zL3N1bW1hcml6ZS50cyIsICJzcmMvb3BlcmF0aW9ucy90cmFuc2xhdGUudHMiLCAic3JjL29wZXJhdGlvbnMva2V5d29yZHMudHMiLCAic3JjL29wZXJhdGlvbnMvcmV3cml0ZS50cyIsICJzcmMvb3BlcmF0aW9ucy9jb21wb3NlLnRzIiwgInNyYy91aS9jb21tYW5kcy50cyIsICJzcmMvdHlwZXMvbGFuZ3VhZ2VzLnRzIiwgInNyYy90eXBlcy90b25lcy50cyIsICJzcmMvdWkvc2V0dGluZ3MtdGFiLnRzIiwgInNyYy91aS9leHBvcnQtcGF0aC1tb2RhbC50cyIsICJzcmMvdWkvaW1wb3J0LWZpbGUtbW9kYWwudHMiLCAic3JjL3VpL2NvbXBvc2UtbW9kYWwudHMiLCAic3JjL3VpL2FpLWNvbnRleHQtbWVudS50cyIsICJzcmMvdWkvcmliYm9uLWljb24udHMiLCAic3JjL3VpL2Zsb2F0aW5nLWljb24udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCBpbnRlcmZhY2UgQUlQbHVnaW5TZXR0aW5ncyB7XG5cdC8vIEV4aXN0aW5nIHNldHRpbmdzXG5cdGFwaVVybDogc3RyaW5nO1xuXHRhcGlLZXk/OiBzdHJpbmc7XG5cdGNvbmZpZ0ZpbGVQYXRoOiBzdHJpbmc7IC8vIFdpbGwgYmUgcmVtb3ZlZCBhZnRlciBtaWdyYXRpb25cblx0XG5cdC8vIEdsb2JhbCBkZWZhdWx0c1xuXHRkZWZhdWx0UHJvdmlkZXI/OiBzdHJpbmc7XG5cdGRlZmF1bHRNb2RlbD86IHN0cmluZztcblx0ZGVmYXVsdFRlbXBlcmF0dXJlPzogbnVtYmVyO1xuXHRkZWZhdWx0U3RyZWFtPzogYm9vbGVhbjtcblx0XG5cdC8vIE9wZXJhdGlvbi1zcGVjaWZpYyBzZXR0aW5nc1xuXHRzdW1tYXJpemU/OiB7XG5cdFx0cHJvdmlkZXI6IHN0cmluZztcblx0XHRtb2RlbDogc3RyaW5nO1xuXHRcdHRlbXBlcmF0dXJlOiBudW1iZXI7XG5cdFx0c3RyZWFtOiBib29sZWFuO1xuXHRcdG1heExlbmd0aDogbnVtYmVyO1xuXHR9O1xuXHRcblx0a2V5d29yZHM/OiB7XG5cdFx0cHJvdmlkZXI6IHN0cmluZztcblx0XHRtb2RlbDogc3RyaW5nO1xuXHRcdHRlbXBlcmF0dXJlOiBudW1iZXI7XG5cdFx0c3RyZWFtOiBib29sZWFuO1xuXHRcdG1heEtleXdvcmRzOiBudW1iZXI7XG5cdH07XG5cdFxuXHR0cmFuc2xhdGU/OiB7XG5cdFx0cHJvdmlkZXI6IHN0cmluZztcblx0XHRtb2RlbDogc3RyaW5nO1xuXHRcdHRlbXBlcmF0dXJlOiBudW1iZXI7XG5cdFx0c3RyZWFtOiBib29sZWFuO1xuXHRcdGRlZmF1bHRUYXJnZXRMYW5ndWFnZTogc3RyaW5nO1xuXHR9O1xuXHRcblx0cmV3cml0ZT86IHtcblx0XHRwcm92aWRlcjogc3RyaW5nO1xuXHRcdG1vZGVsOiBzdHJpbmc7XG5cdFx0dGVtcGVyYXR1cmU6IG51bWJlcjtcblx0XHRzdHJlYW06IGJvb2xlYW47XG5cdH07XG5cdFxuXHRjb21wb3NlPzoge1xuXHRcdHByb3ZpZGVyOiBzdHJpbmc7XG5cdFx0bW9kZWw6IHN0cmluZztcblx0XHR0ZW1wZXJhdHVyZTogbnVtYmVyO1xuXHRcdHN0cmVhbTogYm9vbGVhbjtcblx0XHRtYXhMZW5ndGg6IG51bWJlcjtcblx0fTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEFJUGx1Z2luU2V0dGluZ3MgPSB7XG5cdGFwaVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsXG5cdGFwaUtleTogJycsXG5cdGNvbmZpZ0ZpbGVQYXRoOiAnYWktY29uZmlnL2NvbmZpZy55YW1sJywgLy8gV2lsbCBiZSByZW1vdmVkIGFmdGVyIG1pZ3JhdGlvblxuXHRcblx0Ly8gR2xvYmFsIGRlZmF1bHRzXG5cdGRlZmF1bHRQcm92aWRlcjogJ29sbGFtYScsXG5cdGRlZmF1bHRNb2RlbDogJ2dlbW1hMzo0YicsXG5cdGRlZmF1bHRUZW1wZXJhdHVyZTogMC4zLFxuXHRkZWZhdWx0U3RyZWFtOiB0cnVlLFxuXHRcblx0Ly8gT3BlcmF0aW9uLXNwZWNpZmljIGRlZmF1bHRzXG5cdHN1bW1hcml6ZToge1xuXHRcdHByb3ZpZGVyOiAnb2xsYW1hJyxcblx0XHRtb2RlbDogJ2dlbW1hMzo0YicsXG5cdFx0dGVtcGVyYXR1cmU6IDAuMyxcblx0XHRzdHJlYW06IHRydWUsXG5cdFx0bWF4TGVuZ3RoOiAxMDBcblx0fSxcblx0XG5cdGtleXdvcmRzOiB7XG5cdFx0cHJvdmlkZXI6ICdvbGxhbWEnLFxuXHRcdG1vZGVsOiAnbWlzdHJhbGxpdGU6bGF0ZXN0Jyxcblx0XHR0ZW1wZXJhdHVyZTogMC4zLFxuXHRcdHN0cmVhbTogZmFsc2UsXG5cdFx0bWF4S2V5d29yZHM6IDUwMFxuXHR9LFxuXHRcblx0dHJhbnNsYXRlOiB7XG5cdFx0cHJvdmlkZXI6ICdvbGxhbWEnLFxuXHRcdG1vZGVsOiAnZ2VtbWEzOjRiJyxcblx0XHR0ZW1wZXJhdHVyZTogMC4xLFxuXHRcdHN0cmVhbTogdHJ1ZSxcblx0XHRkZWZhdWx0VGFyZ2V0TGFuZ3VhZ2U6ICdlbidcblx0fSxcblx0XG5cdHJld3JpdGU6IHtcblx0XHRwcm92aWRlcjogJ29sbGFtYScsXG5cdFx0bW9kZWw6ICdnZW1tYTM6NGInLFxuXHRcdHRlbXBlcmF0dXJlOiAwLjMsXG5cdFx0c3RyZWFtOiB0cnVlXG5cdH0sXG5cdFxuXHRjb21wb3NlOiB7XG5cdFx0cHJvdmlkZXI6ICdvbGxhbWEnLFxuXHRcdG1vZGVsOiAnZ2VtbWEzOjRiJyxcblx0XHR0ZW1wZXJhdHVyZTogMC4zLFxuXHRcdHN0cmVhbTogdHJ1ZSxcblx0XHRtYXhMZW5ndGg6IDUwXG5cdH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBBSU9wZXJhdGlvbkNvbmZpZyB7XG5cdHByb3ZpZGVyOiBzdHJpbmc7XG5cdG1vZGVsOiBzdHJpbmc7XG5cdHRlbXBlcmF0dXJlOiBudW1iZXI7XG5cdHN0cmVhbTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBSUNvbmZpZyB7XG5cdHN1bW1hcml6ZTogQUlPcGVyYXRpb25Db25maWcgJiB7XG5cdFx0bWF4TGVuZ3RoOiBudW1iZXI7XG5cdH07XG5cdGtleXdvcmRzOiBBSU9wZXJhdGlvbkNvbmZpZyAmIHtcblx0XHRtYXhLZXl3b3JkczogbnVtYmVyO1xuXHRcdHRlbXBlcmF0dXJlOiBudW1iZXI7IC8vIE92ZXJyaWRlIGZvciBrZXl3b3JkcyBwYXlsb2FkXG5cdH07XG5cdHRyYW5zbGF0ZTogQUlPcGVyYXRpb25Db25maWcgJiB7XG5cdFx0ZGVmYXVsdFRhcmdldExhbmd1YWdlOiBzdHJpbmc7XG5cdH07XG5cdHJld3JpdGU/OiBBSU9wZXJhdGlvbkNvbmZpZztcbiAgICBjb21wb3NlPzogQUlPcGVyYXRpb25Db25maWcgJiB7XG4gICAgICAgIG1heExlbmd0aDogbnVtYmVyO1xuICAgIH07XG59XG4iLCAiXG4vLyBSZS1leHBvcnQgdGhlIG5ldyBtb2R1bGFyIHBsdWdpbiBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuZXhwb3J0IHsgQUlQbHVnaW4gYXMgZGVmYXVsdCB9IGZyb20gJy4vc3JjL21haW4nOyIsICJpbXBvcnQgeyBFZGl0b3IsIE1hcmtkb3duVmlldywgTWVudSwgUGx1Z2luIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQUlQbHVnaW5TZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vdHlwZXMvY29uZmlnJztcbmltcG9ydCB7IENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL2NvbmZpZy1zZXJ2aWNlJztcbmltcG9ydCB7IEFJU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvYWktc2VydmljZSc7XG5pbXBvcnQgeyBTdHJlYW1pbmdTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9zdHJlYW1pbmctc2VydmljZSc7XG5pbXBvcnQgeyBVSVN0YXRlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvdWktc3RhdGUtc2VydmljZSc7XG5pbXBvcnQgeyBTdW1tYXJpemVPcGVyYXRpb24gfSBmcm9tICcuL29wZXJhdGlvbnMvc3VtbWFyaXplJztcbmltcG9ydCB7IFRyYW5zbGF0ZU9wZXJhdGlvbiB9IGZyb20gJy4vb3BlcmF0aW9ucy90cmFuc2xhdGUnO1xuaW1wb3J0IHsgS2V5d29yZHNPcGVyYXRpb24gfSBmcm9tICcuL29wZXJhdGlvbnMva2V5d29yZHMnO1xuaW1wb3J0IHsgUmV3cml0ZU9wZXJhdGlvbiB9IGZyb20gJy4vb3BlcmF0aW9ucy9yZXdyaXRlJztcbmltcG9ydCB7IENvbXBvc2VPcGVyYXRpb24gfSBmcm9tICcuL29wZXJhdGlvbnMvY29tcG9zZSc7XG5pbXBvcnQgeyBDb21tYW5kc01hbmFnZXIgfSBmcm9tICcuL3VpL2NvbW1hbmRzJztcbmltcG9ydCB7IEFJUGx1Z2luU2V0dGluZ1RhYiB9IGZyb20gJy4vdWkvc2V0dGluZ3MtdGFiJztcbmltcG9ydCB7IENvbXBvc2VQcm9tcHRNb2RhbCB9IGZyb20gJy4vdWkvY29tcG9zZS1tb2RhbCc7XG5pbXBvcnQgeyBBSUNvbnRleHRNZW51IH0gZnJvbSAnLi91aS9haS1jb250ZXh0LW1lbnUnO1xuaW1wb3J0IHsgUmliYm9uSWNvbk1hbmFnZXIgfSBmcm9tICcuL3VpL3JpYmJvbi1pY29uJztcbmltcG9ydCB7IEZsb2F0aW5nSWNvbiB9IGZyb20gJy4vdWkvZmxvYXRpbmctaWNvbic7XG5cbmV4cG9ydCBjbGFzcyBBSVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzO1xuXHRjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlO1xuXHRwcml2YXRlIGFpU2VydmljZTogQUlTZXJ2aWNlO1xuXHRwcml2YXRlIHN0cmVhbWluZ1NlcnZpY2U6IFN0cmVhbWluZ1NlcnZpY2U7XG5cdHByaXZhdGUgdWlTdGF0ZVNlcnZpY2U6IFVJU3RhdGVTZXJ2aWNlO1xuXHRwcml2YXRlIHN1bW1hcml6ZU9wZXJhdGlvbjogU3VtbWFyaXplT3BlcmF0aW9uO1xuXHRwcml2YXRlIHRyYW5zbGF0ZU9wZXJhdGlvbjogVHJhbnNsYXRlT3BlcmF0aW9uO1xuXHRwcml2YXRlIGtleXdvcmRzT3BlcmF0aW9uOiBLZXl3b3Jkc09wZXJhdGlvbjtcblx0cHJpdmF0ZSByZXdyaXRlck9wZXJhdGlvbjogUmV3cml0ZU9wZXJhdGlvbjtcblx0cHJpdmF0ZSBjb21wb3NlT3BlcmF0aW9uOiBDb21wb3NlT3BlcmF0aW9uO1xuXHRwcml2YXRlIGNvbW1hbmRzTWFuYWdlcjogQ29tbWFuZHNNYW5hZ2VyO1xuXHRwcml2YXRlIGFpQ29udGV4dE1lbnU6IEFJQ29udGV4dE1lbnU7XG5cdHByaXZhdGUgcmliYm9uSWNvbk1hbmFnZXI6IFJpYmJvbkljb25NYW5hZ2VyO1xuXHRwcml2YXRlIGZsb2F0aW5nSWNvbjogRmxvYXRpbmdJY29uO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXHRcdGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VzKCk7XG5cdFx0YXdhaXQgdGhpcy5yZWdpc3RlckNvbW1hbmRzKCk7XG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBBSVBsdWdpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIEFkZCByaWJib24gaWNvblxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcblx0XHRcdCdicmFpbi1jaXJjdWl0Jyxcblx0XHRcdCdBSSBCYWNrZW5kcycsXG5cdFx0XHQoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRcdHRoaXMucmliYm9uSWNvbk1hbmFnZXIuaGFuZGxlUmliYm9uSWNvbkNsaWNrKGV2dCk7XG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdC8vIEluaXRpYWxpemUgY29uZmlnIGZyb20gc2V0dGluZ3MgKG5vIG1vcmUgWUFNTCBsb2FkaW5nKVxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdC8vIENvbmZpZyBpcyBub3cgYXV0b21hdGljYWxseSBpbml0aWFsaXplZCBmcm9tIHBsdWdpbiBzZXR0aW5nc1xuXHRcdFx0Y29uc29sZS5sb2coJ0FJIEJhY2tlbmRzIHBsdWdpbiBpbml0aWFsaXplZCB3aXRoIFVJLWJhc2VkIHNldHRpbmdzJyk7XG5cdFx0fSk7XG5cblx0XHQvLyBJbml0aWFsaXplIGZsb2F0aW5nIGljb25cblx0XHR0aGlzLmFkZENoaWxkKHRoaXMuZmxvYXRpbmdJY29uKTtcblxuXHRcdC8vIEV4YW1wbGUgY29uZmlnIGNyZWF0aW9uIHJlbW92ZWQgLSBub3cgdXNpbmcgVUktYmFzZWQgc2V0dGluZ3Ncblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgaW5pdGlhbGl6ZVNlcnZpY2VzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEluaXRpYWxpemUgc2VydmljZXNcblx0XHR0aGlzLmNvbmZpZ1NlcnZpY2UgPSBuZXcgQ29uZmlnU2VydmljZSh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5haVNlcnZpY2UgPSBuZXcgQUlTZXJ2aWNlKHRoaXMuc2V0dGluZ3MpO1xuXHRcdHRoaXMuc3RyZWFtaW5nU2VydmljZSA9IG5ldyBTdHJlYW1pbmdTZXJ2aWNlKCk7XG5cdFx0dGhpcy51aVN0YXRlU2VydmljZSA9IG5ldyBVSVN0YXRlU2VydmljZSgpO1xuXG5cdFx0Ly8gSW5pdGlhbGl6ZSBvcGVyYXRpb25zXG5cdFx0dGhpcy5zdW1tYXJpemVPcGVyYXRpb24gPSBuZXcgU3VtbWFyaXplT3BlcmF0aW9uKFxuXHRcdFx0dGhpcy5haVNlcnZpY2UsIFxuXHRcdFx0dGhpcy5zdHJlYW1pbmdTZXJ2aWNlLCBcblx0XHRcdHRoaXMuY29uZmlnU2VydmljZVxuXHRcdCk7XG5cdFx0dGhpcy50cmFuc2xhdGVPcGVyYXRpb24gPSBuZXcgVHJhbnNsYXRlT3BlcmF0aW9uKFxuXHRcdFx0dGhpcy5haVNlcnZpY2UsIFxuXHRcdFx0dGhpcy5zdHJlYW1pbmdTZXJ2aWNlLCBcblx0XHRcdHRoaXMuY29uZmlnU2VydmljZVxuXHRcdCk7XG5cdFx0dGhpcy5rZXl3b3Jkc09wZXJhdGlvbiA9IG5ldyBLZXl3b3Jkc09wZXJhdGlvbihcblx0XHRcdHRoaXMuYWlTZXJ2aWNlLCBcblx0XHRcdHRoaXMuY29uZmlnU2VydmljZVxuXHRcdCk7XG5cdFx0dGhpcy5yZXdyaXRlck9wZXJhdGlvbiA9IG5ldyBSZXdyaXRlT3BlcmF0aW9uKFxuXHRcdFx0dGhpcy5haVNlcnZpY2UsXG5cdFx0XHR0aGlzLnN0cmVhbWluZ1NlcnZpY2UsXG5cdFx0XHR0aGlzLmNvbmZpZ1NlcnZpY2Vcblx0XHQpO1xuXHRcdHRoaXMuY29tcG9zZU9wZXJhdGlvbiA9IG5ldyBDb21wb3NlT3BlcmF0aW9uKFxuXHRcdFx0dGhpcy5haVNlcnZpY2UsXG5cdFx0XHR0aGlzLnN0cmVhbWluZ1NlcnZpY2UsXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1NlcnZpY2Vcblx0XHQpO1xuXG5cdFx0dGhpcy5jb21tYW5kc01hbmFnZXIgPSBuZXcgQ29tbWFuZHNNYW5hZ2VyKFxuXHRcdFx0dGhpcy5zdW1tYXJpemVPcGVyYXRpb24sXG5cdFx0XHR0aGlzLnRyYW5zbGF0ZU9wZXJhdGlvbixcblx0XHRcdHRoaXMua2V5d29yZHNPcGVyYXRpb24sXG5cdFx0XHR0aGlzLnJld3JpdGVyT3BlcmF0aW9uLFxuXHRcdFx0dGhpcy5zZXR0aW5nc1xuXHRcdCk7XG5cdFx0dGhpcy5haUNvbnRleHRNZW51ID0gbmV3IEFJQ29udGV4dE1lbnUoXG5cdFx0XHR0aGlzLmFwcCxcblx0XHRcdHRoaXMuc3VtbWFyaXplT3BlcmF0aW9uLFxuXHRcdFx0dGhpcy50cmFuc2xhdGVPcGVyYXRpb24sXG5cdFx0XHR0aGlzLmtleXdvcmRzT3BlcmF0aW9uLFxuXHRcdFx0dGhpcy5yZXdyaXRlck9wZXJhdGlvbixcblx0XHRcdHRoaXMuY29tcG9zZU9wZXJhdGlvbixcblx0XHRcdHRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICB0aGlzLnVpU3RhdGVTZXJ2aWNlLFxuXHRcdCk7XG5cdFx0dGhpcy5yaWJib25JY29uTWFuYWdlciA9IG5ldyBSaWJib25JY29uTWFuYWdlcihcblx0XHRcdHRoaXMuYXBwLFxuXHRcdFx0dGhpcy5haUNvbnRleHRNZW51LFxuXHRcdFx0dGhpcy5jb21wb3NlT3BlcmF0aW9uLFxuXHRcdFx0dGhpcy5zZXR0aW5ncyxcbiAgICAgICAgICAgIHRoaXMudWlTdGF0ZVNlcnZpY2UsXG5cdFx0KTtcblx0XHR0aGlzLmZsb2F0aW5nSWNvbiA9IG5ldyBGbG9hdGluZ0ljb24oXG5cdFx0XHR0aGlzLmFwcCxcblx0XHRcdHRoaXMuYWlDb250ZXh0TWVudSxcblx0XHRcdHRoaXMuY29tcG9zZU9wZXJhdGlvbixcblx0XHRcdHRoaXMuc2V0dGluZ3MsXG5cdFx0XHR0aGlzLnVpU3RhdGVTZXJ2aWNlXG5cdFx0KTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgIHJlZ2lzdGVyQ29tbWFuZHMoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgY29tbWFuZHMgPSB0aGlzLmNvbW1hbmRzTWFuYWdlci5nZXRDb21tYW5kcygpO1xuXHRcdGNvbW1hbmRzLmZvckVhY2goY29tbWFuZCA9PiB7XG5cdFx0XHR0aGlzLmFkZENvbW1hbmQoY29tbWFuZCk7XG5cdFx0fSk7XG5cblx0XHQvLyBBZGQgY29tcG9zZSBjb21tYW5kIHdpdGgga2V5Ym9hcmQgc2hvcnRjdXRcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdjb21wb3NlLXdpdGgtYWknLFxuXHRcdFx0bmFtZTogJ0NvbXBvc2Ugd2l0aCBBSScsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0bmV3IENvbXBvc2VQcm9tcHRNb2RhbChcblx0XHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0XHRlZGl0b3IsXG5cdFx0XHRcdFx0c2VsZWN0aW9uLFxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MsXG5cdFx0XHRcdFx0dGhpcy5jb21wb3NlT3BlcmF0aW9uLFxuXHRcdFx0XHRcdHRoaXMudWlTdGF0ZVNlcnZpY2Vcblx0XHRcdFx0KS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBBZGQgQUkgQmFja2VuZHMgY29udGV4dCBtZW51IGNvbW1hbmQgd2l0aCBrZXlib2FyZCBzaG9ydGN1dFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3Nob3ctYWktY29udGV4dC1tZW51Jyxcblx0XHRcdG5hbWU6ICdTaG93IEFJIEJhY2tlbmRzIE1lbnUnLFxuXHRcdFx0aG90a2V5czogW3sgbW9kaWZpZXJzOiBbJ01vZCcsICdTaGlmdCddLCBrZXk6ICdhJyB9XSxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcblx0XHRcdFx0dGhpcy5haUNvbnRleHRNZW51LnNob3dDb250ZXh0TWVudShlZGl0b3IpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cblx0XHQvLyBVcGRhdGUgc2VydmljZXMgd2l0aCBuZXcgc2V0dGluZ3Ncblx0XHR0aGlzLmNvbmZpZ1NlcnZpY2UudXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5haVNlcnZpY2UudXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5jb21tYW5kc01hbmFnZXIudXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5haUNvbnRleHRNZW51LnVwZGF0ZVNldHRpbmdzKHRoaXMuc2V0dGluZ3MpO1xuXHRcdHRoaXMucmliYm9uSWNvbk1hbmFnZXIudXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5mbG9hdGluZ0ljb24udXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG5cblx0XHQvLyBVcGRhdGUgY29uZmlnIHdoZW4gc2V0dGluZ3MgY2hhbmdlIChubyBtb3JlIFlBTUwgcmVsb2FkaW5nKVxuXHRcdHRoaXMuY29uZmlnU2VydmljZS51cGRhdGVTZXR0aW5ncyh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdG9udW5sb2FkKCk6IHZvaWQge1xuXHRcdHRoaXMuY29uZmlnU2VydmljZS5jbGVhbnVwKCk7XG5cdH1cblxuXHQvLyBFeGFtcGxlIGNvbmZpZyBjcmVhdGlvbiByZW1vdmVkIC0gbm93IHVzaW5nIFVJLWJhc2VkIHNldHRpbmdzXG59XG5cbmV4cG9ydCBkZWZhdWx0IEFJUGx1Z2luO1xuIiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCAqIGFzIHlhbWwgZnJvbSAnanMteWFtbCc7XG5pbXBvcnQgeyBBSUNvbmZpZywgQUlQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzL2NvbmZpZyc7XG5cbmV4cG9ydCBjbGFzcyBDb25maWdTZXJ2aWNlIHtcblx0cHJpdmF0ZSBhcHA6IEFwcDtcblx0cHJpdmF0ZSBzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncztcblx0cHJpdmF0ZSBjb25maWc6IEFJQ29uZmlnIHwgbnVsbCA9IG51bGw7XG5cdHByaXZhdGUgY29uZmlnV2F0Y2hlcjogYW55ID0gbnVsbDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MpIHtcblx0XHR0aGlzLmFwcCA9IGFwcDtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdFx0Ly8gSW5pdGlhbGl6ZSBjb25maWcgZnJvbSBzZXR0aW5nc1xuXHRcdHRoaXMuaW5pdGlhbGl6ZUNvbmZpZ0Zyb21TZXR0aW5ncygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemUgY29uZmlnIGZyb20gcGx1Z2luIHNldHRpbmdzIGluc3RlYWQgb2YgWUFNTCBmaWxlXG5cdCAqL1xuXHRwcml2YXRlIGluaXRpYWxpemVDb25maWdGcm9tU2V0dGluZ3MoKTogdm9pZCB7XG5cdFx0Ly8gRW5zdXJlIGFsbCByZXF1aXJlZCBzZXR0aW5ncyBhcmUgcHJlc2VudFxuXHRcdGlmICghdGhpcy5zZXR0aW5ncy5zdW1tYXJpemUgfHwgIXRoaXMuc2V0dGluZ3Mua2V5d29yZHMgfHwgIXRoaXMuc2V0dGluZ3MudHJhbnNsYXRlIHx8XG5cdFx0XHQhdGhpcy5zZXR0aW5ncy5yZXdyaXRlIHx8ICF0aGlzLnNldHRpbmdzLmNvbXBvc2UpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgcmVxdWlyZWQgb3BlcmF0aW9uIHNldHRpbmdzJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5jb25maWcgPSB7XG5cdFx0XHRzdW1tYXJpemU6IHRoaXMuc2V0dGluZ3Muc3VtbWFyaXplLFxuXHRcdFx0a2V5d29yZHM6IHRoaXMuc2V0dGluZ3Mua2V5d29yZHMsXG5cdFx0XHR0cmFuc2xhdGU6IHRoaXMuc2V0dGluZ3MudHJhbnNsYXRlLFxuXHRcdFx0cmV3cml0ZTogdGhpcy5zZXR0aW5ncy5yZXdyaXRlLFxuXHRcdFx0Y29tcG9zZTogdGhpcy5zZXR0aW5ncy5jb21wb3NlXG5cdFx0fTtcblx0XHRjb25zb2xlLmxvZygnQ29uZmlnIGluaXRpYWxpemVkIGZyb20gcGx1Z2luIHNldHRpbmdzOicsIHRoaXMuY29uZmlnKTtcblx0fVxuXG5cdGdldENvbmZpZygpOiBBSUNvbmZpZyB8IG51bGwge1xuXHRcdHJldHVybiB0aGlzLmNvbmZpZztcblx0fVxuXG5cdHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzKTogdm9pZCB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHRcdC8vIFVwZGF0ZSBjb25maWcgd2hlbiBzZXR0aW5ncyBjaGFuZ2Vcblx0XHR0aGlzLmluaXRpYWxpemVDb25maWdGcm9tU2V0dGluZ3MoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBNaWdyYXRpb24gbWV0aG9kIHRvIGxvYWQgY29uZmlnIGZyb20gWUFNTCBmaWxlIGFuZCBjb252ZXJ0IHRvIHNldHRpbmdzXG5cdCAqL1xuXHRhc3luYyBtaWdyYXRlRnJvbVlBTUwoKTogUHJvbWlzZTxBSVBsdWdpblNldHRpbmdzIHwgbnVsbD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoIXRoaXMuc2V0dGluZ3MuY29uZmlnRmlsZVBhdGgpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ05vIGNvbmZpZyBmaWxlIHBhdGggc2V0IGZvciBtaWdyYXRpb24nKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGNvbmZpZ1BhdGggPSB0aGlzLnNldHRpbmdzLmNvbmZpZ0ZpbGVQYXRoO1xuXHRcdFx0Y29uc29sZS5sb2coJ0F0dGVtcHRpbmcgbWlncmF0aW9uIGZyb206JywgY29uZmlnUGF0aCk7XG5cblx0XHRcdGNvbnN0IGNvbmZpZ0ZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoY29uZmlnUGF0aCk7XG5cdFx0XHRpZiAoIWNvbmZpZ0ZpbGUpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJ05vIGV4aXN0aW5nIGNvbmZpZyBmaWxlIGZvdW5kIGZvciBtaWdyYXRpb24nKTtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGNvbmZpZ0NvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGNvbmZpZ0ZpbGUgYXMgYW55KTtcblx0XHRcdGNvbnN0IHlhbWxDb25maWcgPSB5YW1sLmxvYWQoY29uZmlnQ29udGVudCkgYXMgQUlDb25maWc7XG5cdFx0XHRcblx0XHRcdC8vIENvbnZlcnQgWUFNTCBjb25maWcgdG8gc2V0dGluZ3MgZm9ybWF0XG5cdFx0XHRjb25zdCBtaWdyYXRlZFNldHRpbmdzOiBQYXJ0aWFsPEFJUGx1Z2luU2V0dGluZ3M+ID0ge1xuXHRcdFx0XHRzdW1tYXJpemU6IHlhbWxDb25maWcuc3VtbWFyaXplLFxuXHRcdFx0XHRrZXl3b3JkczogeWFtbENvbmZpZy5rZXl3b3Jkcyxcblx0XHRcdFx0dHJhbnNsYXRlOiB5YW1sQ29uZmlnLnRyYW5zbGF0ZSxcblx0XHRcdFx0cmV3cml0ZTogeWFtbENvbmZpZy5yZXdyaXRlLFxuXHRcdFx0XHRjb21wb3NlOiB5YW1sQ29uZmlnLmNvbXBvc2Vcblx0XHRcdH07XG5cblx0XHRcdGNvbnNvbGUubG9nKCdNaWdyYXRpb24gc3VjY2Vzc2Z1bDonLCBtaWdyYXRlZFNldHRpbmdzKTtcblx0XHRcdG5ldyBOb3RpY2UoJ0NvbmZpZ3VyYXRpb24gbWlncmF0ZWQgZnJvbSBZQU1MIGZpbGUgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHRyZXR1cm4gbWlncmF0ZWRTZXR0aW5ncyBhcyBBSVBsdWdpblNldHRpbmdzO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBkdXJpbmcgbWlncmF0aW9uOicsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoJ0Vycm9yIG1pZ3JhdGluZyBjb25maWd1cmF0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogTWlncmF0aW9uIG1ldGhvZCB0byBsb2FkIGNvbmZpZyBmcm9tIFlBTUwgY29udGVudCBzdHJpbmcgYW5kIGNvbnZlcnQgdG8gc2V0dGluZ3Ncblx0ICovXG5cdGFzeW5jIG1pZ3JhdGVGcm9tWUFNTENvbnRlbnQoeWFtbENvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8QUlQbHVnaW5TZXR0aW5ncyB8IG51bGw+IHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc29sZS5sb2coJ0F0dGVtcHRpbmcgbWlncmF0aW9uIGZyb20gWUFNTCBjb250ZW50Jyk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IHlhbWxDb25maWcgPSB5YW1sLmxvYWQoeWFtbENvbnRlbnQpIGFzIEFJQ29uZmlnO1xuXHRcdFx0XG5cdFx0XHQvLyBDb252ZXJ0IFlBTUwgY29uZmlnIHRvIHNldHRpbmdzIGZvcm1hdFxuXHRcdFx0Y29uc3QgbWlncmF0ZWRTZXR0aW5nczogUGFydGlhbDxBSVBsdWdpblNldHRpbmdzPiA9IHtcblx0XHRcdFx0c3VtbWFyaXplOiB5YW1sQ29uZmlnLnN1bW1hcml6ZSxcblx0XHRcdFx0a2V5d29yZHM6IHlhbWxDb25maWcua2V5d29yZHMsXG5cdFx0XHRcdHRyYW5zbGF0ZTogeWFtbENvbmZpZy50cmFuc2xhdGUsXG5cdFx0XHRcdHJld3JpdGU6IHlhbWxDb25maWcucmV3cml0ZSxcblx0XHRcdFx0Y29tcG9zZTogeWFtbENvbmZpZy5jb21wb3NlXG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zb2xlLmxvZygnTWlncmF0aW9uIGZyb20gY29udGVudCBzdWNjZXNzZnVsOicsIG1pZ3JhdGVkU2V0dGluZ3MpO1xuXHRcdFx0cmV0dXJuIG1pZ3JhdGVkU2V0dGluZ3MgYXMgQUlQbHVnaW5TZXR0aW5ncztcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIG1pZ3JhdGlvbiBmcm9tIGNvbnRlbnQ6JywgZXJyb3IpO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFcnJvciBtaWdyYXRpbmcgY29uZmlndXJhdGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBFeHBvcnQgY3VycmVudCBzZXR0aW5ncyB0byBZQU1MIGZvcm1hdFxuXHQgKi9cblx0YXN5bmMgZXhwb3J0VG9ZQU1MKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGNvbmZpZyA9IHRoaXMuZ2V0Q29uZmlnKCk7XG5cdFx0XHRpZiAoIWNvbmZpZykge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIGNvbmZpZ3VyYXRpb24gYXZhaWxhYmxlJyk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IHlhbWxDb250ZW50ID0geWFtbC5kdW1wKGNvbmZpZywge1xuXHRcdFx0XHRpbmRlbnQ6IDIsXG5cdFx0XHRcdGxpbmVXaWR0aDogMTIwXG5cdFx0XHR9KTtcblxuXHRcdFx0Y29uc29sZS5sb2coJ1NldHRpbmdzIGV4cG9ydGVkIHRvIFlBTUwnKTtcblx0XHRcdHJldHVybiB5YW1sQ29udGVudDtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgZXhwb3J0aW5nIHRvIFlBTUw6JywgZXJyb3IpO1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IGNvbmZpZ3VyYXRpb246ICcgKyBlcnJvci5tZXNzYWdlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU2V0dXAgY29uZmlnIHdhdGNoZXIgKGRlcHJlY2F0ZWQsIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG5cdCAqL1xuXHRzZXR1cENvbmZpZ1dhdGNoZXIoKTogdm9pZCB7XG5cdFx0Ly8gQ2xlYW4gdXAgZXhpc3Rpbmcgd2F0Y2hlclxuXHRcdGlmICh0aGlzLmNvbmZpZ1dhdGNoZXIpIHtcblx0XHRcdHRoaXMuYXBwLnZhdWx0Lm9mZnJlZih0aGlzLmNvbmZpZ1dhdGNoZXIpO1xuXHRcdH1cblxuXHRcdC8vIE5vdGU6IEZpbGUgd2F0Y2hpbmcgaXMgZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBVSSBzZXR0aW5nc1xuXHRcdC8vIFRoaXMgbWV0aG9kIGlzIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgZHVyaW5nIG1pZ3JhdGlvblxuXHRcdGNvbnNvbGUubG9nKCdDb25maWcgd2F0Y2hlciBzZXR1cCBza2lwcGVkICh1c2luZyBVSSBzZXR0aW5ncyknKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBMb2FkIGNvbmZpZyBmcm9tIFlBTUwgZmlsZSAoZGVwcmVjYXRlZCwga2VwdCBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcblx0ICovXG5cdGFzeW5jIGxvYWRDb25maWcoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Ly8gTm90ZTogWUFNTCBsb2FkaW5nIGlzIGRlcHJlY2F0ZWQgaW4gZmF2b3Igb2YgVUkgc2V0dGluZ3Ncblx0XHQvLyBUaGlzIG1ldGhvZCBpcyBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGR1cmluZyBtaWdyYXRpb25cblx0XHRjb25zb2xlLmxvZygnWUFNTCBjb25maWcgbG9hZGluZyBza2lwcGVkICh1c2luZyBVSSBzZXR0aW5ncyknKTtcblx0fVxuXG5cdGNsZWFudXAoKTogdm9pZCB7XG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIGNvbmZpZyB3YXRjaGVyXG5cdFx0aWYgKHRoaXMuY29uZmlnV2F0Y2hlcikge1xuXHRcdFx0dGhpcy5hcHAudmF1bHQub2ZmcmVmKHRoaXMuY29uZmlnV2F0Y2hlcik7XG5cdFx0XHR0aGlzLmNvbmZpZ1dhdGNoZXIgPSBudWxsO1xuXHRcdH1cblx0fVxufVxuIiwgIlxuLyohIGpzLXlhbWwgNC4xLjAgaHR0cHM6Ly9naXRodWIuY29tL25vZGVjYS9qcy15YW1sIEBsaWNlbnNlIE1JVCAqL1xuZnVuY3Rpb24gaXNOb3RoaW5nKHN1YmplY3QpIHtcbiAgcmV0dXJuICh0eXBlb2Ygc3ViamVjdCA9PT0gJ3VuZGVmaW5lZCcpIHx8IChzdWJqZWN0ID09PSBudWxsKTtcbn1cblxuXG5mdW5jdGlvbiBpc09iamVjdChzdWJqZWN0KSB7XG4gIHJldHVybiAodHlwZW9mIHN1YmplY3QgPT09ICdvYmplY3QnKSAmJiAoc3ViamVjdCAhPT0gbnVsbCk7XG59XG5cblxuZnVuY3Rpb24gdG9BcnJheShzZXF1ZW5jZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShzZXF1ZW5jZSkpIHJldHVybiBzZXF1ZW5jZTtcbiAgZWxzZSBpZiAoaXNOb3RoaW5nKHNlcXVlbmNlKSkgcmV0dXJuIFtdO1xuXG4gIHJldHVybiBbIHNlcXVlbmNlIF07XG59XG5cblxuZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XG4gIHZhciBpbmRleCwgbGVuZ3RoLCBrZXksIHNvdXJjZUtleXM7XG5cbiAgaWYgKHNvdXJjZSkge1xuICAgIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuXG4gICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IHNvdXJjZUtleXMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAga2V5ID0gc291cmNlS2V5c1tpbmRleF07XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cblxuZnVuY3Rpb24gcmVwZWF0KHN0cmluZywgY291bnQpIHtcbiAgdmFyIHJlc3VsdCA9ICcnLCBjeWNsZTtcblxuICBmb3IgKGN5Y2xlID0gMDsgY3ljbGUgPCBjb3VudDsgY3ljbGUgKz0gMSkge1xuICAgIHJlc3VsdCArPSBzdHJpbmc7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGlzTmVnYXRpdmVaZXJvKG51bWJlcikge1xuICByZXR1cm4gKG51bWJlciA9PT0gMCkgJiYgKE51bWJlci5ORUdBVElWRV9JTkZJTklUWSA9PT0gMSAvIG51bWJlcik7XG59XG5cblxudmFyIGlzTm90aGluZ18xICAgICAgPSBpc05vdGhpbmc7XG52YXIgaXNPYmplY3RfMSAgICAgICA9IGlzT2JqZWN0O1xudmFyIHRvQXJyYXlfMSAgICAgICAgPSB0b0FycmF5O1xudmFyIHJlcGVhdF8xICAgICAgICAgPSByZXBlYXQ7XG52YXIgaXNOZWdhdGl2ZVplcm9fMSA9IGlzTmVnYXRpdmVaZXJvO1xudmFyIGV4dGVuZF8xICAgICAgICAgPSBleHRlbmQ7XG5cbnZhciBjb21tb24gPSB7XG5cdGlzTm90aGluZzogaXNOb3RoaW5nXzEsXG5cdGlzT2JqZWN0OiBpc09iamVjdF8xLFxuXHR0b0FycmF5OiB0b0FycmF5XzEsXG5cdHJlcGVhdDogcmVwZWF0XzEsXG5cdGlzTmVnYXRpdmVaZXJvOiBpc05lZ2F0aXZlWmVyb18xLFxuXHRleHRlbmQ6IGV4dGVuZF8xXG59O1xuXG4vLyBZQU1MIGVycm9yIGNsYXNzLiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg0NTg5ODRcblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcihleGNlcHRpb24sIGNvbXBhY3QpIHtcbiAgdmFyIHdoZXJlID0gJycsIG1lc3NhZ2UgPSBleGNlcHRpb24ucmVhc29uIHx8ICcodW5rbm93biByZWFzb24pJztcblxuICBpZiAoIWV4Y2VwdGlvbi5tYXJrKSByZXR1cm4gbWVzc2FnZTtcblxuICBpZiAoZXhjZXB0aW9uLm1hcmsubmFtZSkge1xuICAgIHdoZXJlICs9ICdpbiBcIicgKyBleGNlcHRpb24ubWFyay5uYW1lICsgJ1wiICc7XG4gIH1cblxuICB3aGVyZSArPSAnKCcgKyAoZXhjZXB0aW9uLm1hcmsubGluZSArIDEpICsgJzonICsgKGV4Y2VwdGlvbi5tYXJrLmNvbHVtbiArIDEpICsgJyknO1xuXG4gIGlmICghY29tcGFjdCAmJiBleGNlcHRpb24ubWFyay5zbmlwcGV0KSB7XG4gICAgd2hlcmUgKz0gJ1xcblxcbicgKyBleGNlcHRpb24ubWFyay5zbmlwcGV0O1xuICB9XG5cbiAgcmV0dXJuIG1lc3NhZ2UgKyAnICcgKyB3aGVyZTtcbn1cblxuXG5mdW5jdGlvbiBZQU1MRXhjZXB0aW9uJDEocmVhc29uLCBtYXJrKSB7XG4gIC8vIFN1cGVyIGNvbnN0cnVjdG9yXG4gIEVycm9yLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5uYW1lID0gJ1lBTUxFeGNlcHRpb24nO1xuICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgdGhpcy5tYXJrID0gbWFyaztcbiAgdGhpcy5tZXNzYWdlID0gZm9ybWF0RXJyb3IodGhpcywgZmFsc2UpO1xuXG4gIC8vIEluY2x1ZGUgc3RhY2sgdHJhY2UgaW4gZXJyb3Igb2JqZWN0XG4gIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIC8vIENocm9tZSBhbmQgTm9kZUpTXG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH0gZWxzZSB7XG4gICAgLy8gRkYsIElFIDEwKyBhbmQgU2FmYXJpIDYrLiBGYWxsYmFjayBmb3Igb3RoZXJzXG4gICAgdGhpcy5zdGFjayA9IChuZXcgRXJyb3IoKSkuc3RhY2sgfHwgJyc7XG4gIH1cbn1cblxuXG4vLyBJbmhlcml0IGZyb20gRXJyb3JcbllBTUxFeGNlcHRpb24kMS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5ZQU1MRXhjZXB0aW9uJDEucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gWUFNTEV4Y2VwdGlvbiQxO1xuXG5cbllBTUxFeGNlcHRpb24kMS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhjb21wYWN0KSB7XG4gIHJldHVybiB0aGlzLm5hbWUgKyAnOiAnICsgZm9ybWF0RXJyb3IodGhpcywgY29tcGFjdCk7XG59O1xuXG5cbnZhciBleGNlcHRpb24gPSBZQU1MRXhjZXB0aW9uJDE7XG5cbi8vIGdldCBzbmlwcGV0IGZvciBhIHNpbmdsZSBsaW5lLCByZXNwZWN0aW5nIG1heExlbmd0aFxuZnVuY3Rpb24gZ2V0TGluZShidWZmZXIsIGxpbmVTdGFydCwgbGluZUVuZCwgcG9zaXRpb24sIG1heExpbmVMZW5ndGgpIHtcbiAgdmFyIGhlYWQgPSAnJztcbiAgdmFyIHRhaWwgPSAnJztcbiAgdmFyIG1heEhhbGZMZW5ndGggPSBNYXRoLmZsb29yKG1heExpbmVMZW5ndGggLyAyKSAtIDE7XG5cbiAgaWYgKHBvc2l0aW9uIC0gbGluZVN0YXJ0ID4gbWF4SGFsZkxlbmd0aCkge1xuICAgIGhlYWQgPSAnIC4uLiAnO1xuICAgIGxpbmVTdGFydCA9IHBvc2l0aW9uIC0gbWF4SGFsZkxlbmd0aCArIGhlYWQubGVuZ3RoO1xuICB9XG5cbiAgaWYgKGxpbmVFbmQgLSBwb3NpdGlvbiA+IG1heEhhbGZMZW5ndGgpIHtcbiAgICB0YWlsID0gJyAuLi4nO1xuICAgIGxpbmVFbmQgPSBwb3NpdGlvbiArIG1heEhhbGZMZW5ndGggLSB0YWlsLmxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RyOiBoZWFkICsgYnVmZmVyLnNsaWNlKGxpbmVTdGFydCwgbGluZUVuZCkucmVwbGFjZSgvXFx0L2csICdcdTIxOTInKSArIHRhaWwsXG4gICAgcG9zOiBwb3NpdGlvbiAtIGxpbmVTdGFydCArIGhlYWQubGVuZ3RoIC8vIHJlbGF0aXZlIHBvc2l0aW9uXG4gIH07XG59XG5cblxuZnVuY3Rpb24gcGFkU3RhcnQoc3RyaW5nLCBtYXgpIHtcbiAgcmV0dXJuIGNvbW1vbi5yZXBlYXQoJyAnLCBtYXggLSBzdHJpbmcubGVuZ3RoKSArIHN0cmluZztcbn1cblxuXG5mdW5jdGlvbiBtYWtlU25pcHBldChtYXJrLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG9wdGlvbnMgfHwgbnVsbCk7XG5cbiAgaWYgKCFtYXJrLmJ1ZmZlcikgcmV0dXJuIG51bGw7XG5cbiAgaWYgKCFvcHRpb25zLm1heExlbmd0aCkgb3B0aW9ucy5tYXhMZW5ndGggPSA3OTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluZGVudCAgICAgICE9PSAnbnVtYmVyJykgb3B0aW9ucy5pbmRlbnQgICAgICA9IDE7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5saW5lc0JlZm9yZSAhPT0gJ251bWJlcicpIG9wdGlvbnMubGluZXNCZWZvcmUgPSAzO1xuICBpZiAodHlwZW9mIG9wdGlvbnMubGluZXNBZnRlciAgIT09ICdudW1iZXInKSBvcHRpb25zLmxpbmVzQWZ0ZXIgID0gMjtcblxuICB2YXIgcmUgPSAvXFxyP1xcbnxcXHJ8XFwwL2c7XG4gIHZhciBsaW5lU3RhcnRzID0gWyAwIF07XG4gIHZhciBsaW5lRW5kcyA9IFtdO1xuICB2YXIgbWF0Y2g7XG4gIHZhciBmb3VuZExpbmVObyA9IC0xO1xuXG4gIHdoaWxlICgobWF0Y2ggPSByZS5leGVjKG1hcmsuYnVmZmVyKSkpIHtcbiAgICBsaW5lRW5kcy5wdXNoKG1hdGNoLmluZGV4KTtcbiAgICBsaW5lU3RhcnRzLnB1c2gobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xuXG4gICAgaWYgKG1hcmsucG9zaXRpb24gPD0gbWF0Y2guaW5kZXggJiYgZm91bmRMaW5lTm8gPCAwKSB7XG4gICAgICBmb3VuZExpbmVObyA9IGxpbmVTdGFydHMubGVuZ3RoIC0gMjtcbiAgICB9XG4gIH1cblxuICBpZiAoZm91bmRMaW5lTm8gPCAwKSBmb3VuZExpbmVObyA9IGxpbmVTdGFydHMubGVuZ3RoIC0gMTtcblxuICB2YXIgcmVzdWx0ID0gJycsIGksIGxpbmU7XG4gIHZhciBsaW5lTm9MZW5ndGggPSBNYXRoLm1pbihtYXJrLmxpbmUgKyBvcHRpb25zLmxpbmVzQWZ0ZXIsIGxpbmVFbmRzLmxlbmd0aCkudG9TdHJpbmcoKS5sZW5ndGg7XG4gIHZhciBtYXhMaW5lTGVuZ3RoID0gb3B0aW9ucy5tYXhMZW5ndGggLSAob3B0aW9ucy5pbmRlbnQgKyBsaW5lTm9MZW5ndGggKyAzKTtcblxuICBmb3IgKGkgPSAxOyBpIDw9IG9wdGlvbnMubGluZXNCZWZvcmU7IGkrKykge1xuICAgIGlmIChmb3VuZExpbmVObyAtIGkgPCAwKSBicmVhaztcbiAgICBsaW5lID0gZ2V0TGluZShcbiAgICAgIG1hcmsuYnVmZmVyLFxuICAgICAgbGluZVN0YXJ0c1tmb3VuZExpbmVObyAtIGldLFxuICAgICAgbGluZUVuZHNbZm91bmRMaW5lTm8gLSBpXSxcbiAgICAgIG1hcmsucG9zaXRpb24gLSAobGluZVN0YXJ0c1tmb3VuZExpbmVOb10gLSBsaW5lU3RhcnRzW2ZvdW5kTGluZU5vIC0gaV0pLFxuICAgICAgbWF4TGluZUxlbmd0aFxuICAgICk7XG4gICAgcmVzdWx0ID0gY29tbW9uLnJlcGVhdCgnICcsIG9wdGlvbnMuaW5kZW50KSArIHBhZFN0YXJ0KChtYXJrLmxpbmUgLSBpICsgMSkudG9TdHJpbmcoKSwgbGluZU5vTGVuZ3RoKSArXG4gICAgICAnIHwgJyArIGxpbmUuc3RyICsgJ1xcbicgKyByZXN1bHQ7XG4gIH1cblxuICBsaW5lID0gZ2V0TGluZShtYXJrLmJ1ZmZlciwgbGluZVN0YXJ0c1tmb3VuZExpbmVOb10sIGxpbmVFbmRzW2ZvdW5kTGluZU5vXSwgbWFyay5wb3NpdGlvbiwgbWF4TGluZUxlbmd0aCk7XG4gIHJlc3VsdCArPSBjb21tb24ucmVwZWF0KCcgJywgb3B0aW9ucy5pbmRlbnQpICsgcGFkU3RhcnQoKG1hcmsubGluZSArIDEpLnRvU3RyaW5nKCksIGxpbmVOb0xlbmd0aCkgK1xuICAgICcgfCAnICsgbGluZS5zdHIgKyAnXFxuJztcbiAgcmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJy0nLCBvcHRpb25zLmluZGVudCArIGxpbmVOb0xlbmd0aCArIDMgKyBsaW5lLnBvcykgKyAnXicgKyAnXFxuJztcblxuICBmb3IgKGkgPSAxOyBpIDw9IG9wdGlvbnMubGluZXNBZnRlcjsgaSsrKSB7XG4gICAgaWYgKGZvdW5kTGluZU5vICsgaSA+PSBsaW5lRW5kcy5sZW5ndGgpIGJyZWFrO1xuICAgIGxpbmUgPSBnZXRMaW5lKFxuICAgICAgbWFyay5idWZmZXIsXG4gICAgICBsaW5lU3RhcnRzW2ZvdW5kTGluZU5vICsgaV0sXG4gICAgICBsaW5lRW5kc1tmb3VuZExpbmVObyArIGldLFxuICAgICAgbWFyay5wb3NpdGlvbiAtIChsaW5lU3RhcnRzW2ZvdW5kTGluZU5vXSAtIGxpbmVTdGFydHNbZm91bmRMaW5lTm8gKyBpXSksXG4gICAgICBtYXhMaW5lTGVuZ3RoXG4gICAgKTtcbiAgICByZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnICcsIG9wdGlvbnMuaW5kZW50KSArIHBhZFN0YXJ0KChtYXJrLmxpbmUgKyBpICsgMSkudG9TdHJpbmcoKSwgbGluZU5vTGVuZ3RoKSArXG4gICAgICAnIHwgJyArIGxpbmUuc3RyICsgJ1xcbic7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0LnJlcGxhY2UoL1xcbiQvLCAnJyk7XG59XG5cblxudmFyIHNuaXBwZXQgPSBtYWtlU25pcHBldDtcblxudmFyIFRZUEVfQ09OU1RSVUNUT1JfT1BUSU9OUyA9IFtcbiAgJ2tpbmQnLFxuICAnbXVsdGknLFxuICAncmVzb2x2ZScsXG4gICdjb25zdHJ1Y3QnLFxuICAnaW5zdGFuY2VPZicsXG4gICdwcmVkaWNhdGUnLFxuICAncmVwcmVzZW50JyxcbiAgJ3JlcHJlc2VudE5hbWUnLFxuICAnZGVmYXVsdFN0eWxlJyxcbiAgJ3N0eWxlQWxpYXNlcydcbl07XG5cbnZhciBZQU1MX05PREVfS0lORFMgPSBbXG4gICdzY2FsYXInLFxuICAnc2VxdWVuY2UnLFxuICAnbWFwcGluZydcbl07XG5cbmZ1bmN0aW9uIGNvbXBpbGVTdHlsZUFsaWFzZXMobWFwKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBpZiAobWFwICE9PSBudWxsKSB7XG4gICAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGZ1bmN0aW9uIChzdHlsZSkge1xuICAgICAgbWFwW3N0eWxlXS5mb3JFYWNoKGZ1bmN0aW9uIChhbGlhcykge1xuICAgICAgICByZXN1bHRbU3RyaW5nKGFsaWFzKV0gPSBzdHlsZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gVHlwZSQxKHRhZywgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBPYmplY3Qua2V5cyhvcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKFRZUEVfQ09OU1RSVUNUT1JfT1BUSU9OUy5pbmRleE9mKG5hbWUpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignVW5rbm93biBvcHRpb24gXCInICsgbmFtZSArICdcIiBpcyBtZXQgaW4gZGVmaW5pdGlvbiBvZiBcIicgKyB0YWcgKyAnXCIgWUFNTCB0eXBlLicpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gVE9ETzogQWRkIHRhZyBmb3JtYXQgY2hlY2suXG4gIHRoaXMub3B0aW9ucyAgICAgICA9IG9wdGlvbnM7IC8vIGtlZXAgb3JpZ2luYWwgb3B0aW9ucyBpbiBjYXNlIHVzZXIgd2FudHMgdG8gZXh0ZW5kIHRoaXMgdHlwZSBsYXRlclxuICB0aGlzLnRhZyAgICAgICAgICAgPSB0YWc7XG4gIHRoaXMua2luZCAgICAgICAgICA9IG9wdGlvbnNbJ2tpbmQnXSAgICAgICAgICB8fCBudWxsO1xuICB0aGlzLnJlc29sdmUgICAgICAgPSBvcHRpb25zWydyZXNvbHZlJ10gICAgICAgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgdGhpcy5jb25zdHJ1Y3QgICAgID0gb3B0aW9uc1snY29uc3RydWN0J10gICAgIHx8IGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBkYXRhOyB9O1xuICB0aGlzLmluc3RhbmNlT2YgICAgPSBvcHRpb25zWydpbnN0YW5jZU9mJ10gICAgfHwgbnVsbDtcbiAgdGhpcy5wcmVkaWNhdGUgICAgID0gb3B0aW9uc1sncHJlZGljYXRlJ10gICAgIHx8IG51bGw7XG4gIHRoaXMucmVwcmVzZW50ICAgICA9IG9wdGlvbnNbJ3JlcHJlc2VudCddICAgICB8fCBudWxsO1xuICB0aGlzLnJlcHJlc2VudE5hbWUgPSBvcHRpb25zWydyZXByZXNlbnROYW1lJ10gfHwgbnVsbDtcbiAgdGhpcy5kZWZhdWx0U3R5bGUgID0gb3B0aW9uc1snZGVmYXVsdFN0eWxlJ10gIHx8IG51bGw7XG4gIHRoaXMubXVsdGkgICAgICAgICA9IG9wdGlvbnNbJ211bHRpJ10gICAgICAgICB8fCBmYWxzZTtcbiAgdGhpcy5zdHlsZUFsaWFzZXMgID0gY29tcGlsZVN0eWxlQWxpYXNlcyhvcHRpb25zWydzdHlsZUFsaWFzZXMnXSB8fCBudWxsKTtcblxuICBpZiAoWUFNTF9OT0RFX0tJTkRTLmluZGV4T2YodGhpcy5raW5kKSA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdVbmtub3duIGtpbmQgXCInICsgdGhpcy5raW5kICsgJ1wiIGlzIHNwZWNpZmllZCBmb3IgXCInICsgdGFnICsgJ1wiIFlBTUwgdHlwZS4nKTtcbiAgfVxufVxuXG52YXIgdHlwZSA9IFR5cGUkMTtcblxuLyplc2xpbnQtZGlzYWJsZSBtYXgtbGVuKi9cblxuXG5cblxuXG5mdW5jdGlvbiBjb21waWxlTGlzdChzY2hlbWEsIG5hbWUpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gIHNjaGVtYVtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uIChjdXJyZW50VHlwZSkge1xuICAgIHZhciBuZXdJbmRleCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAocHJldmlvdXNUeXBlLCBwcmV2aW91c0luZGV4KSB7XG4gICAgICBpZiAocHJldmlvdXNUeXBlLnRhZyA9PT0gY3VycmVudFR5cGUudGFnICYmXG4gICAgICAgICAgcHJldmlvdXNUeXBlLmtpbmQgPT09IGN1cnJlbnRUeXBlLmtpbmQgJiZcbiAgICAgICAgICBwcmV2aW91c1R5cGUubXVsdGkgPT09IGN1cnJlbnRUeXBlLm11bHRpKSB7XG5cbiAgICAgICAgbmV3SW5kZXggPSBwcmV2aW91c0luZGV4O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVzdWx0W25ld0luZGV4XSA9IGN1cnJlbnRUeXBlO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGNvbXBpbGVNYXAoLyogbGlzdHMuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgc2NhbGFyOiB7fSxcbiAgICAgICAgc2VxdWVuY2U6IHt9LFxuICAgICAgICBtYXBwaW5nOiB7fSxcbiAgICAgICAgZmFsbGJhY2s6IHt9LFxuICAgICAgICBtdWx0aToge1xuICAgICAgICAgIHNjYWxhcjogW10sXG4gICAgICAgICAgc2VxdWVuY2U6IFtdLFxuICAgICAgICAgIG1hcHBpbmc6IFtdLFxuICAgICAgICAgIGZhbGxiYWNrOiBbXVxuICAgICAgICB9XG4gICAgICB9LCBpbmRleCwgbGVuZ3RoO1xuXG4gIGZ1bmN0aW9uIGNvbGxlY3RUeXBlKHR5cGUpIHtcbiAgICBpZiAodHlwZS5tdWx0aSkge1xuICAgICAgcmVzdWx0Lm11bHRpW3R5cGUua2luZF0ucHVzaCh0eXBlKTtcbiAgICAgIHJlc3VsdC5tdWx0aVsnZmFsbGJhY2snXS5wdXNoKHR5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRbdHlwZS5raW5kXVt0eXBlLnRhZ10gPSByZXN1bHRbJ2ZhbGxiYWNrJ11bdHlwZS50YWddID0gdHlwZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBhcmd1bWVudHNbaW5kZXhdLmZvckVhY2goY29sbGVjdFR5cGUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gU2NoZW1hJDEoZGVmaW5pdGlvbikge1xuICByZXR1cm4gdGhpcy5leHRlbmQoZGVmaW5pdGlvbik7XG59XG5cblxuU2NoZW1hJDEucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIGV4dGVuZChkZWZpbml0aW9uKSB7XG4gIHZhciBpbXBsaWNpdCA9IFtdO1xuICB2YXIgZXhwbGljaXQgPSBbXTtcblxuICBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIHR5cGUpIHtcbiAgICAvLyBTY2hlbWEuZXh0ZW5kKHR5cGUpXG4gICAgZXhwbGljaXQucHVzaChkZWZpbml0aW9uKTtcblxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGVmaW5pdGlvbikpIHtcbiAgICAvLyBTY2hlbWEuZXh0ZW5kKFsgdHlwZTEsIHR5cGUyLCAuLi4gXSlcbiAgICBleHBsaWNpdCA9IGV4cGxpY2l0LmNvbmNhdChkZWZpbml0aW9uKTtcblxuICB9IGVsc2UgaWYgKGRlZmluaXRpb24gJiYgKEFycmF5LmlzQXJyYXkoZGVmaW5pdGlvbi5pbXBsaWNpdCkgfHwgQXJyYXkuaXNBcnJheShkZWZpbml0aW9uLmV4cGxpY2l0KSkpIHtcbiAgICAvLyBTY2hlbWEuZXh0ZW5kKHsgZXhwbGljaXQ6IFsgdHlwZTEsIHR5cGUyLCAuLi4gXSwgaW1wbGljaXQ6IFsgdHlwZTEsIHR5cGUyLCAuLi4gXSB9KVxuICAgIGlmIChkZWZpbml0aW9uLmltcGxpY2l0KSBpbXBsaWNpdCA9IGltcGxpY2l0LmNvbmNhdChkZWZpbml0aW9uLmltcGxpY2l0KTtcbiAgICBpZiAoZGVmaW5pdGlvbi5leHBsaWNpdCkgZXhwbGljaXQgPSBleHBsaWNpdC5jb25jYXQoZGVmaW5pdGlvbi5leHBsaWNpdCk7XG5cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdTY2hlbWEuZXh0ZW5kIGFyZ3VtZW50IHNob3VsZCBiZSBhIFR5cGUsIFsgVHlwZSBdLCAnICtcbiAgICAgICdvciBhIHNjaGVtYSBkZWZpbml0aW9uICh7IGltcGxpY2l0OiBbLi4uXSwgZXhwbGljaXQ6IFsuLi5dIH0pJyk7XG4gIH1cblxuICBpbXBsaWNpdC5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlJDEpIHtcbiAgICBpZiAoISh0eXBlJDEgaW5zdGFuY2VvZiB0eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignU3BlY2lmaWVkIGxpc3Qgb2YgWUFNTCB0eXBlcyAob3IgYSBzaW5nbGUgVHlwZSBvYmplY3QpIGNvbnRhaW5zIGEgbm9uLVR5cGUgb2JqZWN0LicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlJDEubG9hZEtpbmQgJiYgdHlwZSQxLmxvYWRLaW5kICE9PSAnc2NhbGFyJykge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignVGhlcmUgaXMgYSBub24tc2NhbGFyIHR5cGUgaW4gdGhlIGltcGxpY2l0IGxpc3Qgb2YgYSBzY2hlbWEuIEltcGxpY2l0IHJlc29sdmluZyBvZiBzdWNoIHR5cGVzIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGUkMS5tdWx0aSkge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignVGhlcmUgaXMgYSBtdWx0aSB0eXBlIGluIHRoZSBpbXBsaWNpdCBsaXN0IG9mIGEgc2NoZW1hLiBNdWx0aSB0YWdzIGNhbiBvbmx5IGJlIGxpc3RlZCBhcyBleHBsaWNpdC4nKTtcbiAgICB9XG4gIH0pO1xuXG4gIGV4cGxpY2l0LmZvckVhY2goZnVuY3Rpb24gKHR5cGUkMSkge1xuICAgIGlmICghKHR5cGUkMSBpbnN0YW5jZW9mIHR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdTcGVjaWZpZWQgbGlzdCBvZiBZQU1MIHR5cGVzIChvciBhIHNpbmdsZSBUeXBlIG9iamVjdCkgY29udGFpbnMgYSBub24tVHlwZSBvYmplY3QuJyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShTY2hlbWEkMS5wcm90b3R5cGUpO1xuXG4gIHJlc3VsdC5pbXBsaWNpdCA9ICh0aGlzLmltcGxpY2l0IHx8IFtdKS5jb25jYXQoaW1wbGljaXQpO1xuICByZXN1bHQuZXhwbGljaXQgPSAodGhpcy5leHBsaWNpdCB8fCBbXSkuY29uY2F0KGV4cGxpY2l0KTtcblxuICByZXN1bHQuY29tcGlsZWRJbXBsaWNpdCA9IGNvbXBpbGVMaXN0KHJlc3VsdCwgJ2ltcGxpY2l0Jyk7XG4gIHJlc3VsdC5jb21waWxlZEV4cGxpY2l0ID0gY29tcGlsZUxpc3QocmVzdWx0LCAnZXhwbGljaXQnKTtcbiAgcmVzdWx0LmNvbXBpbGVkVHlwZU1hcCAgPSBjb21waWxlTWFwKHJlc3VsdC5jb21waWxlZEltcGxpY2l0LCByZXN1bHQuY29tcGlsZWRFeHBsaWNpdCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxudmFyIHNjaGVtYSA9IFNjaGVtYSQxO1xuXG52YXIgc3RyID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnN0cicsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDogJyc7IH1cbn0pO1xuXG52YXIgc2VxID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnNlcScsIHtcbiAga2luZDogJ3NlcXVlbmNlJyxcbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiBbXTsgfVxufSk7XG5cbnZhciBtYXAgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6bWFwJywge1xuICBraW5kOiAnbWFwcGluZycsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDoge307IH1cbn0pO1xuXG52YXIgZmFpbHNhZmUgPSBuZXcgc2NoZW1hKHtcbiAgZXhwbGljaXQ6IFtcbiAgICBzdHIsXG4gICAgc2VxLFxuICAgIG1hcFxuICBdXG59KTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxOdWxsKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBtYXggPSBkYXRhLmxlbmd0aDtcblxuICByZXR1cm4gKG1heCA9PT0gMSAmJiBkYXRhID09PSAnficpIHx8XG4gICAgICAgICAobWF4ID09PSA0ICYmIChkYXRhID09PSAnbnVsbCcgfHwgZGF0YSA9PT0gJ051bGwnIHx8IGRhdGEgPT09ICdOVUxMJykpO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sTnVsbCgpIHtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzTnVsbChvYmplY3QpIHtcbiAgcmV0dXJuIG9iamVjdCA9PT0gbnVsbDtcbn1cblxudmFyIF9udWxsID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm51bGwnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbE51bGwsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbE51bGwsXG4gIHByZWRpY2F0ZTogaXNOdWxsLFxuICByZXByZXNlbnQ6IHtcbiAgICBjYW5vbmljYWw6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICd+JzsgICAgfSxcbiAgICBsb3dlcmNhc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICdudWxsJzsgfSxcbiAgICB1cHBlcmNhc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICdOVUxMJzsgfSxcbiAgICBjYW1lbGNhc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICdOdWxsJzsgfSxcbiAgICBlbXB0eTogICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuICcnOyAgICAgfVxuICB9LFxuICBkZWZhdWx0U3R5bGU6ICdsb3dlcmNhc2UnXG59KTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxCb29sZWFuKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgbWF4ID0gZGF0YS5sZW5ndGg7XG5cbiAgcmV0dXJuIChtYXggPT09IDQgJiYgKGRhdGEgPT09ICd0cnVlJyB8fCBkYXRhID09PSAnVHJ1ZScgfHwgZGF0YSA9PT0gJ1RSVUUnKSkgfHxcbiAgICAgICAgIChtYXggPT09IDUgJiYgKGRhdGEgPT09ICdmYWxzZScgfHwgZGF0YSA9PT0gJ0ZhbHNlJyB8fCBkYXRhID09PSAnRkFMU0UnKSk7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxCb29sZWFuKGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgPT09ICd0cnVlJyB8fFxuICAgICAgICAgZGF0YSA9PT0gJ1RydWUnIHx8XG4gICAgICAgICBkYXRhID09PSAnVFJVRSc7XG59XG5cbmZ1bmN0aW9uIGlzQm9vbGVhbihvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09PSAnW29iamVjdCBCb29sZWFuXSc7XG59XG5cbnZhciBib29sID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmJvb2wnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbEJvb2xlYW4sXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbEJvb2xlYW4sXG4gIHByZWRpY2F0ZTogaXNCb29sZWFuLFxuICByZXByZXNlbnQ6IHtcbiAgICBsb3dlcmNhc2U6IGZ1bmN0aW9uIChvYmplY3QpIHsgcmV0dXJuIG9iamVjdCA/ICd0cnVlJyA6ICdmYWxzZSc7IH0sXG4gICAgdXBwZXJjYXNlOiBmdW5jdGlvbiAob2JqZWN0KSB7IHJldHVybiBvYmplY3QgPyAnVFJVRScgOiAnRkFMU0UnOyB9LFxuICAgIGNhbWVsY2FzZTogZnVuY3Rpb24gKG9iamVjdCkgeyByZXR1cm4gb2JqZWN0ID8gJ1RydWUnIDogJ0ZhbHNlJzsgfVxuICB9LFxuICBkZWZhdWx0U3R5bGU6ICdsb3dlcmNhc2UnXG59KTtcblxuZnVuY3Rpb24gaXNIZXhDb2RlKGMpIHtcbiAgcmV0dXJuICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzOS8qIDkgKi8pKSB8fFxuICAgICAgICAgKCgweDQxLyogQSAqLyA8PSBjKSAmJiAoYyA8PSAweDQ2LyogRiAqLykpIHx8XG4gICAgICAgICAoKDB4NjEvKiBhICovIDw9IGMpICYmIChjIDw9IDB4NjYvKiBmICovKSk7XG59XG5cbmZ1bmN0aW9uIGlzT2N0Q29kZShjKSB7XG4gIHJldHVybiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzcvKiA3ICovKSk7XG59XG5cbmZ1bmN0aW9uIGlzRGVjQ29kZShjKSB7XG4gIHJldHVybiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSk7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sSW50ZWdlcihkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIG1heCA9IGRhdGEubGVuZ3RoLFxuICAgICAgaW5kZXggPSAwLFxuICAgICAgaGFzRGlnaXRzID0gZmFsc2UsXG4gICAgICBjaDtcblxuICBpZiAoIW1heCkgcmV0dXJuIGZhbHNlO1xuXG4gIGNoID0gZGF0YVtpbmRleF07XG5cbiAgLy8gc2lnblxuICBpZiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnKSB7XG4gICAgY2ggPSBkYXRhWysraW5kZXhdO1xuICB9XG5cbiAgaWYgKGNoID09PSAnMCcpIHtcbiAgICAvLyAwXG4gICAgaWYgKGluZGV4ICsgMSA9PT0gbWF4KSByZXR1cm4gdHJ1ZTtcbiAgICBjaCA9IGRhdGFbKytpbmRleF07XG5cbiAgICAvLyBiYXNlIDIsIGJhc2UgOCwgYmFzZSAxNlxuXG4gICAgaWYgKGNoID09PSAnYicpIHtcbiAgICAgIC8vIGJhc2UgMlxuICAgICAgaW5kZXgrKztcblxuICAgICAgZm9yICg7IGluZGV4IDwgbWF4OyBpbmRleCsrKSB7XG4gICAgICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgICAgIGlmIChjaCA9PT0gJ18nKSBjb250aW51ZTtcbiAgICAgICAgaWYgKGNoICE9PSAnMCcgJiYgY2ggIT09ICcxJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBoYXNEaWdpdHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc0RpZ2l0cyAmJiBjaCAhPT0gJ18nO1xuICAgIH1cblxuXG4gICAgaWYgKGNoID09PSAneCcpIHtcbiAgICAgIC8vIGJhc2UgMTZcbiAgICAgIGluZGV4Kys7XG5cbiAgICAgIGZvciAoOyBpbmRleCA8IG1heDsgaW5kZXgrKykge1xuICAgICAgICBjaCA9IGRhdGFbaW5kZXhdO1xuICAgICAgICBpZiAoY2ggPT09ICdfJykgY29udGludWU7XG4gICAgICAgIGlmICghaXNIZXhDb2RlKGRhdGEuY2hhckNvZGVBdChpbmRleCkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGhhc0RpZ2l0cyA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzRGlnaXRzICYmIGNoICE9PSAnXyc7XG4gICAgfVxuXG5cbiAgICBpZiAoY2ggPT09ICdvJykge1xuICAgICAgLy8gYmFzZSA4XG4gICAgICBpbmRleCsrO1xuXG4gICAgICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICAgICAgY2ggPSBkYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIWlzT2N0Q29kZShkYXRhLmNoYXJDb2RlQXQoaW5kZXgpKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBoYXNEaWdpdHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc0RpZ2l0cyAmJiBjaCAhPT0gJ18nO1xuICAgIH1cbiAgfVxuXG4gIC8vIGJhc2UgMTAgKGV4Y2VwdCAwKVxuXG4gIC8vIHZhbHVlIHNob3VsZCBub3Qgc3RhcnQgd2l0aCBgX2A7XG4gIGlmIChjaCA9PT0gJ18nKSByZXR1cm4gZmFsc2U7XG5cbiAgZm9yICg7IGluZGV4IDwgbWF4OyBpbmRleCsrKSB7XG4gICAgY2ggPSBkYXRhW2luZGV4XTtcbiAgICBpZiAoY2ggPT09ICdfJykgY29udGludWU7XG4gICAgaWYgKCFpc0RlY0NvZGUoZGF0YS5jaGFyQ29kZUF0KGluZGV4KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIFNob3VsZCBoYXZlIGRpZ2l0cyBhbmQgc2hvdWxkIG5vdCBlbmQgd2l0aCBgX2BcbiAgaWYgKCFoYXNEaWdpdHMgfHwgY2ggPT09ICdfJykgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sSW50ZWdlcihkYXRhKSB7XG4gIHZhciB2YWx1ZSA9IGRhdGEsIHNpZ24gPSAxLCBjaDtcblxuICBpZiAodmFsdWUuaW5kZXhPZignXycpICE9PSAtMSkge1xuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXy9nLCAnJyk7XG4gIH1cblxuICBjaCA9IHZhbHVlWzBdO1xuXG4gIGlmIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKycpIHtcbiAgICBpZiAoY2ggPT09ICctJykgc2lnbiA9IC0xO1xuICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XG4gICAgY2ggPSB2YWx1ZVswXTtcbiAgfVxuXG4gIGlmICh2YWx1ZSA9PT0gJzAnKSByZXR1cm4gMDtcblxuICBpZiAoY2ggPT09ICcwJykge1xuICAgIGlmICh2YWx1ZVsxXSA9PT0gJ2InKSByZXR1cm4gc2lnbiAqIHBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCAyKTtcbiAgICBpZiAodmFsdWVbMV0gPT09ICd4JykgcmV0dXJuIHNpZ24gKiBwYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgMTYpO1xuICAgIGlmICh2YWx1ZVsxXSA9PT0gJ28nKSByZXR1cm4gc2lnbiAqIHBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCA4KTtcbiAgfVxuXG4gIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUsIDEwKTtcbn1cblxuZnVuY3Rpb24gaXNJbnRlZ2VyKG9iamVjdCkge1xuICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpKSA9PT0gJ1tvYmplY3QgTnVtYmVyXScgJiZcbiAgICAgICAgIChvYmplY3QgJSAxID09PSAwICYmICFjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSk7XG59XG5cbnZhciBpbnQgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6aW50Jywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxJbnRlZ2VyLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxJbnRlZ2VyLFxuICBwcmVkaWNhdGU6IGlzSW50ZWdlcixcbiAgcmVwcmVzZW50OiB7XG4gICAgYmluYXJ5OiAgICAgIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiA+PSAwID8gJzBiJyArIG9iai50b1N0cmluZygyKSA6ICctMGInICsgb2JqLnRvU3RyaW5nKDIpLnNsaWNlKDEpOyB9LFxuICAgIG9jdGFsOiAgICAgICBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogPj0gMCA/ICcwbycgICsgb2JqLnRvU3RyaW5nKDgpIDogJy0wbycgICsgb2JqLnRvU3RyaW5nKDgpLnNsaWNlKDEpOyB9LFxuICAgIGRlY2ltYWw6ICAgICBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmoudG9TdHJpbmcoMTApOyB9LFxuICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICBoZXhhZGVjaW1hbDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqID49IDAgPyAnMHgnICsgb2JqLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpIDogICctMHgnICsgb2JqLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLnNsaWNlKDEpOyB9XG4gIH0sXG4gIGRlZmF1bHRTdHlsZTogJ2RlY2ltYWwnLFxuICBzdHlsZUFsaWFzZXM6IHtcbiAgICBiaW5hcnk6ICAgICAgWyAyLCAgJ2JpbicgXSxcbiAgICBvY3RhbDogICAgICAgWyA4LCAgJ29jdCcgXSxcbiAgICBkZWNpbWFsOiAgICAgWyAxMCwgJ2RlYycgXSxcbiAgICBoZXhhZGVjaW1hbDogWyAxNiwgJ2hleCcgXVxuICB9XG59KTtcblxudmFyIFlBTUxfRkxPQVRfUEFUVEVSTiA9IG5ldyBSZWdFeHAoXG4gIC8vIDIuNWU0LCAyLjUgYW5kIGludGVnZXJzXG4gICdeKD86Wy0rXT8oPzpbMC05XVswLTlfXSopKD86XFxcXC5bMC05X10qKT8oPzpbZUVdWy0rXT9bMC05XSspPycgK1xuICAvLyAuMmU0LCAuMlxuICAvLyBzcGVjaWFsIGNhc2UsIHNlZW1zIG5vdCBmcm9tIHNwZWNcbiAgJ3xcXFxcLlswLTlfXSsoPzpbZUVdWy0rXT9bMC05XSspPycgK1xuICAvLyAuaW5mXG4gICd8Wy0rXT9cXFxcLig/OmluZnxJbmZ8SU5GKScgK1xuICAvLyAubmFuXG4gICd8XFxcXC4oPzpuYW58TmFOfE5BTikpJCcpO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbEZsb2F0KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICBpZiAoIVlBTUxfRkxPQVRfUEFUVEVSTi50ZXN0KGRhdGEpIHx8XG4gICAgICAvLyBRdWljayBoYWNrIHRvIG5vdCBhbGxvdyBpbnRlZ2VycyBlbmQgd2l0aCBgX2BcbiAgICAgIC8vIFByb2JhYmx5IHNob3VsZCB1cGRhdGUgcmVnZXhwICYgY2hlY2sgc3BlZWRcbiAgICAgIGRhdGFbZGF0YS5sZW5ndGggLSAxXSA9PT0gJ18nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxGbG9hdChkYXRhKSB7XG4gIHZhciB2YWx1ZSwgc2lnbjtcblxuICB2YWx1ZSAgPSBkYXRhLnJlcGxhY2UoL18vZywgJycpLnRvTG93ZXJDYXNlKCk7XG4gIHNpZ24gICA9IHZhbHVlWzBdID09PSAnLScgPyAtMSA6IDE7XG5cbiAgaWYgKCcrLScuaW5kZXhPZih2YWx1ZVswXSkgPj0gMCkge1xuICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XG4gIH1cblxuICBpZiAodmFsdWUgPT09ICcuaW5mJykge1xuICAgIHJldHVybiAoc2lnbiA9PT0gMSkgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG5cbiAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJy5uYW4nKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuICByZXR1cm4gc2lnbiAqIHBhcnNlRmxvYXQodmFsdWUsIDEwKTtcbn1cblxuXG52YXIgU0NJRU5USUZJQ19XSVRIT1VUX0RPVCA9IC9eWy0rXT9bMC05XStlLztcblxuZnVuY3Rpb24gcmVwcmVzZW50WWFtbEZsb2F0KG9iamVjdCwgc3R5bGUpIHtcbiAgdmFyIHJlcztcblxuICBpZiAoaXNOYU4ob2JqZWN0KSkge1xuICAgIHN3aXRjaCAoc3R5bGUpIHtcbiAgICAgIGNhc2UgJ2xvd2VyY2FzZSc6IHJldHVybiAnLm5hbic7XG4gICAgICBjYXNlICd1cHBlcmNhc2UnOiByZXR1cm4gJy5OQU4nO1xuICAgICAgY2FzZSAnY2FtZWxjYXNlJzogcmV0dXJuICcuTmFOJztcbiAgICB9XG4gIH0gZWxzZSBpZiAoTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZID09PSBvYmplY3QpIHtcbiAgICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgICBjYXNlICdsb3dlcmNhc2UnOiByZXR1cm4gJy5pbmYnO1xuICAgICAgY2FzZSAndXBwZXJjYXNlJzogcmV0dXJuICcuSU5GJztcbiAgICAgIGNhc2UgJ2NhbWVsY2FzZSc6IHJldHVybiAnLkluZic7XG4gICAgfVxuICB9IGVsc2UgaWYgKE51bWJlci5ORUdBVElWRV9JTkZJTklUWSA9PT0gb2JqZWN0KSB7XG4gICAgc3dpdGNoIChzdHlsZSkge1xuICAgICAgY2FzZSAnbG93ZXJjYXNlJzogcmV0dXJuICctLmluZic7XG4gICAgICBjYXNlICd1cHBlcmNhc2UnOiByZXR1cm4gJy0uSU5GJztcbiAgICAgIGNhc2UgJ2NhbWVsY2FzZSc6IHJldHVybiAnLS5JbmYnO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSkge1xuICAgIHJldHVybiAnLTAuMCc7XG4gIH1cblxuICByZXMgPSBvYmplY3QudG9TdHJpbmcoMTApO1xuXG4gIC8vIEpTIHN0cmluZ2lmaWVyIGNhbiBidWlsZCBzY2llbnRpZmljIGZvcm1hdCB3aXRob3V0IGRvdHM6IDVlLTEwMCxcbiAgLy8gd2hpbGUgWUFNTCByZXF1cmVzIGRvdDogNS5lLTEwMC4gRml4IGl0IHdpdGggc2ltcGxlIGhhY2tcblxuICByZXR1cm4gU0NJRU5USUZJQ19XSVRIT1VUX0RPVC50ZXN0KHJlcykgPyByZXMucmVwbGFjZSgnZScsICcuZScpIDogcmVzO1xufVxuXG5mdW5jdGlvbiBpc0Zsb2F0KG9iamVjdCkge1xuICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09PSAnW29iamVjdCBOdW1iZXJdJykgJiZcbiAgICAgICAgIChvYmplY3QgJSAxICE9PSAwIHx8IGNvbW1vbi5pc05lZ2F0aXZlWmVybyhvYmplY3QpKTtcbn1cblxudmFyIGZsb2F0ID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmZsb2F0Jywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxGbG9hdCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sRmxvYXQsXG4gIHByZWRpY2F0ZTogaXNGbG9hdCxcbiAgcmVwcmVzZW50OiByZXByZXNlbnRZYW1sRmxvYXQsXG4gIGRlZmF1bHRTdHlsZTogJ2xvd2VyY2FzZSdcbn0pO1xuXG52YXIganNvbiA9IGZhaWxzYWZlLmV4dGVuZCh7XG4gIGltcGxpY2l0OiBbXG4gICAgX251bGwsXG4gICAgYm9vbCxcbiAgICBpbnQsXG4gICAgZmxvYXRcbiAgXVxufSk7XG5cbnZhciBjb3JlID0ganNvbjtcblxudmFyIFlBTUxfREFURV9SRUdFWFAgPSBuZXcgUmVnRXhwKFxuICAnXihbMC05XVswLTldWzAtOV1bMC05XSknICAgICAgICAgICsgLy8gWzFdIHllYXJcbiAgJy0oWzAtOV1bMC05XSknICAgICAgICAgICAgICAgICAgICArIC8vIFsyXSBtb250aFxuICAnLShbMC05XVswLTldKSQnKTsgICAgICAgICAgICAgICAgICAgLy8gWzNdIGRheVxuXG52YXIgWUFNTF9USU1FU1RBTVBfUkVHRVhQID0gbmV3IFJlZ0V4cChcbiAgJ14oWzAtOV1bMC05XVswLTldWzAtOV0pJyAgICAgICAgICArIC8vIFsxXSB5ZWFyXG4gICctKFswLTldWzAtOV0/KScgICAgICAgICAgICAgICAgICAgKyAvLyBbMl0gbW9udGhcbiAgJy0oWzAtOV1bMC05XT8pJyAgICAgICAgICAgICAgICAgICArIC8vIFszXSBkYXlcbiAgJyg/OltUdF18WyBcXFxcdF0rKScgICAgICAgICAgICAgICAgICsgLy8gLi4uXG4gICcoWzAtOV1bMC05XT8pJyAgICAgICAgICAgICAgICAgICAgKyAvLyBbNF0gaG91clxuICAnOihbMC05XVswLTldKScgICAgICAgICAgICAgICAgICAgICsgLy8gWzVdIG1pbnV0ZVxuICAnOihbMC05XVswLTldKScgICAgICAgICAgICAgICAgICAgICsgLy8gWzZdIHNlY29uZFxuICAnKD86XFxcXC4oWzAtOV0qKSk/JyAgICAgICAgICAgICAgICAgKyAvLyBbN10gZnJhY3Rpb25cbiAgJyg/OlsgXFxcXHRdKihafChbLStdKShbMC05XVswLTldPyknICsgLy8gWzhdIHR6IFs5XSB0el9zaWduIFsxMF0gdHpfaG91clxuICAnKD86OihbMC05XVswLTldKSk/KSk/JCcpOyAgICAgICAgICAgLy8gWzExXSB0el9taW51dGVcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxUaW1lc3RhbXAoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoWUFNTF9EQVRFX1JFR0VYUC5leGVjKGRhdGEpICE9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKFlBTUxfVElNRVNUQU1QX1JFR0VYUC5leGVjKGRhdGEpICE9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sVGltZXN0YW1wKGRhdGEpIHtcbiAgdmFyIG1hdGNoLCB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgZnJhY3Rpb24gPSAwLFxuICAgICAgZGVsdGEgPSBudWxsLCB0el9ob3VyLCB0el9taW51dGUsIGRhdGU7XG5cbiAgbWF0Y2ggPSBZQU1MX0RBVEVfUkVHRVhQLmV4ZWMoZGF0YSk7XG4gIGlmIChtYXRjaCA9PT0gbnVsbCkgbWF0Y2ggPSBZQU1MX1RJTUVTVEFNUF9SRUdFWFAuZXhlYyhkYXRhKTtcblxuICBpZiAobWF0Y2ggPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignRGF0ZSByZXNvbHZlIGVycm9yJyk7XG5cbiAgLy8gbWF0Y2g6IFsxXSB5ZWFyIFsyXSBtb250aCBbM10gZGF5XG5cbiAgeWVhciA9ICsobWF0Y2hbMV0pO1xuICBtb250aCA9ICsobWF0Y2hbMl0pIC0gMTsgLy8gSlMgbW9udGggc3RhcnRzIHdpdGggMFxuICBkYXkgPSArKG1hdGNoWzNdKTtcblxuICBpZiAoIW1hdGNoWzRdKSB7IC8vIG5vIGhvdXJcbiAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGgsIGRheSkpO1xuICB9XG5cbiAgLy8gbWF0Y2g6IFs0XSBob3VyIFs1XSBtaW51dGUgWzZdIHNlY29uZCBbN10gZnJhY3Rpb25cblxuICBob3VyID0gKyhtYXRjaFs0XSk7XG4gIG1pbnV0ZSA9ICsobWF0Y2hbNV0pO1xuICBzZWNvbmQgPSArKG1hdGNoWzZdKTtcblxuICBpZiAobWF0Y2hbN10pIHtcbiAgICBmcmFjdGlvbiA9IG1hdGNoWzddLnNsaWNlKDAsIDMpO1xuICAgIHdoaWxlIChmcmFjdGlvbi5sZW5ndGggPCAzKSB7IC8vIG1pbGxpLXNlY29uZHNcbiAgICAgIGZyYWN0aW9uICs9ICcwJztcbiAgICB9XG4gICAgZnJhY3Rpb24gPSArZnJhY3Rpb247XG4gIH1cblxuICAvLyBtYXRjaDogWzhdIHR6IFs5XSB0el9zaWduIFsxMF0gdHpfaG91ciBbMTFdIHR6X21pbnV0ZVxuXG4gIGlmIChtYXRjaFs5XSkge1xuICAgIHR6X2hvdXIgPSArKG1hdGNoWzEwXSk7XG4gICAgdHpfbWludXRlID0gKyhtYXRjaFsxMV0gfHwgMCk7XG4gICAgZGVsdGEgPSAodHpfaG91ciAqIDYwICsgdHpfbWludXRlKSAqIDYwMDAwOyAvLyBkZWx0YSBpbiBtaWxpLXNlY29uZHNcbiAgICBpZiAobWF0Y2hbOV0gPT09ICctJykgZGVsdGEgPSAtZGVsdGE7XG4gIH1cblxuICBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIGZyYWN0aW9uKSk7XG5cbiAgaWYgKGRlbHRhKSBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSBkZWx0YSk7XG5cbiAgcmV0dXJuIGRhdGU7XG59XG5cbmZ1bmN0aW9uIHJlcHJlc2VudFlhbWxUaW1lc3RhbXAob2JqZWN0IC8qLCBzdHlsZSovKSB7XG4gIHJldHVybiBvYmplY3QudG9JU09TdHJpbmcoKTtcbn1cblxudmFyIHRpbWVzdGFtcCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjp0aW1lc3RhbXAnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbFRpbWVzdGFtcCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sVGltZXN0YW1wLFxuICBpbnN0YW5jZU9mOiBEYXRlLFxuICByZXByZXNlbnQ6IHJlcHJlc2VudFlhbWxUaW1lc3RhbXBcbn0pO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbE1lcmdlKGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgPT09ICc8PCcgfHwgZGF0YSA9PT0gbnVsbDtcbn1cblxudmFyIG1lcmdlID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm1lcmdlJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxNZXJnZVxufSk7XG5cbi8qZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSovXG5cblxuXG5cblxuLy8gWyA2NCwgNjUsIDY2IF0gLT4gWyBwYWRkaW5nLCBDUiwgTEYgXVxudmFyIEJBU0U2NF9NQVAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cXG5cXHInO1xuXG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sQmluYXJ5KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgY29kZSwgaWR4LCBiaXRsZW4gPSAwLCBtYXggPSBkYXRhLmxlbmd0aCwgbWFwID0gQkFTRTY0X01BUDtcblxuICAvLyBDb252ZXJ0IG9uZSBieSBvbmUuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGNvZGUgPSBtYXAuaW5kZXhPZihkYXRhLmNoYXJBdChpZHgpKTtcblxuICAgIC8vIFNraXAgQ1IvTEZcbiAgICBpZiAoY29kZSA+IDY0KSBjb250aW51ZTtcblxuICAgIC8vIEZhaWwgb24gaWxsZWdhbCBjaGFyYWN0ZXJzXG4gICAgaWYgKGNvZGUgPCAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICBiaXRsZW4gKz0gNjtcbiAgfVxuXG4gIC8vIElmIHRoZXJlIGFyZSBhbnkgYml0cyBsZWZ0LCBzb3VyY2Ugd2FzIGNvcnJ1cHRlZFxuICByZXR1cm4gKGJpdGxlbiAlIDgpID09PSAwO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sQmluYXJ5KGRhdGEpIHtcbiAgdmFyIGlkeCwgdGFpbGJpdHMsXG4gICAgICBpbnB1dCA9IGRhdGEucmVwbGFjZSgvW1xcclxcbj1dL2csICcnKSwgLy8gcmVtb3ZlIENSL0xGICYgcGFkZGluZyB0byBzaW1wbGlmeSBzY2FuXG4gICAgICBtYXggPSBpbnB1dC5sZW5ndGgsXG4gICAgICBtYXAgPSBCQVNFNjRfTUFQLFxuICAgICAgYml0cyA9IDAsXG4gICAgICByZXN1bHQgPSBbXTtcblxuICAvLyBDb2xsZWN0IGJ5IDYqNCBiaXRzICgzIGJ5dGVzKVxuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGlmICgoaWR4ICUgNCA9PT0gMCkgJiYgaWR4KSB7XG4gICAgICByZXN1bHQucHVzaCgoYml0cyA+PiAxNikgJiAweEZGKTtcbiAgICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDgpICYgMHhGRik7XG4gICAgICByZXN1bHQucHVzaChiaXRzICYgMHhGRik7XG4gICAgfVxuXG4gICAgYml0cyA9IChiaXRzIDw8IDYpIHwgbWFwLmluZGV4T2YoaW5wdXQuY2hhckF0KGlkeCkpO1xuICB9XG5cbiAgLy8gRHVtcCB0YWlsXG5cbiAgdGFpbGJpdHMgPSAobWF4ICUgNCkgKiA2O1xuXG4gIGlmICh0YWlsYml0cyA9PT0gMCkge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDE2KSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDgpICYgMHhGRik7XG4gICAgcmVzdWx0LnB1c2goYml0cyAmIDB4RkYpO1xuICB9IGVsc2UgaWYgKHRhaWxiaXRzID09PSAxOCkge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDEwKSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDIpICYgMHhGRik7XG4gIH0gZWxzZSBpZiAodGFpbGJpdHMgPT09IDEyKSB7XG4gICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gNCkgJiAweEZGKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgVWludDhBcnJheShyZXN1bHQpO1xufVxuXG5mdW5jdGlvbiByZXByZXNlbnRZYW1sQmluYXJ5KG9iamVjdCAvKiwgc3R5bGUqLykge1xuICB2YXIgcmVzdWx0ID0gJycsIGJpdHMgPSAwLCBpZHgsIHRhaWwsXG4gICAgICBtYXggPSBvYmplY3QubGVuZ3RoLFxuICAgICAgbWFwID0gQkFTRTY0X01BUDtcblxuICAvLyBDb252ZXJ0IGV2ZXJ5IHRocmVlIGJ5dGVzIHRvIDQgQVNDSUkgY2hhcmFjdGVycy5cblxuICBmb3IgKGlkeCA9IDA7IGlkeCA8IG1heDsgaWR4KyspIHtcbiAgICBpZiAoKGlkeCAlIDMgPT09IDApICYmIGlkeCkge1xuICAgICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxOCkgJiAweDNGXTtcbiAgICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTIpICYgMHgzRl07XG4gICAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDYpICYgMHgzRl07XG4gICAgICByZXN1bHQgKz0gbWFwW2JpdHMgJiAweDNGXTtcbiAgICB9XG5cbiAgICBiaXRzID0gKGJpdHMgPDwgOCkgKyBvYmplY3RbaWR4XTtcbiAgfVxuXG4gIC8vIER1bXAgdGFpbFxuXG4gIHRhaWwgPSBtYXggJSAzO1xuXG4gIGlmICh0YWlsID09PSAwKSB7XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxOCkgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDEyKSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gNikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwW2JpdHMgJiAweDNGXTtcbiAgfSBlbHNlIGlmICh0YWlsID09PSAyKSB7XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxMCkgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDQpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA8PCAyKSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbNjRdO1xuICB9IGVsc2UgaWYgKHRhaWwgPT09IDEpIHtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDIpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA8PCA0KSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbNjRdO1xuICAgIHJlc3VsdCArPSBtYXBbNjRdO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gaXNCaW5hcnkob2JqKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gICdbb2JqZWN0IFVpbnQ4QXJyYXldJztcbn1cblxudmFyIGJpbmFyeSA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpiaW5hcnknLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbEJpbmFyeSxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sQmluYXJ5LFxuICBwcmVkaWNhdGU6IGlzQmluYXJ5LFxuICByZXByZXNlbnQ6IHJlcHJlc2VudFlhbWxCaW5hcnlcbn0pO1xuXG52YXIgX2hhc093blByb3BlcnR5JDMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF90b1N0cmluZyQyICAgICAgID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxPbWFwKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBvYmplY3RLZXlzID0gW10sIGluZGV4LCBsZW5ndGgsIHBhaXIsIHBhaXJLZXksIHBhaXJIYXNLZXksXG4gICAgICBvYmplY3QgPSBkYXRhO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXIgPSBvYmplY3RbaW5kZXhdO1xuICAgIHBhaXJIYXNLZXkgPSBmYWxzZTtcblxuICAgIGlmIChfdG9TdHJpbmckMi5jYWxsKHBhaXIpICE9PSAnW29iamVjdCBPYmplY3RdJykgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChwYWlyS2V5IGluIHBhaXIpIHtcbiAgICAgIGlmIChfaGFzT3duUHJvcGVydHkkMy5jYWxsKHBhaXIsIHBhaXJLZXkpKSB7XG4gICAgICAgIGlmICghcGFpckhhc0tleSkgcGFpckhhc0tleSA9IHRydWU7XG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghcGFpckhhc0tleSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKG9iamVjdEtleXMuaW5kZXhPZihwYWlyS2V5KSA9PT0gLTEpIG9iamVjdEtleXMucHVzaChwYWlyS2V5KTtcbiAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sT21hcChkYXRhKSB7XG4gIHJldHVybiBkYXRhICE9PSBudWxsID8gZGF0YSA6IFtdO1xufVxuXG52YXIgb21hcCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpvbWFwJywge1xuICBraW5kOiAnc2VxdWVuY2UnLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbE9tYXAsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbE9tYXBcbn0pO1xuXG52YXIgX3RvU3RyaW5nJDEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbFBhaXJzKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBpbmRleCwgbGVuZ3RoLCBwYWlyLCBrZXlzLCByZXN1bHQsXG4gICAgICBvYmplY3QgPSBkYXRhO1xuXG4gIHJlc3VsdCA9IG5ldyBBcnJheShvYmplY3QubGVuZ3RoKTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBwYWlyID0gb2JqZWN0W2luZGV4XTtcblxuICAgIGlmIChfdG9TdHJpbmckMS5jYWxsKHBhaXIpICE9PSAnW29iamVjdCBPYmplY3RdJykgcmV0dXJuIGZhbHNlO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKHBhaXIpO1xuXG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSAxKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXN1bHRbaW5kZXhdID0gWyBrZXlzWzBdLCBwYWlyW2tleXNbMF1dIF07XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbFBhaXJzKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBbXTtcblxuICB2YXIgaW5kZXgsIGxlbmd0aCwgcGFpciwga2V5cywgcmVzdWx0LFxuICAgICAgb2JqZWN0ID0gZGF0YTtcblxuICByZXN1bHQgPSBuZXcgQXJyYXkob2JqZWN0Lmxlbmd0aCk7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpciA9IG9iamVjdFtpbmRleF07XG5cbiAgICBrZXlzID0gT2JqZWN0LmtleXMocGFpcik7XG5cbiAgICByZXN1bHRbaW5kZXhdID0gWyBrZXlzWzBdLCBwYWlyW2tleXNbMF1dIF07XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgcGFpcnMgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6cGFpcnMnLCB7XG4gIGtpbmQ6ICdzZXF1ZW5jZScsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sUGFpcnMsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbFBhaXJzXG59KTtcblxudmFyIF9oYXNPd25Qcm9wZXJ0eSQyID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxTZXQoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgdmFyIGtleSwgb2JqZWN0ID0gZGF0YTtcblxuICBmb3IgKGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoX2hhc093blByb3BlcnR5JDIuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIGlmIChvYmplY3Rba2V5XSAhPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sU2V0KGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDoge307XG59XG5cbnZhciBzZXQgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6c2V0Jywge1xuICBraW5kOiAnbWFwcGluZycsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sU2V0LFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxTZXRcbn0pO1xuXG52YXIgX2RlZmF1bHQgPSBjb3JlLmV4dGVuZCh7XG4gIGltcGxpY2l0OiBbXG4gICAgdGltZXN0YW1wLFxuICAgIG1lcmdlXG4gIF0sXG4gIGV4cGxpY2l0OiBbXG4gICAgYmluYXJ5LFxuICAgIG9tYXAsXG4gICAgcGFpcnMsXG4gICAgc2V0XG4gIF1cbn0pO1xuXG4vKmVzbGludC1kaXNhYmxlIG1heC1sZW4sbm8tdXNlLWJlZm9yZS1kZWZpbmUqL1xuXG5cblxuXG5cblxuXG52YXIgX2hhc093blByb3BlcnR5JDEgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5cbnZhciBDT05URVhUX0ZMT1dfSU4gICA9IDE7XG52YXIgQ09OVEVYVF9GTE9XX09VVCAgPSAyO1xudmFyIENPTlRFWFRfQkxPQ0tfSU4gID0gMztcbnZhciBDT05URVhUX0JMT0NLX09VVCA9IDQ7XG5cblxudmFyIENIT01QSU5HX0NMSVAgID0gMTtcbnZhciBDSE9NUElOR19TVFJJUCA9IDI7XG52YXIgQ0hPTVBJTkdfS0VFUCAgPSAzO1xuXG5cbnZhciBQQVRURVJOX05PTl9QUklOVEFCTEUgICAgICAgICA9IC9bXFx4MDAtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHg3Ri1cXHg4NFxceDg2LVxceDlGXFx1RkZGRVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdKD8hW1xcdURDMDAtXFx1REZGRl0pfCg/OlteXFx1RDgwMC1cXHVEQkZGXXxeKVtcXHVEQzAwLVxcdURGRkZdLztcbnZhciBQQVRURVJOX05PTl9BU0NJSV9MSU5FX0JSRUFLUyA9IC9bXFx4ODVcXHUyMDI4XFx1MjAyOV0vO1xudmFyIFBBVFRFUk5fRkxPV19JTkRJQ0FUT1JTICAgICAgID0gL1ssXFxbXFxdXFx7XFx9XS87XG52YXIgUEFUVEVSTl9UQUdfSEFORExFICAgICAgICAgICAgPSAvXig/OiF8ISF8IVthLXpcXC1dKyEpJC9pO1xudmFyIFBBVFRFUk5fVEFHX1VSSSAgICAgICAgICAgICAgID0gL14oPzohfFteLFxcW1xcXVxce1xcfV0pKD86JVswLTlhLWZdezJ9fFswLTlhLXpcXC0jO1xcL1xcPzpAJj1cXCtcXCQsX1xcLiF+XFwqJ1xcKFxcKVxcW1xcXV0pKiQvaTtcblxuXG5mdW5jdGlvbiBfY2xhc3Mob2JqKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTsgfVxuXG5mdW5jdGlvbiBpc19FT0woYykge1xuICByZXR1cm4gKGMgPT09IDB4MEEvKiBMRiAqLykgfHwgKGMgPT09IDB4MEQvKiBDUiAqLyk7XG59XG5cbmZ1bmN0aW9uIGlzX1dISVRFX1NQQUNFKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDA5LyogVGFiICovKSB8fCAoYyA9PT0gMHgyMC8qIFNwYWNlICovKTtcbn1cblxuZnVuY3Rpb24gaXNfV1NfT1JfRU9MKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDA5LyogVGFiICovKSB8fFxuICAgICAgICAgKGMgPT09IDB4MjAvKiBTcGFjZSAqLykgfHxcbiAgICAgICAgIChjID09PSAweDBBLyogTEYgKi8pIHx8XG4gICAgICAgICAoYyA9PT0gMHgwRC8qIENSICovKTtcbn1cblxuZnVuY3Rpb24gaXNfRkxPV19JTkRJQ0FUT1IoYykge1xuICByZXR1cm4gYyA9PT0gMHgyQy8qICwgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4NUIvKiBbICovIHx8XG4gICAgICAgICBjID09PSAweDVELyogXSAqLyB8fFxuICAgICAgICAgYyA9PT0gMHg3Qi8qIHsgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4N0QvKiB9ICovO1xufVxuXG5mdW5jdGlvbiBmcm9tSGV4Q29kZShjKSB7XG4gIHZhciBsYztcblxuICBpZiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkge1xuICAgIHJldHVybiBjIC0gMHgzMDtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSovXG4gIGxjID0gYyB8IDB4MjA7XG5cbiAgaWYgKCgweDYxLyogYSAqLyA8PSBsYykgJiYgKGxjIDw9IDB4NjYvKiBmICovKSkge1xuICAgIHJldHVybiBsYyAtIDB4NjEgKyAxMDtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlZEhleExlbihjKSB7XG4gIGlmIChjID09PSAweDc4LyogeCAqLykgeyByZXR1cm4gMjsgfVxuICBpZiAoYyA9PT0gMHg3NS8qIHUgKi8pIHsgcmV0dXJuIDQ7IH1cbiAgaWYgKGMgPT09IDB4NTUvKiBVICovKSB7IHJldHVybiA4OyB9XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBmcm9tRGVjaW1hbENvZGUoYykge1xuICBpZiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkge1xuICAgIHJldHVybiBjIC0gMHgzMDtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlRXNjYXBlU2VxdWVuY2UoYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBpbmRlbnQgKi9cbiAgcmV0dXJuIChjID09PSAweDMwLyogMCAqLykgPyAnXFx4MDAnIDpcbiAgICAgICAgKGMgPT09IDB4NjEvKiBhICovKSA/ICdcXHgwNycgOlxuICAgICAgICAoYyA9PT0gMHg2Mi8qIGIgKi8pID8gJ1xceDA4JyA6XG4gICAgICAgIChjID09PSAweDc0LyogdCAqLykgPyAnXFx4MDknIDpcbiAgICAgICAgKGMgPT09IDB4MDkvKiBUYWIgKi8pID8gJ1xceDA5JyA6XG4gICAgICAgIChjID09PSAweDZFLyogbiAqLykgPyAnXFx4MEEnIDpcbiAgICAgICAgKGMgPT09IDB4NzYvKiB2ICovKSA/ICdcXHgwQicgOlxuICAgICAgICAoYyA9PT0gMHg2Ni8qIGYgKi8pID8gJ1xceDBDJyA6XG4gICAgICAgIChjID09PSAweDcyLyogciAqLykgPyAnXFx4MEQnIDpcbiAgICAgICAgKGMgPT09IDB4NjUvKiBlICovKSA/ICdcXHgxQicgOlxuICAgICAgICAoYyA9PT0gMHgyMC8qIFNwYWNlICovKSA/ICcgJyA6XG4gICAgICAgIChjID09PSAweDIyLyogXCIgKi8pID8gJ1xceDIyJyA6XG4gICAgICAgIChjID09PSAweDJGLyogLyAqLykgPyAnLycgOlxuICAgICAgICAoYyA9PT0gMHg1Qy8qIFxcICovKSA/ICdcXHg1QycgOlxuICAgICAgICAoYyA9PT0gMHg0RS8qIE4gKi8pID8gJ1xceDg1JyA6XG4gICAgICAgIChjID09PSAweDVGLyogXyAqLykgPyAnXFx4QTAnIDpcbiAgICAgICAgKGMgPT09IDB4NEMvKiBMICovKSA/ICdcXHUyMDI4JyA6XG4gICAgICAgIChjID09PSAweDUwLyogUCAqLykgPyAnXFx1MjAyOScgOiAnJztcbn1cblxuZnVuY3Rpb24gY2hhckZyb21Db2RlcG9pbnQoYykge1xuICBpZiAoYyA8PSAweEZGRkYpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcbiAgfVxuICAvLyBFbmNvZGUgVVRGLTE2IHN1cnJvZ2F0ZSBwYWlyXG4gIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi0xNiNDb2RlX3BvaW50c19VLjJCMDEwMDAwX3RvX1UuMkIxMEZGRkZcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgKChjIC0gMHgwMTAwMDApID4+IDEwKSArIDB4RDgwMCxcbiAgICAoKGMgLSAweDAxMDAwMCkgJiAweDAzRkYpICsgMHhEQzAwXG4gICk7XG59XG5cbnZhciBzaW1wbGVFc2NhcGVDaGVjayA9IG5ldyBBcnJheSgyNTYpOyAvLyBpbnRlZ2VyLCBmb3IgZmFzdCBhY2Nlc3NcbnZhciBzaW1wbGVFc2NhcGVNYXAgPSBuZXcgQXJyYXkoMjU2KTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgc2ltcGxlRXNjYXBlQ2hlY2tbaV0gPSBzaW1wbGVFc2NhcGVTZXF1ZW5jZShpKSA/IDEgOiAwO1xuICBzaW1wbGVFc2NhcGVNYXBbaV0gPSBzaW1wbGVFc2NhcGVTZXF1ZW5jZShpKTtcbn1cblxuXG5mdW5jdGlvbiBTdGF0ZSQxKGlucHV0LCBvcHRpb25zKSB7XG4gIHRoaXMuaW5wdXQgPSBpbnB1dDtcblxuICB0aGlzLmZpbGVuYW1lICA9IG9wdGlvbnNbJ2ZpbGVuYW1lJ10gIHx8IG51bGw7XG4gIHRoaXMuc2NoZW1hICAgID0gb3B0aW9uc1snc2NoZW1hJ10gICAgfHwgX2RlZmF1bHQ7XG4gIHRoaXMub25XYXJuaW5nID0gb3B0aW9uc1snb25XYXJuaW5nJ10gfHwgbnVsbDtcbiAgLy8gKEhpZGRlbikgUmVtb3ZlPyBtYWtlcyB0aGUgbG9hZGVyIHRvIGV4cGVjdCBZQU1MIDEuMSBkb2N1bWVudHNcbiAgLy8gaWYgc3VjaCBkb2N1bWVudHMgaGF2ZSBubyBleHBsaWNpdCAlWUFNTCBkaXJlY3RpdmVcbiAgdGhpcy5sZWdhY3kgICAgPSBvcHRpb25zWydsZWdhY3knXSAgICB8fCBmYWxzZTtcblxuICB0aGlzLmpzb24gICAgICA9IG9wdGlvbnNbJ2pzb24nXSAgICAgIHx8IGZhbHNlO1xuICB0aGlzLmxpc3RlbmVyICA9IG9wdGlvbnNbJ2xpc3RlbmVyJ10gIHx8IG51bGw7XG5cbiAgdGhpcy5pbXBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdDtcbiAgdGhpcy50eXBlTWFwICAgICAgID0gdGhpcy5zY2hlbWEuY29tcGlsZWRUeXBlTWFwO1xuXG4gIHRoaXMubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcbiAgdGhpcy5wb3NpdGlvbiAgID0gMDtcbiAgdGhpcy5saW5lICAgICAgID0gMDtcbiAgdGhpcy5saW5lU3RhcnQgID0gMDtcbiAgdGhpcy5saW5lSW5kZW50ID0gMDtcblxuICAvLyBwb3NpdGlvbiBvZiBmaXJzdCBsZWFkaW5nIHRhYiBpbiB0aGUgY3VycmVudCBsaW5lLFxuICAvLyB1c2VkIHRvIG1ha2Ugc3VyZSB0aGVyZSBhcmUgbm8gdGFicyBpbiB0aGUgaW5kZW50YXRpb25cbiAgdGhpcy5maXJzdFRhYkluTGluZSA9IC0xO1xuXG4gIHRoaXMuZG9jdW1lbnRzID0gW107XG5cbiAgLypcbiAgdGhpcy52ZXJzaW9uO1xuICB0aGlzLmNoZWNrTGluZUJyZWFrcztcbiAgdGhpcy50YWdNYXA7XG4gIHRoaXMuYW5jaG9yTWFwO1xuICB0aGlzLnRhZztcbiAgdGhpcy5hbmNob3I7XG4gIHRoaXMua2luZDtcbiAgdGhpcy5yZXN1bHQ7Ki9cblxufVxuXG5cbmZ1bmN0aW9uIGdlbmVyYXRlRXJyb3Ioc3RhdGUsIG1lc3NhZ2UpIHtcbiAgdmFyIG1hcmsgPSB7XG4gICAgbmFtZTogICAgIHN0YXRlLmZpbGVuYW1lLFxuICAgIGJ1ZmZlcjogICBzdGF0ZS5pbnB1dC5zbGljZSgwLCAtMSksIC8vIG9taXQgdHJhaWxpbmcgXFwwXG4gICAgcG9zaXRpb246IHN0YXRlLnBvc2l0aW9uLFxuICAgIGxpbmU6ICAgICBzdGF0ZS5saW5lLFxuICAgIGNvbHVtbjogICBzdGF0ZS5wb3NpdGlvbiAtIHN0YXRlLmxpbmVTdGFydFxuICB9O1xuXG4gIG1hcmsuc25pcHBldCA9IHNuaXBwZXQobWFyayk7XG5cbiAgcmV0dXJuIG5ldyBleGNlcHRpb24obWVzc2FnZSwgbWFyayk7XG59XG5cbmZ1bmN0aW9uIHRocm93RXJyb3Ioc3RhdGUsIG1lc3NhZ2UpIHtcbiAgdGhyb3cgZ2VuZXJhdGVFcnJvcihzdGF0ZSwgbWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIHRocm93V2FybmluZyhzdGF0ZSwgbWVzc2FnZSkge1xuICBpZiAoc3RhdGUub25XYXJuaW5nKSB7XG4gICAgc3RhdGUub25XYXJuaW5nLmNhbGwobnVsbCwgZ2VuZXJhdGVFcnJvcihzdGF0ZSwgbWVzc2FnZSkpO1xuICB9XG59XG5cblxudmFyIGRpcmVjdGl2ZUhhbmRsZXJzID0ge1xuXG4gIFlBTUw6IGZ1bmN0aW9uIGhhbmRsZVlhbWxEaXJlY3RpdmUoc3RhdGUsIG5hbWUsIGFyZ3MpIHtcblxuICAgIHZhciBtYXRjaCwgbWFqb3IsIG1pbm9yO1xuXG4gICAgaWYgKHN0YXRlLnZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdkdXBsaWNhdGlvbiBvZiAlWUFNTCBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAoYXJncy5sZW5ndGggIT09IDEpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdZQU1MIGRpcmVjdGl2ZSBhY2NlcHRzIGV4YWN0bHkgb25lIGFyZ3VtZW50Jyk7XG4gICAgfVxuXG4gICAgbWF0Y2ggPSAvXihbMC05XSspXFwuKFswLTldKykkLy5leGVjKGFyZ3NbMF0pO1xuXG4gICAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaWxsLWZvcm1lZCBhcmd1bWVudCBvZiB0aGUgWUFNTCBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBtYWpvciA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgbWlub3IgPSBwYXJzZUludChtYXRjaFsyXSwgMTApO1xuXG4gICAgaWYgKG1ham9yICE9PSAxKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5hY2NlcHRhYmxlIFlBTUwgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnQnKTtcbiAgICB9XG5cbiAgICBzdGF0ZS52ZXJzaW9uID0gYXJnc1swXTtcbiAgICBzdGF0ZS5jaGVja0xpbmVCcmVha3MgPSAobWlub3IgPCAyKTtcblxuICAgIGlmIChtaW5vciAhPT0gMSAmJiBtaW5vciAhPT0gMikge1xuICAgICAgdGhyb3dXYXJuaW5nKHN0YXRlLCAndW5zdXBwb3J0ZWQgWUFNTCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudCcpO1xuICAgIH1cbiAgfSxcblxuICBUQUc6IGZ1bmN0aW9uIGhhbmRsZVRhZ0RpcmVjdGl2ZShzdGF0ZSwgbmFtZSwgYXJncykge1xuXG4gICAgdmFyIGhhbmRsZSwgcHJlZml4O1xuXG4gICAgaWYgKGFyZ3MubGVuZ3RoICE9PSAyKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnVEFHIGRpcmVjdGl2ZSBhY2NlcHRzIGV4YWN0bHkgdHdvIGFyZ3VtZW50cycpO1xuICAgIH1cblxuICAgIGhhbmRsZSA9IGFyZ3NbMF07XG4gICAgcHJlZml4ID0gYXJnc1sxXTtcblxuICAgIGlmICghUEFUVEVSTl9UQUdfSEFORExFLnRlc3QoaGFuZGxlKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2lsbC1mb3JtZWQgdGFnIGhhbmRsZSAoZmlyc3QgYXJndW1lbnQpIG9mIHRoZSBUQUcgZGlyZWN0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoc3RhdGUudGFnTWFwLCBoYW5kbGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGhlcmUgaXMgYSBwcmV2aW91c2x5IGRlY2xhcmVkIHN1ZmZpeCBmb3IgXCInICsgaGFuZGxlICsgJ1wiIHRhZyBoYW5kbGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIVBBVFRFUk5fVEFHX1VSSS50ZXN0KHByZWZpeCkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbGwtZm9ybWVkIHRhZyBwcmVmaXggKHNlY29uZCBhcmd1bWVudCkgb2YgdGhlIFRBRyBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcHJlZml4ID0gZGVjb2RlVVJJQ29tcG9uZW50KHByZWZpeCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIHByZWZpeCBpcyBtYWxmb3JtZWQ6ICcgKyBwcmVmaXgpO1xuICAgIH1cblxuICAgIHN0YXRlLnRhZ01hcFtoYW5kbGVdID0gcHJlZml4O1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBzdGFydCwgZW5kLCBjaGVja0pzb24pIHtcbiAgdmFyIF9wb3NpdGlvbiwgX2xlbmd0aCwgX2NoYXJhY3RlciwgX3Jlc3VsdDtcblxuICBpZiAoc3RhcnQgPCBlbmQpIHtcbiAgICBfcmVzdWx0ID0gc3RhdGUuaW5wdXQuc2xpY2Uoc3RhcnQsIGVuZCk7XG5cbiAgICBpZiAoY2hlY2tKc29uKSB7XG4gICAgICBmb3IgKF9wb3NpdGlvbiA9IDAsIF9sZW5ndGggPSBfcmVzdWx0Lmxlbmd0aDsgX3Bvc2l0aW9uIDwgX2xlbmd0aDsgX3Bvc2l0aW9uICs9IDEpIHtcbiAgICAgICAgX2NoYXJhY3RlciA9IF9yZXN1bHQuY2hhckNvZGVBdChfcG9zaXRpb24pO1xuICAgICAgICBpZiAoIShfY2hhcmFjdGVyID09PSAweDA5IHx8XG4gICAgICAgICAgICAgICgweDIwIDw9IF9jaGFyYWN0ZXIgJiYgX2NoYXJhY3RlciA8PSAweDEwRkZGRikpKSB7XG4gICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2V4cGVjdGVkIHZhbGlkIEpTT04gY2hhcmFjdGVyJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFBBVFRFUk5fTk9OX1BSSU5UQUJMRS50ZXN0KF9yZXN1bHQpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGhlIHN0cmVhbSBjb250YWlucyBub24tcHJpbnRhYmxlIGNoYXJhY3RlcnMnKTtcbiAgICB9XG5cbiAgICBzdGF0ZS5yZXN1bHQgKz0gX3Jlc3VsdDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtZXJnZU1hcHBpbmdzKHN0YXRlLCBkZXN0aW5hdGlvbiwgc291cmNlLCBvdmVycmlkYWJsZUtleXMpIHtcbiAgdmFyIHNvdXJjZUtleXMsIGtleSwgaW5kZXgsIHF1YW50aXR5O1xuXG4gIGlmICghY29tbW9uLmlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnY2Fubm90IG1lcmdlIG1hcHBpbmdzOyB0aGUgcHJvdmlkZWQgc291cmNlIG9iamVjdCBpcyB1bmFjY2VwdGFibGUnKTtcbiAgfVxuXG4gIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBxdWFudGl0eSA9IHNvdXJjZUtleXMubGVuZ3RoOyBpbmRleCA8IHF1YW50aXR5OyBpbmRleCArPSAxKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpbmRleF07XG5cbiAgICBpZiAoIV9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoZGVzdGluYXRpb24sIGtleSkpIHtcbiAgICAgIGRlc3RpbmF0aW9uW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIG92ZXJyaWRhYmxlS2V5c1trZXldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIHZhbHVlTm9kZSxcbiAgc3RhcnRMaW5lLCBzdGFydExpbmVTdGFydCwgc3RhcnRQb3MpIHtcblxuICB2YXIgaW5kZXgsIHF1YW50aXR5O1xuXG4gIC8vIFRoZSBvdXRwdXQgaXMgYSBwbGFpbiBvYmplY3QgaGVyZSwgc28ga2V5cyBjYW4gb25seSBiZSBzdHJpbmdzLlxuICAvLyBXZSBuZWVkIHRvIGNvbnZlcnQga2V5Tm9kZSB0byBhIHN0cmluZywgYnV0IGRvaW5nIHNvIGNhbiBoYW5nIHRoZSBwcm9jZXNzXG4gIC8vIChkZWVwbHkgbmVzdGVkIGFycmF5cyB0aGF0IGV4cGxvZGUgZXhwb25lbnRpYWxseSB1c2luZyBhbGlhc2VzKS5cbiAgaWYgKEFycmF5LmlzQXJyYXkoa2V5Tm9kZSkpIHtcbiAgICBrZXlOb2RlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoa2V5Tm9kZSk7XG5cbiAgICBmb3IgKGluZGV4ID0gMCwgcXVhbnRpdHkgPSBrZXlOb2RlLmxlbmd0aDsgaW5kZXggPCBxdWFudGl0eTsgaW5kZXggKz0gMSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoa2V5Tm9kZVtpbmRleF0pKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICduZXN0ZWQgYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkIGluc2lkZSBrZXlzJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Yga2V5Tm9kZSA9PT0gJ29iamVjdCcgJiYgX2NsYXNzKGtleU5vZGVbaW5kZXhdKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAga2V5Tm9kZVtpbmRleF0gPSAnW29iamVjdCBPYmplY3RdJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBBdm9pZCBjb2RlIGV4ZWN1dGlvbiBpbiBsb2FkKCkgdmlhIHRvU3RyaW5nIHByb3BlcnR5XG4gIC8vIChzdGlsbCB1c2UgaXRzIG93biB0b1N0cmluZyBmb3IgYXJyYXlzLCB0aW1lc3RhbXBzLFxuICAvLyBhbmQgd2hhdGV2ZXIgdXNlciBzY2hlbWEgZXh0ZW5zaW9ucyBoYXBwZW4gdG8gaGF2ZSBAQHRvU3RyaW5nVGFnKVxuICBpZiAodHlwZW9mIGtleU5vZGUgPT09ICdvYmplY3QnICYmIF9jbGFzcyhrZXlOb2RlKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICBrZXlOb2RlID0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gIH1cblxuXG4gIGtleU5vZGUgPSBTdHJpbmcoa2V5Tm9kZSk7XG5cbiAgaWYgKF9yZXN1bHQgPT09IG51bGwpIHtcbiAgICBfcmVzdWx0ID0ge307XG4gIH1cblxuICBpZiAoa2V5VGFnID09PSAndGFnOnlhbWwub3JnLDIwMDI6bWVyZ2UnKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVOb2RlKSkge1xuICAgICAgZm9yIChpbmRleCA9IDAsIHF1YW50aXR5ID0gdmFsdWVOb2RlLmxlbmd0aDsgaW5kZXggPCBxdWFudGl0eTsgaW5kZXggKz0gMSkge1xuICAgICAgICBtZXJnZU1hcHBpbmdzKHN0YXRlLCBfcmVzdWx0LCB2YWx1ZU5vZGVbaW5kZXhdLCBvdmVycmlkYWJsZUtleXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBtZXJnZU1hcHBpbmdzKHN0YXRlLCBfcmVzdWx0LCB2YWx1ZU5vZGUsIG92ZXJyaWRhYmxlS2V5cyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICghc3RhdGUuanNvbiAmJlxuICAgICAgICAhX2hhc093blByb3BlcnR5JDEuY2FsbChvdmVycmlkYWJsZUtleXMsIGtleU5vZGUpICYmXG4gICAgICAgIF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoX3Jlc3VsdCwga2V5Tm9kZSkpIHtcbiAgICAgIHN0YXRlLmxpbmUgPSBzdGFydExpbmUgfHwgc3RhdGUubGluZTtcbiAgICAgIHN0YXRlLmxpbmVTdGFydCA9IHN0YXJ0TGluZVN0YXJ0IHx8IHN0YXRlLmxpbmVTdGFydDtcbiAgICAgIHN0YXRlLnBvc2l0aW9uID0gc3RhcnRQb3MgfHwgc3RhdGUucG9zaXRpb247XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZHVwbGljYXRlZCBtYXBwaW5nIGtleScpO1xuICAgIH1cblxuICAgIC8vIHVzZWQgZm9yIHRoaXMgc3BlY2lmaWMga2V5IG9ubHkgYmVjYXVzZSBPYmplY3QuZGVmaW5lUHJvcGVydHkgaXMgc2xvd1xuICAgIGlmIChrZXlOb2RlID09PSAnX19wcm90b19fJykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9yZXN1bHQsIGtleU5vZGUsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlTm9kZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9yZXN1bHRba2V5Tm9kZV0gPSB2YWx1ZU5vZGU7XG4gICAgfVxuICAgIGRlbGV0ZSBvdmVycmlkYWJsZUtleXNba2V5Tm9kZV07XG4gIH1cblxuICByZXR1cm4gX3Jlc3VsdDtcbn1cblxuZnVuY3Rpb24gcmVhZExpbmVCcmVhayhzdGF0ZSkge1xuICB2YXIgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggPT09IDB4MEEvKiBMRiAqLykge1xuICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gIH0gZWxzZSBpZiAoY2ggPT09IDB4MEQvKiBDUiAqLykge1xuICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgaWYgKHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pID09PSAweDBBLyogTEYgKi8pIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdhIGxpbmUgYnJlYWsgaXMgZXhwZWN0ZWQnKTtcbiAgfVxuXG4gIHN0YXRlLmxpbmUgKz0gMTtcbiAgc3RhdGUubGluZVN0YXJ0ID0gc3RhdGUucG9zaXRpb247XG4gIHN0YXRlLmZpcnN0VGFiSW5MaW5lID0gLTE7XG59XG5cbmZ1bmN0aW9uIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGFsbG93Q29tbWVudHMsIGNoZWNrSW5kZW50KSB7XG4gIHZhciBsaW5lQnJlYWtzID0gMCxcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgd2hpbGUgKGlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgaWYgKGNoID09PSAweDA5LyogVGFiICovICYmIHN0YXRlLmZpcnN0VGFiSW5MaW5lID09PSAtMSkge1xuICAgICAgICBzdGF0ZS5maXJzdFRhYkluTGluZSA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgfVxuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChhbGxvd0NvbW1lbnRzICYmIGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgZG8ge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9IHdoaWxlIChjaCAhPT0gMHgwQS8qIExGICovICYmIGNoICE9PSAweDBELyogQ1IgKi8gJiYgY2ggIT09IDApO1xuICAgIH1cblxuICAgIGlmIChpc19FT0woY2gpKSB7XG4gICAgICByZWFkTGluZUJyZWFrKHN0YXRlKTtcblxuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcbiAgICAgIGxpbmVCcmVha3MrKztcbiAgICAgIHN0YXRlLmxpbmVJbmRlbnQgPSAwO1xuXG4gICAgICB3aGlsZSAoY2ggPT09IDB4MjAvKiBTcGFjZSAqLykge1xuICAgICAgICBzdGF0ZS5saW5lSW5kZW50Kys7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNoZWNrSW5kZW50ICE9PSAtMSAmJiBsaW5lQnJlYWtzICE9PSAwICYmIHN0YXRlLmxpbmVJbmRlbnQgPCBjaGVja0luZGVudCkge1xuICAgIHRocm93V2FybmluZyhzdGF0ZSwgJ2RlZmljaWVudCBpbmRlbnRhdGlvbicpO1xuICB9XG5cbiAgcmV0dXJuIGxpbmVCcmVha3M7XG59XG5cbmZ1bmN0aW9uIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkge1xuICB2YXIgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb24sXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uKTtcblxuICAvLyBDb25kaXRpb24gc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLmxpbmVTdGFydCBpcyB0ZXN0ZWRcbiAgLy8gaW4gcGFyZW50IG9uIGVhY2ggY2FsbCwgZm9yIGVmZmljaWVuY3kuIE5vIG5lZWRzIHRvIHRlc3QgaGVyZSBhZ2Fpbi5cbiAgaWYgKChjaCA9PT0gMHgyRC8qIC0gKi8gfHwgY2ggPT09IDB4MkUvKiAuICovKSAmJlxuICAgICAgY2ggPT09IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uICsgMSkgJiZcbiAgICAgIGNoID09PSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbiArIDIpKSB7XG5cbiAgICBfcG9zaXRpb24gKz0gMztcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChfcG9zaXRpb24pO1xuXG4gICAgaWYgKGNoID09PSAwIHx8IGlzX1dTX09SX0VPTChjaCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gd3JpdGVGb2xkZWRMaW5lcyhzdGF0ZSwgY291bnQpIHtcbiAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgc3RhdGUucmVzdWx0ICs9ICcgJztcbiAgfSBlbHNlIGlmIChjb3VudCA+IDEpIHtcbiAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgY291bnQgLSAxKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHJlYWRQbGFpblNjYWxhcihzdGF0ZSwgbm9kZUluZGVudCwgd2l0aGluRmxvd0NvbGxlY3Rpb24pIHtcbiAgdmFyIHByZWNlZGluZyxcbiAgICAgIGZvbGxvd2luZyxcbiAgICAgIGNhcHR1cmVTdGFydCxcbiAgICAgIGNhcHR1cmVFbmQsXG4gICAgICBoYXNQZW5kaW5nQ29udGVudCxcbiAgICAgIF9saW5lLFxuICAgICAgX2xpbmVTdGFydCxcbiAgICAgIF9saW5lSW5kZW50LFxuICAgICAgX2tpbmQgPSBzdGF0ZS5raW5kLFxuICAgICAgX3Jlc3VsdCA9IHN0YXRlLnJlc3VsdCxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGlzX1dTX09SX0VPTChjaCkgICAgICB8fFxuICAgICAgaXNfRkxPV19JTkRJQ0FUT1IoY2gpIHx8XG4gICAgICBjaCA9PT0gMHgyMy8qICMgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDI2LyogJiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MkEvKiAqICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyMS8qICEgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDdDLyogfCAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4M0UvKiA+ICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyNy8qICcgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDIyLyogXCIgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDI1LyogJSAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4NDAvKiBAICovICAgIHx8XG4gICAgICBjaCA9PT0gMHg2MC8qIGAgKi8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoY2ggPT09IDB4M0YvKiA/ICovIHx8IGNoID09PSAweDJELyogLSAqLykge1xuICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgIGlmIChpc19XU19PUl9FT0woZm9sbG93aW5nKSB8fFxuICAgICAgICB3aXRoaW5GbG93Q29sbGVjdGlvbiAmJiBpc19GTE9XX0lORElDQVRPUihmb2xsb3dpbmcpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcbiAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICBoYXNQZW5kaW5nQ29udGVudCA9IGZhbHNlO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIGlmIChjaCA9PT0gMHgzQS8qIDogKi8pIHtcbiAgICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgICAgaWYgKGlzX1dTX09SX0VPTChmb2xsb3dpbmcpIHx8XG4gICAgICAgICAgd2l0aGluRmxvd0NvbGxlY3Rpb24gJiYgaXNfRkxPV19JTkRJQ0FUT1IoZm9sbG93aW5nKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoY2ggPT09IDB4MjMvKiAjICovKSB7XG4gICAgICBwcmVjZWRpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uIC0gMSk7XG5cbiAgICAgIGlmIChpc19XU19PUl9FT0wocHJlY2VkaW5nKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoKHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgJiYgdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSkgfHxcbiAgICAgICAgICAgICAgIHdpdGhpbkZsb3dDb2xsZWN0aW9uICYmIGlzX0ZMT1dfSU5ESUNBVE9SKGNoKSkge1xuICAgICAgYnJlYWs7XG5cbiAgICB9IGVsc2UgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIF9saW5lID0gc3RhdGUubGluZTtcbiAgICAgIF9saW5lU3RhcnQgPSBzdGF0ZS5saW5lU3RhcnQ7XG4gICAgICBfbGluZUluZGVudCA9IHN0YXRlLmxpbmVJbmRlbnQ7XG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBmYWxzZSwgLTEpO1xuXG4gICAgICBpZiAoc3RhdGUubGluZUluZGVudCA+PSBub2RlSW5kZW50KSB7XG4gICAgICAgIGhhc1BlbmRpbmdDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbiA9IGNhcHR1cmVFbmQ7XG4gICAgICAgIHN0YXRlLmxpbmUgPSBfbGluZTtcbiAgICAgICAgc3RhdGUubGluZVN0YXJ0ID0gX2xpbmVTdGFydDtcbiAgICAgICAgc3RhdGUubGluZUluZGVudCA9IF9saW5lSW5kZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaGFzUGVuZGluZ0NvbnRlbnQpIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQsIGZhbHNlKTtcbiAgICAgIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIHN0YXRlLmxpbmUgLSBfbGluZSk7XG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgICBoYXNQZW5kaW5nQ29udGVudCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb24gKyAxO1xuICAgIH1cblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgfVxuXG4gIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQsIGZhbHNlKTtcblxuICBpZiAoc3RhdGUucmVzdWx0KSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBzdGF0ZS5raW5kID0gX2tpbmQ7XG4gIHN0YXRlLnJlc3VsdCA9IF9yZXN1bHQ7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcmVhZFNpbmdsZVF1b3RlZFNjYWxhcihzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgY2gsXG4gICAgICBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQ7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggIT09IDB4MjcvKiAnICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcbiAgc3RhdGUucG9zaXRpb24rKztcbiAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlICgoY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSkgIT09IDApIHtcbiAgICBpZiAoY2ggPT09IDB4MjcvKiAnICovKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICAgIGlmIChjaCA9PT0gMHgyNy8qICcgKi8pIHtcbiAgICAgICAgY2FwdHVyZVN0YXJ0ID0gc3RhdGUucG9zaXRpb247XG4gICAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICAgIGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCB0cnVlKTtcbiAgICAgIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCBub2RlSW5kZW50KSk7XG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB9IGVsc2UgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgJiYgdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBkb2N1bWVudCB3aXRoaW4gYSBzaW5nbGUgcXVvdGVkIHNjYWxhcicpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgfVxuICB9XG5cbiAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgc2luZ2xlIHF1b3RlZCBzY2FsYXInKTtcbn1cblxuZnVuY3Rpb24gcmVhZERvdWJsZVF1b3RlZFNjYWxhcihzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgY2FwdHVyZVN0YXJ0LFxuICAgICAgY2FwdHVyZUVuZCxcbiAgICAgIGhleExlbmd0aCxcbiAgICAgIGhleFJlc3VsdCxcbiAgICAgIHRtcCxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDIyLyogXCIgKi8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5raW5kID0gJ3NjYWxhcic7XG4gIHN0YXRlLnJlc3VsdCA9ICcnO1xuICBzdGF0ZS5wb3NpdGlvbisrO1xuICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgd2hpbGUgKChjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pKSAhPT0gMCkge1xuICAgIGlmIChjaCA9PT0gMHgyMi8qIFwiICovKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICB9IGVsc2UgaWYgKGNoID09PSAweDVDLyogXFwgKi8pIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIHN0YXRlLnBvc2l0aW9uLCB0cnVlKTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgZmFsc2UsIG5vZGVJbmRlbnQpO1xuXG4gICAgICAgIC8vIFRPRE86IHJld29yayB0byBpbmxpbmUgZm4gd2l0aCBubyB0eXBlIGNhc3Q/XG4gICAgICB9IGVsc2UgaWYgKGNoIDwgMjU2ICYmIHNpbXBsZUVzY2FwZUNoZWNrW2NoXSkge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gc2ltcGxlRXNjYXBlTWFwW2NoXTtcbiAgICAgICAgc3RhdGUucG9zaXRpb24rKztcblxuICAgICAgfSBlbHNlIGlmICgodG1wID0gZXNjYXBlZEhleExlbihjaCkpID4gMCkge1xuICAgICAgICBoZXhMZW5ndGggPSB0bXA7XG4gICAgICAgIGhleFJlc3VsdCA9IDA7XG5cbiAgICAgICAgZm9yICg7IGhleExlbmd0aCA+IDA7IGhleExlbmd0aC0tKSB7XG4gICAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICAgICAgaWYgKCh0bXAgPSBmcm9tSGV4Q29kZShjaCkpID49IDApIHtcbiAgICAgICAgICAgIGhleFJlc3VsdCA9IChoZXhSZXN1bHQgPDwgNCkgKyB0bXA7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2V4cGVjdGVkIGhleGFkZWNpbWFsIGNoYXJhY3RlcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjaGFyRnJvbUNvZGVwb2ludChoZXhSZXN1bHQpO1xuXG4gICAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmtub3duIGVzY2FwZSBzZXF1ZW5jZScpO1xuICAgICAgfVxuXG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB9IGVsc2UgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQsIHRydWUpO1xuICAgICAgd3JpdGVGb2xkZWRMaW5lcyhzdGF0ZSwgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgZmFsc2UsIG5vZGVJbmRlbnQpKTtcbiAgICAgIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIH0gZWxzZSBpZiAoc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLmxpbmVTdGFydCAmJiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIGRvY3VtZW50IHdpdGhpbiBhIGRvdWJsZSBxdW90ZWQgc2NhbGFyJyk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgIGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICB9XG4gIH1cblxuICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSBkb3VibGUgcXVvdGVkIHNjYWxhcicpO1xufVxuXG5mdW5jdGlvbiByZWFkRmxvd0NvbGxlY3Rpb24oc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIHJlYWROZXh0ID0gdHJ1ZSxcbiAgICAgIF9saW5lLFxuICAgICAgX2xpbmVTdGFydCxcbiAgICAgIF9wb3MsXG4gICAgICBfdGFnICAgICA9IHN0YXRlLnRhZyxcbiAgICAgIF9yZXN1bHQsXG4gICAgICBfYW5jaG9yICA9IHN0YXRlLmFuY2hvcixcbiAgICAgIGZvbGxvd2luZyxcbiAgICAgIHRlcm1pbmF0b3IsXG4gICAgICBpc1BhaXIsXG4gICAgICBpc0V4cGxpY2l0UGFpcixcbiAgICAgIGlzTWFwcGluZyxcbiAgICAgIG92ZXJyaWRhYmxlS2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBrZXlOb2RlLFxuICAgICAga2V5VGFnLFxuICAgICAgdmFsdWVOb2RlLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggPT09IDB4NUIvKiBbICovKSB7XG4gICAgdGVybWluYXRvciA9IDB4NUQ7LyogXSAqL1xuICAgIGlzTWFwcGluZyA9IGZhbHNlO1xuICAgIF9yZXN1bHQgPSBbXTtcbiAgfSBlbHNlIGlmIChjaCA9PT0gMHg3Qi8qIHsgKi8pIHtcbiAgICB0ZXJtaW5hdG9yID0gMHg3RDsvKiB9ICovXG4gICAgaXNNYXBwaW5nID0gdHJ1ZTtcbiAgICBfcmVzdWx0ID0ge307XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IHRlcm1pbmF0b3IpIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICAgIHN0YXRlLmtpbmQgPSBpc01hcHBpbmcgPyAnbWFwcGluZycgOiAnc2VxdWVuY2UnO1xuICAgICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXJlYWROZXh0KSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbWlzc2VkIGNvbW1hIGJldHdlZW4gZmxvdyBjb2xsZWN0aW9uIGVudHJpZXMnKTtcbiAgICB9IGVsc2UgaWYgKGNoID09PSAweDJDLyogLCAqLykge1xuICAgICAgLy8gXCJmbG93IGNvbGxlY3Rpb24gZW50cmllcyBjYW4gbmV2ZXIgYmUgY29tcGxldGVseSBlbXB0eVwiLCBhcyBwZXIgWUFNTCAxLjIsIHNlY3Rpb24gNy40XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCBcImV4cGVjdGVkIHRoZSBub2RlIGNvbnRlbnQsIGJ1dCBmb3VuZCAnLCdcIik7XG4gICAgfVxuXG4gICAga2V5VGFnID0ga2V5Tm9kZSA9IHZhbHVlTm9kZSA9IG51bGw7XG4gICAgaXNQYWlyID0gaXNFeHBsaWNpdFBhaXIgPSBmYWxzZTtcblxuICAgIGlmIChjaCA9PT0gMHgzRi8qID8gKi8pIHtcbiAgICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgICAgaWYgKGlzX1dTX09SX0VPTChmb2xsb3dpbmcpKSB7XG4gICAgICAgIGlzUGFpciA9IGlzRXhwbGljaXRQYWlyID0gdHJ1ZTtcbiAgICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgbm9kZUluZGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2xpbmUgPSBzdGF0ZS5saW5lOyAvLyBTYXZlIHRoZSBjdXJyZW50IGxpbmUuXG4gICAgX2xpbmVTdGFydCA9IHN0YXRlLmxpbmVTdGFydDtcbiAgICBfcG9zID0gc3RhdGUucG9zaXRpb247XG4gICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfRkxPV19JTiwgZmFsc2UsIHRydWUpO1xuICAgIGtleVRhZyA9IHN0YXRlLnRhZztcbiAgICBrZXlOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmICgoaXNFeHBsaWNpdFBhaXIgfHwgc3RhdGUubGluZSA9PT0gX2xpbmUpICYmIGNoID09PSAweDNBLyogOiAqLykge1xuICAgICAgaXNQYWlyID0gdHJ1ZTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuICAgICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfRkxPV19JTiwgZmFsc2UsIHRydWUpO1xuICAgICAgdmFsdWVOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgIH1cblxuICAgIGlmIChpc01hcHBpbmcpIHtcbiAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUsIF9saW5lLCBfbGluZVN0YXJ0LCBfcG9zKTtcbiAgICB9IGVsc2UgaWYgKGlzUGFpcikge1xuICAgICAgX3Jlc3VsdC5wdXNoKHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIG51bGwsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUsIF9saW5lLCBfbGluZVN0YXJ0LCBfcG9zKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9yZXN1bHQucHVzaChrZXlOb2RlKTtcbiAgICB9XG5cbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IDB4MkMvKiAsICovKSB7XG4gICAgICByZWFkTmV4dCA9IHRydWU7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlYWROZXh0ID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgZmxvdyBjb2xsZWN0aW9uJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRCbG9ja1NjYWxhcihzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgY2FwdHVyZVN0YXJ0LFxuICAgICAgZm9sZGluZyxcbiAgICAgIGNob21waW5nICAgICAgID0gQ0hPTVBJTkdfQ0xJUCxcbiAgICAgIGRpZFJlYWRDb250ZW50ID0gZmFsc2UsXG4gICAgICBkZXRlY3RlZEluZGVudCA9IGZhbHNlLFxuICAgICAgdGV4dEluZGVudCAgICAgPSBub2RlSW5kZW50LFxuICAgICAgZW1wdHlMaW5lcyAgICAgPSAwLFxuICAgICAgYXRNb3JlSW5kZW50ZWQgPSBmYWxzZSxcbiAgICAgIHRtcCxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoID09PSAweDdDLyogfCAqLykge1xuICAgIGZvbGRpbmcgPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChjaCA9PT0gMHgzRS8qID4gKi8pIHtcbiAgICBmb2xkaW5nID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5raW5kID0gJ3NjYWxhcic7XG4gIHN0YXRlLnJlc3VsdCA9ICcnO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmIChjaCA9PT0gMHgyQi8qICsgKi8gfHwgY2ggPT09IDB4MkQvKiAtICovKSB7XG4gICAgICBpZiAoQ0hPTVBJTkdfQ0xJUCA9PT0gY2hvbXBpbmcpIHtcbiAgICAgICAgY2hvbXBpbmcgPSAoY2ggPT09IDB4MkIvKiArICovKSA/IENIT01QSU5HX0tFRVAgOiBDSE9NUElOR19TVFJJUDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdyZXBlYXQgb2YgYSBjaG9tcGluZyBtb2RlIGlkZW50aWZpZXInKTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoKHRtcCA9IGZyb21EZWNpbWFsQ29kZShjaCkpID49IDApIHtcbiAgICAgIGlmICh0bXAgPT09IDApIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2JhZCBleHBsaWNpdCBpbmRlbnRhdGlvbiB3aWR0aCBvZiBhIGJsb2NrIHNjYWxhcjsgaXQgY2Fubm90IGJlIGxlc3MgdGhhbiBvbmUnKTtcbiAgICAgIH0gZWxzZSBpZiAoIWRldGVjdGVkSW5kZW50KSB7XG4gICAgICAgIHRleHRJbmRlbnQgPSBub2RlSW5kZW50ICsgdG1wIC0gMTtcbiAgICAgICAgZGV0ZWN0ZWRJbmRlbnQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3JlcGVhdCBvZiBhbiBpbmRlbnRhdGlvbiB3aWR0aCBpZGVudGlmaWVyJyk7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgIGRvIHsgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pOyB9XG4gICAgd2hpbGUgKGlzX1dISVRFX1NQQUNFKGNoKSk7XG5cbiAgICBpZiAoY2ggPT09IDB4MjMvKiAjICovKSB7XG4gICAgICBkbyB7IGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTsgfVxuICAgICAgd2hpbGUgKCFpc19FT0woY2gpICYmIChjaCAhPT0gMCkpO1xuICAgIH1cbiAgfVxuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIHJlYWRMaW5lQnJlYWsoc3RhdGUpO1xuICAgIHN0YXRlLmxpbmVJbmRlbnQgPSAwO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIHdoaWxlICgoIWRldGVjdGVkSW5kZW50IHx8IHN0YXRlLmxpbmVJbmRlbnQgPCB0ZXh0SW5kZW50KSAmJlxuICAgICAgICAgICAoY2ggPT09IDB4MjAvKiBTcGFjZSAqLykpIHtcbiAgICAgIHN0YXRlLmxpbmVJbmRlbnQrKztcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoIWRldGVjdGVkSW5kZW50ICYmIHN0YXRlLmxpbmVJbmRlbnQgPiB0ZXh0SW5kZW50KSB7XG4gICAgICB0ZXh0SW5kZW50ID0gc3RhdGUubGluZUluZGVudDtcbiAgICB9XG5cbiAgICBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgZW1wdHlMaW5lcysrO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gRW5kIG9mIHRoZSBzY2FsYXIuXG4gICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCB0ZXh0SW5kZW50KSB7XG5cbiAgICAgIC8vIFBlcmZvcm0gdGhlIGNob21waW5nLlxuICAgICAgaWYgKGNob21waW5nID09PSBDSE9NUElOR19LRUVQKSB7XG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBkaWRSZWFkQ29udGVudCA/IDEgKyBlbXB0eUxpbmVzIDogZW1wdHlMaW5lcyk7XG4gICAgICB9IGVsc2UgaWYgKGNob21waW5nID09PSBDSE9NUElOR19DTElQKSB7XG4gICAgICAgIGlmIChkaWRSZWFkQ29udGVudCkgeyAvLyBpLmUuIG9ubHkgaWYgdGhlIHNjYWxhciBpcyBub3QgZW1wdHkuXG4gICAgICAgICAgc3RhdGUucmVzdWx0ICs9ICdcXG4nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEJyZWFrIHRoaXMgYHdoaWxlYCBjeWNsZSBhbmQgZ28gdG8gdGhlIGZ1bmNpdG9uJ3MgZXBpbG9ndWUuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBGb2xkZWQgc3R5bGU6IHVzZSBmYW5jeSBydWxlcyB0byBoYW5kbGUgbGluZSBicmVha3MuXG4gICAgaWYgKGZvbGRpbmcpIHtcblxuICAgICAgLy8gTGluZXMgc3RhcnRpbmcgd2l0aCB3aGl0ZSBzcGFjZSBjaGFyYWN0ZXJzIChtb3JlLWluZGVudGVkIGxpbmVzKSBhcmUgbm90IGZvbGRlZC5cbiAgICAgIGlmIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgICAgYXRNb3JlSW5kZW50ZWQgPSB0cnVlO1xuICAgICAgICAvLyBleGNlcHQgZm9yIHRoZSBmaXJzdCBjb250ZW50IGxpbmUgKGNmLiBFeGFtcGxlIDguMSlcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGRpZFJlYWRDb250ZW50ID8gMSArIGVtcHR5TGluZXMgOiBlbXB0eUxpbmVzKTtcblxuICAgICAgLy8gRW5kIG9mIG1vcmUtaW5kZW50ZWQgYmxvY2suXG4gICAgICB9IGVsc2UgaWYgKGF0TW9yZUluZGVudGVkKSB7XG4gICAgICAgIGF0TW9yZUluZGVudGVkID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBlbXB0eUxpbmVzICsgMSk7XG5cbiAgICAgIC8vIEp1c3Qgb25lIGxpbmUgYnJlYWsgLSBwZXJjZWl2ZSBhcyB0aGUgc2FtZSBsaW5lLlxuICAgICAgfSBlbHNlIGlmIChlbXB0eUxpbmVzID09PSAwKSB7XG4gICAgICAgIGlmIChkaWRSZWFkQ29udGVudCkgeyAvLyBpLmUuIG9ubHkgaWYgd2UgaGF2ZSBhbHJlYWR5IHJlYWQgc29tZSBzY2FsYXIgY29udGVudC5cbiAgICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gJyAnO1xuICAgICAgICB9XG5cbiAgICAgIC8vIFNldmVyYWwgbGluZSBicmVha3MgLSBwZXJjZWl2ZSBhcyBkaWZmZXJlbnQgbGluZXMuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZW1wdHlMaW5lcyk7XG4gICAgICB9XG5cbiAgICAvLyBMaXRlcmFsIHN0eWxlOiBqdXN0IGFkZCBleGFjdCBudW1iZXIgb2YgbGluZSBicmVha3MgYmV0d2VlbiBjb250ZW50IGxpbmVzLlxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBLZWVwIGFsbCBsaW5lIGJyZWFrcyBleGNlcHQgdGhlIGhlYWRlciBsaW5lIGJyZWFrLlxuICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGRpZFJlYWRDb250ZW50ID8gMSArIGVtcHR5TGluZXMgOiBlbXB0eUxpbmVzKTtcbiAgICB9XG5cbiAgICBkaWRSZWFkQ29udGVudCA9IHRydWU7XG4gICAgZGV0ZWN0ZWRJbmRlbnQgPSB0cnVlO1xuICAgIGVtcHR5TGluZXMgPSAwO1xuICAgIGNhcHR1cmVTdGFydCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgd2hpbGUgKCFpc19FT0woY2gpICYmIChjaCAhPT0gMCkpIHtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgZmFsc2UpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlYWRCbG9ja1NlcXVlbmNlKHN0YXRlLCBub2RlSW5kZW50KSB7XG4gIHZhciBfbGluZSxcbiAgICAgIF90YWcgICAgICA9IHN0YXRlLnRhZyxcbiAgICAgIF9hbmNob3IgICA9IHN0YXRlLmFuY2hvcixcbiAgICAgIF9yZXN1bHQgICA9IFtdLFxuICAgICAgZm9sbG93aW5nLFxuICAgICAgZGV0ZWN0ZWQgID0gZmFsc2UsXG4gICAgICBjaDtcblxuICAvLyB0aGVyZSBpcyBhIGxlYWRpbmcgdGFiIGJlZm9yZSB0aGlzIHRva2VuLCBzbyBpdCBjYW4ndCBiZSBhIGJsb2NrIHNlcXVlbmNlL21hcHBpbmc7XG4gIC8vIGl0IGNhbiBzdGlsbCBiZSBmbG93IHNlcXVlbmNlL21hcHBpbmcgb3IgYSBzY2FsYXJcbiAgaWYgKHN0YXRlLmZpcnN0VGFiSW5MaW5lICE9PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IF9yZXN1bHQ7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIGlmIChzdGF0ZS5maXJzdFRhYkluTGluZSAhPT0gLTEpIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uID0gc3RhdGUuZmlyc3RUYWJJbkxpbmU7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFiIGNoYXJhY3RlcnMgbXVzdCBub3QgYmUgdXNlZCBpbiBpbmRlbnRhdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChjaCAhPT0gMHgyRC8qIC0gKi8pIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgIGlmICghaXNfV1NfT1JfRU9MKGZvbGxvd2luZykpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICBzdGF0ZS5wb3NpdGlvbisrO1xuXG4gICAgaWYgKHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKSkge1xuICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPD0gbm9kZUluZGVudCkge1xuICAgICAgICBfcmVzdWx0LnB1c2gobnVsbCk7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9saW5lID0gc3RhdGUubGluZTtcbiAgICBjb21wb3NlTm9kZShzdGF0ZSwgbm9kZUluZGVudCwgQ09OVEVYVF9CTE9DS19JTiwgZmFsc2UsIHRydWUpO1xuICAgIF9yZXN1bHQucHVzaChzdGF0ZS5yZXN1bHQpO1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoKHN0YXRlLmxpbmUgPT09IF9saW5lIHx8IHN0YXRlLmxpbmVJbmRlbnQgPiBub2RlSW5kZW50KSAmJiAoY2ggIT09IDApKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYmFkIGluZGVudGF0aW9uIG9mIGEgc2VxdWVuY2UgZW50cnknKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCBub2RlSW5kZW50KSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoZGV0ZWN0ZWQpIHtcbiAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgIHN0YXRlLmFuY2hvciA9IF9hbmNob3I7XG4gICAgc3RhdGUua2luZCA9ICdzZXF1ZW5jZSc7XG4gICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlYWRCbG9ja01hcHBpbmcoc3RhdGUsIG5vZGVJbmRlbnQsIGZsb3dJbmRlbnQpIHtcbiAgdmFyIGZvbGxvd2luZyxcbiAgICAgIGFsbG93Q29tcGFjdCxcbiAgICAgIF9saW5lLFxuICAgICAgX2tleUxpbmUsXG4gICAgICBfa2V5TGluZVN0YXJ0LFxuICAgICAgX2tleVBvcyxcbiAgICAgIF90YWcgICAgICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBfYW5jaG9yICAgICAgID0gc3RhdGUuYW5jaG9yLFxuICAgICAgX3Jlc3VsdCAgICAgICA9IHt9LFxuICAgICAgb3ZlcnJpZGFibGVLZXlzID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIGtleVRhZyAgICAgICAgPSBudWxsLFxuICAgICAga2V5Tm9kZSAgICAgICA9IG51bGwsXG4gICAgICB2YWx1ZU5vZGUgICAgID0gbnVsbCxcbiAgICAgIGF0RXhwbGljaXRLZXkgPSBmYWxzZSxcbiAgICAgIGRldGVjdGVkICAgICAgPSBmYWxzZSxcbiAgICAgIGNoO1xuXG4gIC8vIHRoZXJlIGlzIGEgbGVhZGluZyB0YWIgYmVmb3JlIHRoaXMgdG9rZW4sIHNvIGl0IGNhbid0IGJlIGEgYmxvY2sgc2VxdWVuY2UvbWFwcGluZztcbiAgLy8gaXQgY2FuIHN0aWxsIGJlIGZsb3cgc2VxdWVuY2UvbWFwcGluZyBvciBhIHNjYWxhclxuICBpZiAoc3RhdGUuZmlyc3RUYWJJbkxpbmUgIT09IC0xKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgaWYgKCFhdEV4cGxpY2l0S2V5ICYmIHN0YXRlLmZpcnN0VGFiSW5MaW5lICE9PSAtMSkge1xuICAgICAgc3RhdGUucG9zaXRpb24gPSBzdGF0ZS5maXJzdFRhYkluTGluZTtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWIgY2hhcmFjdGVycyBtdXN0IG5vdCBiZSB1c2VkIGluIGluZGVudGF0aW9uJyk7XG4gICAgfVxuXG4gICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuICAgIF9saW5lID0gc3RhdGUubGluZTsgLy8gU2F2ZSB0aGUgY3VycmVudCBsaW5lLlxuXG4gICAgLy9cbiAgICAvLyBFeHBsaWNpdCBub3RhdGlvbiBjYXNlLiBUaGVyZSBhcmUgdHdvIHNlcGFyYXRlIGJsb2NrczpcbiAgICAvLyBmaXJzdCBmb3IgdGhlIGtleSAoZGVub3RlZCBieSBcIj9cIikgYW5kIHNlY29uZCBmb3IgdGhlIHZhbHVlIChkZW5vdGVkIGJ5IFwiOlwiKVxuICAgIC8vXG4gICAgaWYgKChjaCA9PT0gMHgzRi8qID8gKi8gfHwgY2ggPT09IDB4M0EvKiA6ICovKSAmJiBpc19XU19PUl9FT0woZm9sbG93aW5nKSkge1xuXG4gICAgICBpZiAoY2ggPT09IDB4M0YvKiA/ICovKSB7XG4gICAgICAgIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgICAgc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIG51bGwsIF9rZXlMaW5lLCBfa2V5TGluZVN0YXJ0LCBfa2V5UG9zKTtcbiAgICAgICAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgYXRFeHBsaWNpdEtleSA9IHRydWU7XG4gICAgICAgIGFsbG93Q29tcGFjdCA9IHRydWU7XG5cbiAgICAgIH0gZWxzZSBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAvLyBpLmUuIDB4M0EvKiA6ICovID09PSBjaGFyYWN0ZXIgYWZ0ZXIgdGhlIGV4cGxpY2l0IGtleS5cbiAgICAgICAgYXRFeHBsaWNpdEtleSA9IGZhbHNlO1xuICAgICAgICBhbGxvd0NvbXBhY3QgPSB0cnVlO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaW5jb21wbGV0ZSBleHBsaWNpdCBtYXBwaW5nIHBhaXI7IGEga2V5IG5vZGUgaXMgbWlzc2VkOyBvciBmb2xsb3dlZCBieSBhIG5vbi10YWJ1bGF0ZWQgZW1wdHkgbGluZScpO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5wb3NpdGlvbiArPSAxO1xuICAgICAgY2ggPSBmb2xsb3dpbmc7XG5cbiAgICAvL1xuICAgIC8vIEltcGxpY2l0IG5vdGF0aW9uIGNhc2UuIEZsb3ctc3R5bGUgbm9kZSBhcyB0aGUga2V5IGZpcnN0LCB0aGVuIFwiOlwiLCBhbmQgdGhlIHZhbHVlLlxuICAgIC8vXG4gICAgfSBlbHNlIHtcbiAgICAgIF9rZXlMaW5lID0gc3RhdGUubGluZTtcbiAgICAgIF9rZXlMaW5lU3RhcnQgPSBzdGF0ZS5saW5lU3RhcnQ7XG4gICAgICBfa2V5UG9zID0gc3RhdGUucG9zaXRpb247XG5cbiAgICAgIGlmICghY29tcG9zZU5vZGUoc3RhdGUsIGZsb3dJbmRlbnQsIENPTlRFWFRfRkxPV19PVVQsIGZhbHNlLCB0cnVlKSkge1xuICAgICAgICAvLyBOZWl0aGVyIGltcGxpY2l0IG5vciBleHBsaWNpdCBub3RhdGlvbi5cbiAgICAgICAgLy8gUmVhZGluZyBpcyBkb25lLiBHbyB0byB0aGUgZXBpbG9ndWUuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUubGluZSA9PT0gX2xpbmUpIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgICB3aGlsZSAoaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoID09PSAweDNBLyogOiAqLykge1xuICAgICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgICAgIGlmICghaXNfV1NfT1JfRU9MKGNoKSkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2Egd2hpdGVzcGFjZSBjaGFyYWN0ZXIgaXMgZXhwZWN0ZWQgYWZ0ZXIgdGhlIGtleS12YWx1ZSBzZXBhcmF0b3Igd2l0aGluIGEgYmxvY2sgbWFwcGluZycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgICAgICBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgbnVsbCwgX2tleUxpbmUsIF9rZXlMaW5lU3RhcnQsIF9rZXlQb3MpO1xuICAgICAgICAgICAga2V5VGFnID0ga2V5Tm9kZSA9IHZhbHVlTm9kZSA9IG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGV0ZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgIGF0RXhwbGljaXRLZXkgPSBmYWxzZTtcbiAgICAgICAgICBhbGxvd0NvbXBhY3QgPSBmYWxzZTtcbiAgICAgICAgICBrZXlUYWcgPSBzdGF0ZS50YWc7XG4gICAgICAgICAga2V5Tm9kZSA9IHN0YXRlLnJlc3VsdDtcblxuICAgICAgICB9IGVsc2UgaWYgKGRldGVjdGVkKSB7XG4gICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2NhbiBub3QgcmVhZCBhbiBpbXBsaWNpdCBtYXBwaW5nIHBhaXI7IGEgY29sb24gaXMgbWlzc2VkJyk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgICAgICAgIHN0YXRlLmFuY2hvciA9IF9hbmNob3I7XG4gICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEtlZXAgdGhlIHJlc3VsdCBvZiBgY29tcG9zZU5vZGVgLlxuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSBpZiAoZGV0ZWN0ZWQpIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2NhbiBub3QgcmVhZCBhIGJsb2NrIG1hcHBpbmcgZW50cnk7IGEgbXVsdGlsaW5lIGtleSBtYXkgbm90IGJlIGFuIGltcGxpY2l0IGtleScpO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgICAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gS2VlcCB0aGUgcmVzdWx0IG9mIGBjb21wb3NlTm9kZWAuXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBDb21tb24gcmVhZGluZyBjb2RlIGZvciBib3RoIGV4cGxpY2l0IGFuZCBpbXBsaWNpdCBub3RhdGlvbnMuXG4gICAgLy9cbiAgICBpZiAoc3RhdGUubGluZSA9PT0gX2xpbmUgfHwgc3RhdGUubGluZUluZGVudCA+IG5vZGVJbmRlbnQpIHtcbiAgICAgIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgIF9rZXlMaW5lID0gc3RhdGUubGluZTtcbiAgICAgICAgX2tleUxpbmVTdGFydCA9IHN0YXRlLmxpbmVTdGFydDtcbiAgICAgICAgX2tleVBvcyA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfQkxPQ0tfT1VULCB0cnVlLCBhbGxvd0NvbXBhY3QpKSB7XG4gICAgICAgIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgICAga2V5Tm9kZSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUsIF9rZXlMaW5lLCBfa2V5TGluZVN0YXJ0LCBfa2V5UG9zKTtcbiAgICAgICAga2V5VGFnID0ga2V5Tm9kZSA9IHZhbHVlTm9kZSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKChzdGF0ZS5saW5lID09PSBfbGluZSB8fCBzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCkgJiYgKGNoICE9PSAwKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2JhZCBpbmRlbnRhdGlvbiBvZiBhIG1hcHBpbmcgZW50cnknKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCBub2RlSW5kZW50KSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvL1xuICAvLyBFcGlsb2d1ZS5cbiAgLy9cblxuICAvLyBTcGVjaWFsIGNhc2U6IGxhc3QgbWFwcGluZydzIG5vZGUgY29udGFpbnMgb25seSB0aGUga2V5IGluIGV4cGxpY2l0IG5vdGF0aW9uLlxuICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCBudWxsLCBfa2V5TGluZSwgX2tleUxpbmVTdGFydCwgX2tleVBvcyk7XG4gIH1cblxuICAvLyBFeHBvc2UgdGhlIHJlc3VsdGluZyBtYXBwaW5nLlxuICBpZiAoZGV0ZWN0ZWQpIHtcbiAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgIHN0YXRlLmFuY2hvciA9IF9hbmNob3I7XG4gICAgc3RhdGUua2luZCA9ICdtYXBwaW5nJztcbiAgICBzdGF0ZS5yZXN1bHQgPSBfcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIGRldGVjdGVkO1xufVxuXG5mdW5jdGlvbiByZWFkVGFnUHJvcGVydHkoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbixcbiAgICAgIGlzVmVyYmF0aW0gPSBmYWxzZSxcbiAgICAgIGlzTmFtZWQgICAgPSBmYWxzZSxcbiAgICAgIHRhZ0hhbmRsZSxcbiAgICAgIHRhZ05hbWUsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyMS8qICEgKi8pIHJldHVybiBmYWxzZTtcblxuICBpZiAoc3RhdGUudGFnICE9PSBudWxsKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0aW9uIG9mIGEgdGFnIHByb3BlcnR5Jyk7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoID09PSAweDNDLyogPCAqLykge1xuICAgIGlzVmVyYmF0aW0gPSB0cnVlO1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB9IGVsc2UgaWYgKGNoID09PSAweDIxLyogISAqLykge1xuICAgIGlzTmFtZWQgPSB0cnVlO1xuICAgIHRhZ0hhbmRsZSA9ICchISc7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gIH0gZWxzZSB7XG4gICAgdGFnSGFuZGxlID0gJyEnO1xuICB9XG5cbiAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG5cbiAgaWYgKGlzVmVyYmF0aW0pIHtcbiAgICBkbyB7IGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTsgfVxuICAgIHdoaWxlIChjaCAhPT0gMCAmJiBjaCAhPT0gMHgzRS8qID4gKi8pO1xuXG4gICAgaWYgKHN0YXRlLnBvc2l0aW9uIDwgc3RhdGUubGVuZ3RoKSB7XG4gICAgICB0YWdOYW1lID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIHZlcmJhdGltIHRhZycpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkpIHtcblxuICAgICAgaWYgKGNoID09PSAweDIxLyogISAqLykge1xuICAgICAgICBpZiAoIWlzTmFtZWQpIHtcbiAgICAgICAgICB0YWdIYW5kbGUgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24gLSAxLCBzdGF0ZS5wb3NpdGlvbiArIDEpO1xuXG4gICAgICAgICAgaWYgKCFQQVRURVJOX1RBR19IQU5ETEUudGVzdCh0YWdIYW5kbGUpKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZWQgdGFnIGhhbmRsZSBjYW5ub3QgY29udGFpbiBzdWNoIGNoYXJhY3RlcnMnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpc05hbWVkID0gdHJ1ZTtcbiAgICAgICAgICBfcG9zaXRpb24gPSBzdGF0ZS5wb3NpdGlvbiArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhZyBzdWZmaXggY2Fubm90IGNvbnRhaW4gZXhjbGFtYXRpb24gbWFya3MnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGFnTmFtZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKFBBVFRFUk5fRkxPV19JTkRJQ0FUT1JTLnRlc3QodGFnTmFtZSkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgc3VmZml4IGNhbm5vdCBjb250YWluIGZsb3cgaW5kaWNhdG9yIGNoYXJhY3RlcnMnKTtcbiAgICB9XG4gIH1cblxuICBpZiAodGFnTmFtZSAmJiAhUEFUVEVSTl9UQUdfVVJJLnRlc3QodGFnTmFtZSkpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIG5hbWUgY2Fubm90IGNvbnRhaW4gc3VjaCBjaGFyYWN0ZXJzOiAnICsgdGFnTmFtZSk7XG4gIH1cblxuICB0cnkge1xuICAgIHRhZ05hbWUgPSBkZWNvZGVVUklDb21wb25lbnQodGFnTmFtZSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgbmFtZSBpcyBtYWxmb3JtZWQ6ICcgKyB0YWdOYW1lKTtcbiAgfVxuXG4gIGlmIChpc1ZlcmJhdGltKSB7XG4gICAgc3RhdGUudGFnID0gdGFnTmFtZTtcblxuICB9IGVsc2UgaWYgKF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoc3RhdGUudGFnTWFwLCB0YWdIYW5kbGUpKSB7XG4gICAgc3RhdGUudGFnID0gc3RhdGUudGFnTWFwW3RhZ0hhbmRsZV0gKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAodGFnSGFuZGxlID09PSAnIScpIHtcbiAgICBzdGF0ZS50YWcgPSAnIScgKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAodGFnSGFuZGxlID09PSAnISEnKSB7XG4gICAgc3RhdGUudGFnID0gJ3RhZzp5YW1sLm9yZywyMDAyOicgKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZGVjbGFyZWQgdGFnIGhhbmRsZSBcIicgKyB0YWdIYW5kbGUgKyAnXCInKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQW5jaG9yUHJvcGVydHkoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbixcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDI2LyogJiAqLykgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZHVwbGljYXRpb24gb2YgYW4gYW5jaG9yIHByb3BlcnR5Jyk7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSAmJiAhaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBfcG9zaXRpb24pIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZSBvZiBhbiBhbmNob3Igbm9kZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIGNoYXJhY3RlcicpO1xuICB9XG5cbiAgc3RhdGUuYW5jaG9yID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQWxpYXMoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbiwgYWxpYXMsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyQS8qICogKi8pIHJldHVybiBmYWxzZTtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSAmJiAhaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBfcG9zaXRpb24pIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZSBvZiBhbiBhbGlhcyBub2RlIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyJyk7XG4gIH1cblxuICBhbGlhcyA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmICghX2hhc093blByb3BlcnR5JDEuY2FsbChzdGF0ZS5hbmNob3JNYXAsIGFsaWFzKSkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmlkZW50aWZpZWQgYWxpYXMgXCInICsgYWxpYXMgKyAnXCInKTtcbiAgfVxuXG4gIHN0YXRlLnJlc3VsdCA9IHN0YXRlLmFuY2hvck1hcFthbGlhc107XG4gIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbXBvc2VOb2RlKHN0YXRlLCBwYXJlbnRJbmRlbnQsIG5vZGVDb250ZXh0LCBhbGxvd1RvU2VlaywgYWxsb3dDb21wYWN0KSB7XG4gIHZhciBhbGxvd0Jsb2NrU3R5bGVzLFxuICAgICAgYWxsb3dCbG9ja1NjYWxhcnMsXG4gICAgICBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMsXG4gICAgICBpbmRlbnRTdGF0dXMgPSAxLCAvLyAxOiB0aGlzPnBhcmVudCwgMDogdGhpcz1wYXJlbnQsIC0xOiB0aGlzPHBhcmVudFxuICAgICAgYXROZXdMaW5lICA9IGZhbHNlLFxuICAgICAgaGFzQ29udGVudCA9IGZhbHNlLFxuICAgICAgdHlwZUluZGV4LFxuICAgICAgdHlwZVF1YW50aXR5LFxuICAgICAgdHlwZUxpc3QsXG4gICAgICB0eXBlLFxuICAgICAgZmxvd0luZGVudCxcbiAgICAgIGJsb2NrSW5kZW50O1xuXG4gIGlmIChzdGF0ZS5saXN0ZW5lciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmxpc3RlbmVyKCdvcGVuJywgc3RhdGUpO1xuICB9XG5cbiAgc3RhdGUudGFnICAgID0gbnVsbDtcbiAgc3RhdGUuYW5jaG9yID0gbnVsbDtcbiAgc3RhdGUua2luZCAgID0gbnVsbDtcbiAgc3RhdGUucmVzdWx0ID0gbnVsbDtcblxuICBhbGxvd0Jsb2NrU3R5bGVzID0gYWxsb3dCbG9ja1NjYWxhcnMgPSBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgPVxuICAgIENPTlRFWFRfQkxPQ0tfT1VUID09PSBub2RlQ29udGV4dCB8fFxuICAgIENPTlRFWFRfQkxPQ0tfSU4gID09PSBub2RlQ29udGV4dDtcblxuICBpZiAoYWxsb3dUb1NlZWspIHtcbiAgICBpZiAoc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpKSB7XG4gICAgICBhdE5ld0xpbmUgPSB0cnVlO1xuXG4gICAgICBpZiAoc3RhdGUubGluZUluZGVudCA+IHBhcmVudEluZGVudCkge1xuICAgICAgICBpbmRlbnRTdGF0dXMgPSAxO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50ID09PSBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgaW5kZW50U3RhdHVzID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IHBhcmVudEluZGVudCkge1xuICAgICAgICBpbmRlbnRTdGF0dXMgPSAtMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoaW5kZW50U3RhdHVzID09PSAxKSB7XG4gICAgd2hpbGUgKHJlYWRUYWdQcm9wZXJ0eShzdGF0ZSkgfHwgcmVhZEFuY2hvclByb3BlcnR5KHN0YXRlKSkge1xuICAgICAgaWYgKHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKSkge1xuICAgICAgICBhdE5ld0xpbmUgPSB0cnVlO1xuICAgICAgICBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgPSBhbGxvd0Jsb2NrU3R5bGVzO1xuXG4gICAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID4gcGFyZW50SW5kZW50KSB7XG4gICAgICAgICAgaW5kZW50U3RhdHVzID0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50ID09PSBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgICBpbmRlbnRTdGF0dXMgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgICBpbmRlbnRTdGF0dXMgPSAtMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGFsbG93QmxvY2tDb2xsZWN0aW9ucykge1xuICAgIGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9IGF0TmV3TGluZSB8fCBhbGxvd0NvbXBhY3Q7XG4gIH1cblxuICBpZiAoaW5kZW50U3RhdHVzID09PSAxIHx8IENPTlRFWFRfQkxPQ0tfT1VUID09PSBub2RlQ29udGV4dCkge1xuICAgIGlmIChDT05URVhUX0ZMT1dfSU4gPT09IG5vZGVDb250ZXh0IHx8IENPTlRFWFRfRkxPV19PVVQgPT09IG5vZGVDb250ZXh0KSB7XG4gICAgICBmbG93SW5kZW50ID0gcGFyZW50SW5kZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBmbG93SW5kZW50ID0gcGFyZW50SW5kZW50ICsgMTtcbiAgICB9XG5cbiAgICBibG9ja0luZGVudCA9IHN0YXRlLnBvc2l0aW9uIC0gc3RhdGUubGluZVN0YXJ0O1xuXG4gICAgaWYgKGluZGVudFN0YXR1cyA9PT0gMSkge1xuICAgICAgaWYgKGFsbG93QmxvY2tDb2xsZWN0aW9ucyAmJlxuICAgICAgICAgIChyZWFkQmxvY2tTZXF1ZW5jZShzdGF0ZSwgYmxvY2tJbmRlbnQpIHx8XG4gICAgICAgICAgIHJlYWRCbG9ja01hcHBpbmcoc3RhdGUsIGJsb2NrSW5kZW50LCBmbG93SW5kZW50KSkgfHxcbiAgICAgICAgICByZWFkRmxvd0NvbGxlY3Rpb24oc3RhdGUsIGZsb3dJbmRlbnQpKSB7XG4gICAgICAgIGhhc0NvbnRlbnQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKChhbGxvd0Jsb2NrU2NhbGFycyAmJiByZWFkQmxvY2tTY2FsYXIoc3RhdGUsIGZsb3dJbmRlbnQpKSB8fFxuICAgICAgICAgICAgcmVhZFNpbmdsZVF1b3RlZFNjYWxhcihzdGF0ZSwgZmxvd0luZGVudCkgfHxcbiAgICAgICAgICAgIHJlYWREb3VibGVRdW90ZWRTY2FsYXIoc3RhdGUsIGZsb3dJbmRlbnQpKSB7XG4gICAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWFkQWxpYXMoc3RhdGUpKSB7XG4gICAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG5cbiAgICAgICAgICBpZiAoc3RhdGUudGFnICE9PSBudWxsIHx8IHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2FsaWFzIG5vZGUgc2hvdWxkIG5vdCBoYXZlIGFueSBwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAocmVhZFBsYWluU2NhbGFyKHN0YXRlLCBmbG93SW5kZW50LCBDT05URVhUX0ZMT1dfSU4gPT09IG5vZGVDb250ZXh0KSkge1xuICAgICAgICAgIGhhc0NvbnRlbnQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKHN0YXRlLnRhZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgc3RhdGUudGFnID0gJz8nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICAgICAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaW5kZW50U3RhdHVzID09PSAwKSB7XG4gICAgICAvLyBTcGVjaWFsIGNhc2U6IGJsb2NrIHNlcXVlbmNlcyBhcmUgYWxsb3dlZCB0byBoYXZlIHNhbWUgaW5kZW50YXRpb24gbGV2ZWwgYXMgdGhlIHBhcmVudC5cbiAgICAgIC8vIGh0dHA6Ly93d3cueWFtbC5vcmcvc3BlYy8xLjIvc3BlYy5odG1sI2lkMjc5OTc4NFxuICAgICAgaGFzQ29udGVudCA9IGFsbG93QmxvY2tDb2xsZWN0aW9ucyAmJiByZWFkQmxvY2tTZXF1ZW5jZShzdGF0ZSwgYmxvY2tJbmRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0ZS50YWcgPT09IG51bGwpIHtcbiAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IHN0YXRlLnJlc3VsdDtcbiAgICB9XG5cbiAgfSBlbHNlIGlmIChzdGF0ZS50YWcgPT09ICc/Jykge1xuICAgIC8vIEltcGxpY2l0IHJlc29sdmluZyBpcyBub3QgYWxsb3dlZCBmb3Igbm9uLXNjYWxhciB0eXBlcywgYW5kICc/J1xuICAgIC8vIG5vbi1zcGVjaWZpYyB0YWcgaXMgb25seSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHRvIHBsYWluIHNjYWxhcnMuXG4gICAgLy9cbiAgICAvLyBXZSBvbmx5IG5lZWQgdG8gY2hlY2sga2luZCBjb25mb3JtaXR5IGluIGNhc2UgdXNlciBleHBsaWNpdGx5IGFzc2lnbnMgJz8nXG4gICAgLy8gdGFnLCBmb3IgZXhhbXBsZSBsaWtlIHRoaXM6IFwiITw/PiBbMF1cIlxuICAgIC8vXG4gICAgaWYgKHN0YXRlLnJlc3VsdCAhPT0gbnVsbCAmJiBzdGF0ZS5raW5kICE9PSAnc2NhbGFyJykge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuYWNjZXB0YWJsZSBub2RlIGtpbmQgZm9yICE8Pz4gdGFnOyBpdCBzaG91bGQgYmUgXCJzY2FsYXJcIiwgbm90IFwiJyArIHN0YXRlLmtpbmQgKyAnXCInKTtcbiAgICB9XG5cbiAgICBmb3IgKHR5cGVJbmRleCA9IDAsIHR5cGVRdWFudGl0eSA9IHN0YXRlLmltcGxpY2l0VHlwZXMubGVuZ3RoOyB0eXBlSW5kZXggPCB0eXBlUXVhbnRpdHk7IHR5cGVJbmRleCArPSAxKSB7XG4gICAgICB0eXBlID0gc3RhdGUuaW1wbGljaXRUeXBlc1t0eXBlSW5kZXhdO1xuXG4gICAgICBpZiAodHlwZS5yZXNvbHZlKHN0YXRlLnJlc3VsdCkpIHsgLy8gYHN0YXRlLnJlc3VsdGAgdXBkYXRlZCBpbiByZXNvbHZlciBpZiBtYXRjaGVkXG4gICAgICAgIHN0YXRlLnJlc3VsdCA9IHR5cGUuY29uc3RydWN0KHN0YXRlLnJlc3VsdCk7XG4gICAgICAgIHN0YXRlLnRhZyA9IHR5cGUudGFnO1xuICAgICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKHN0YXRlLnRhZyAhPT0gJyEnKSB7XG4gICAgaWYgKF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoc3RhdGUudHlwZU1hcFtzdGF0ZS5raW5kIHx8ICdmYWxsYmFjayddLCBzdGF0ZS50YWcpKSB7XG4gICAgICB0eXBlID0gc3RhdGUudHlwZU1hcFtzdGF0ZS5raW5kIHx8ICdmYWxsYmFjayddW3N0YXRlLnRhZ107XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGxvb2tpbmcgZm9yIG11bHRpIHR5cGVcbiAgICAgIHR5cGUgPSBudWxsO1xuICAgICAgdHlwZUxpc3QgPSBzdGF0ZS50eXBlTWFwLm11bHRpW3N0YXRlLmtpbmQgfHwgJ2ZhbGxiYWNrJ107XG5cbiAgICAgIGZvciAodHlwZUluZGV4ID0gMCwgdHlwZVF1YW50aXR5ID0gdHlwZUxpc3QubGVuZ3RoOyB0eXBlSW5kZXggPCB0eXBlUXVhbnRpdHk7IHR5cGVJbmRleCArPSAxKSB7XG4gICAgICAgIGlmIChzdGF0ZS50YWcuc2xpY2UoMCwgdHlwZUxpc3RbdHlwZUluZGV4XS50YWcubGVuZ3RoKSA9PT0gdHlwZUxpc3RbdHlwZUluZGV4XS50YWcpIHtcbiAgICAgICAgICB0eXBlID0gdHlwZUxpc3RbdHlwZUluZGV4XTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdHlwZSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3Vua25vd24gdGFnICE8JyArIHN0YXRlLnRhZyArICc+Jyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlLnJlc3VsdCAhPT0gbnVsbCAmJiB0eXBlLmtpbmQgIT09IHN0YXRlLmtpbmQpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmFjY2VwdGFibGUgbm9kZSBraW5kIGZvciAhPCcgKyBzdGF0ZS50YWcgKyAnPiB0YWc7IGl0IHNob3VsZCBiZSBcIicgKyB0eXBlLmtpbmQgKyAnXCIsIG5vdCBcIicgKyBzdGF0ZS5raW5kICsgJ1wiJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0eXBlLnJlc29sdmUoc3RhdGUucmVzdWx0LCBzdGF0ZS50YWcpKSB7IC8vIGBzdGF0ZS5yZXN1bHRgIHVwZGF0ZWQgaW4gcmVzb2x2ZXIgaWYgbWF0Y2hlZFxuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2Nhbm5vdCByZXNvbHZlIGEgbm9kZSB3aXRoICE8JyArIHN0YXRlLnRhZyArICc+IGV4cGxpY2l0IHRhZycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5yZXN1bHQgPSB0eXBlLmNvbnN0cnVjdChzdGF0ZS5yZXN1bHQsIHN0YXRlLnRhZyk7XG4gICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gc3RhdGUucmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0ZS5saXN0ZW5lciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmxpc3RlbmVyKCdjbG9zZScsIHN0YXRlKTtcbiAgfVxuICByZXR1cm4gc3RhdGUudGFnICE9PSBudWxsIHx8ICBzdGF0ZS5hbmNob3IgIT09IG51bGwgfHwgaGFzQ29udGVudDtcbn1cblxuZnVuY3Rpb24gcmVhZERvY3VtZW50KHN0YXRlKSB7XG4gIHZhciBkb2N1bWVudFN0YXJ0ID0gc3RhdGUucG9zaXRpb24sXG4gICAgICBfcG9zaXRpb24sXG4gICAgICBkaXJlY3RpdmVOYW1lLFxuICAgICAgZGlyZWN0aXZlQXJncyxcbiAgICAgIGhhc0RpcmVjdGl2ZXMgPSBmYWxzZSxcbiAgICAgIGNoO1xuXG4gIHN0YXRlLnZlcnNpb24gPSBudWxsO1xuICBzdGF0ZS5jaGVja0xpbmVCcmVha3MgPSBzdGF0ZS5sZWdhY3k7XG4gIHN0YXRlLnRhZ01hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHN0YXRlLmFuY2hvck1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgd2hpbGUgKChjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pKSAhPT0gMCkge1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoc3RhdGUubGluZUluZGVudCA+IDAgfHwgY2ggIT09IDB4MjUvKiAlICovKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBoYXNEaXJlY3RpdmVzID0gdHJ1ZTtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkpIHtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBkaXJlY3RpdmVOYW1lID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG4gICAgZGlyZWN0aXZlQXJncyA9IFtdO1xuXG4gICAgaWYgKGRpcmVjdGl2ZU5hbWUubGVuZ3RoIDwgMSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2RpcmVjdGl2ZSBuYW1lIG11c3Qgbm90IGJlIGxlc3MgdGhhbiBvbmUgY2hhcmFjdGVyIGluIGxlbmd0aCcpO1xuICAgIH1cblxuICAgIHdoaWxlIChjaCAhPT0gMCkge1xuICAgICAgd2hpbGUgKGlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaCA9PT0gMHgyMy8qICMgKi8pIHtcbiAgICAgICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICAgICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19FT0woY2gpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc19FT0woY2gpKSBicmVhaztcblxuICAgICAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG5cbiAgICAgIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSkge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGRpcmVjdGl2ZUFyZ3MucHVzaChzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKSk7XG4gICAgfVxuXG4gICAgaWYgKGNoICE9PSAwKSByZWFkTGluZUJyZWFrKHN0YXRlKTtcblxuICAgIGlmIChfaGFzT3duUHJvcGVydHkkMS5jYWxsKGRpcmVjdGl2ZUhhbmRsZXJzLCBkaXJlY3RpdmVOYW1lKSkge1xuICAgICAgZGlyZWN0aXZlSGFuZGxlcnNbZGlyZWN0aXZlTmFtZV0oc3RhdGUsIGRpcmVjdGl2ZU5hbWUsIGRpcmVjdGl2ZUFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICd1bmtub3duIGRvY3VtZW50IGRpcmVjdGl2ZSBcIicgKyBkaXJlY3RpdmVOYW1lICsgJ1wiJyk7XG4gICAgfVxuICB9XG5cbiAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuXG4gIGlmIChzdGF0ZS5saW5lSW5kZW50ID09PSAwICYmXG4gICAgICBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSAgICAgPT09IDB4MkQvKiAtICovICYmXG4gICAgICBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSkgPT09IDB4MkQvKiAtICovICYmXG4gICAgICBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMikgPT09IDB4MkQvKiAtICovKSB7XG4gICAgc3RhdGUucG9zaXRpb24gKz0gMztcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgfSBlbHNlIGlmIChoYXNEaXJlY3RpdmVzKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2RpcmVjdGl2ZXMgZW5kIG1hcmsgaXMgZXhwZWN0ZWQnKTtcbiAgfVxuXG4gIGNvbXBvc2VOb2RlKHN0YXRlLCBzdGF0ZS5saW5lSW5kZW50IC0gMSwgQ09OVEVYVF9CTE9DS19PVVQsIGZhbHNlLCB0cnVlKTtcbiAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuXG4gIGlmIChzdGF0ZS5jaGVja0xpbmVCcmVha3MgJiZcbiAgICAgIFBBVFRFUk5fTk9OX0FTQ0lJX0xJTkVfQlJFQUtTLnRlc3Qoc3RhdGUuaW5wdXQuc2xpY2UoZG9jdW1lbnRTdGFydCwgc3RhdGUucG9zaXRpb24pKSkge1xuICAgIHRocm93V2FybmluZyhzdGF0ZSwgJ25vbi1BU0NJSSBsaW5lIGJyZWFrcyBhcmUgaW50ZXJwcmV0ZWQgYXMgY29udGVudCcpO1xuICB9XG5cbiAgc3RhdGUuZG9jdW1lbnRzLnB1c2goc3RhdGUucmVzdWx0KTtcblxuICBpZiAoc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLmxpbmVTdGFydCAmJiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpKSB7XG5cbiAgICBpZiAoc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikgPT09IDB4MkUvKiAuICovKSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbiArPSAzO1xuICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoc3RhdGUucG9zaXRpb24gPCAoc3RhdGUubGVuZ3RoIC0gMSkpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZW5kIG9mIHRoZSBzdHJlYW0gb3IgYSBkb2N1bWVudCBzZXBhcmF0b3IgaXMgZXhwZWN0ZWQnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBsb2FkRG9jdW1lbnRzKGlucHV0LCBvcHRpb25zKSB7XG4gIGlucHV0ID0gU3RyaW5nKGlucHV0KTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgaWYgKGlucHV0Lmxlbmd0aCAhPT0gMCkge1xuXG4gICAgLy8gQWRkIHRhaWxpbmcgYFxcbmAgaWYgbm90IGV4aXN0c1xuICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KGlucHV0Lmxlbmd0aCAtIDEpICE9PSAweDBBLyogTEYgKi8gJiZcbiAgICAgICAgaW5wdXQuY2hhckNvZGVBdChpbnB1dC5sZW5ndGggLSAxKSAhPT0gMHgwRC8qIENSICovKSB7XG4gICAgICBpbnB1dCArPSAnXFxuJztcbiAgICB9XG5cbiAgICAvLyBTdHJpcCBCT01cbiAgICBpZiAoaW5wdXQuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGKSB7XG4gICAgICBpbnB1dCA9IGlucHV0LnNsaWNlKDEpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBzdGF0ZSA9IG5ldyBTdGF0ZSQxKGlucHV0LCBvcHRpb25zKTtcblxuICB2YXIgbnVsbHBvcyA9IGlucHV0LmluZGV4T2YoJ1xcMCcpO1xuXG4gIGlmIChudWxscG9zICE9PSAtMSkge1xuICAgIHN0YXRlLnBvc2l0aW9uID0gbnVsbHBvcztcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbnVsbCBieXRlIGlzIG5vdCBhbGxvd2VkIGluIGlucHV0Jyk7XG4gIH1cblxuICAvLyBVc2UgMCBhcyBzdHJpbmcgdGVybWluYXRvci4gVGhhdCBzaWduaWZpY2FudGx5IHNpbXBsaWZpZXMgYm91bmRzIGNoZWNrLlxuICBzdGF0ZS5pbnB1dCArPSAnXFwwJztcblxuICB3aGlsZSAoc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikgPT09IDB4MjAvKiBTcGFjZSAqLykge1xuICAgIHN0YXRlLmxpbmVJbmRlbnQgKz0gMTtcbiAgICBzdGF0ZS5wb3NpdGlvbiArPSAxO1xuICB9XG5cbiAgd2hpbGUgKHN0YXRlLnBvc2l0aW9uIDwgKHN0YXRlLmxlbmd0aCAtIDEpKSB7XG4gICAgcmVhZERvY3VtZW50KHN0YXRlKTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZS5kb2N1bWVudHM7XG59XG5cblxuZnVuY3Rpb24gbG9hZEFsbCQxKGlucHV0LCBpdGVyYXRvciwgb3B0aW9ucykge1xuICBpZiAoaXRlcmF0b3IgIT09IG51bGwgJiYgdHlwZW9mIGl0ZXJhdG9yID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBvcHRpb25zID0gaXRlcmF0b3I7XG4gICAgaXRlcmF0b3IgPSBudWxsO1xuICB9XG5cbiAgdmFyIGRvY3VtZW50cyA9IGxvYWREb2N1bWVudHMoaW5wdXQsIG9wdGlvbnMpO1xuXG4gIGlmICh0eXBlb2YgaXRlcmF0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRzO1xuICB9XG5cbiAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGggPSBkb2N1bWVudHMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIGl0ZXJhdG9yKGRvY3VtZW50c1tpbmRleF0pO1xuICB9XG59XG5cblxuZnVuY3Rpb24gbG9hZCQxKGlucHV0LCBvcHRpb25zKSB7XG4gIHZhciBkb2N1bWVudHMgPSBsb2FkRG9jdW1lbnRzKGlucHV0LCBvcHRpb25zKTtcblxuICBpZiAoZG9jdW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIC8qZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkKi9cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKGRvY3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRzWzBdO1xuICB9XG4gIHRocm93IG5ldyBleGNlcHRpb24oJ2V4cGVjdGVkIGEgc2luZ2xlIGRvY3VtZW50IGluIHRoZSBzdHJlYW0sIGJ1dCBmb3VuZCBtb3JlJyk7XG59XG5cblxudmFyIGxvYWRBbGxfMSA9IGxvYWRBbGwkMTtcbnZhciBsb2FkXzEgICAgPSBsb2FkJDE7XG5cbnZhciBsb2FkZXIgPSB7XG5cdGxvYWRBbGw6IGxvYWRBbGxfMSxcblx0bG9hZDogbG9hZF8xXG59O1xuXG4vKmVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lKi9cblxuXG5cblxuXG52YXIgX3RvU3RyaW5nICAgICAgID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgQ0hBUl9CT00gICAgICAgICAgICAgICAgICA9IDB4RkVGRjtcbnZhciBDSEFSX1RBQiAgICAgICAgICAgICAgICAgID0gMHgwOTsgLyogVGFiICovXG52YXIgQ0hBUl9MSU5FX0ZFRUQgICAgICAgICAgICA9IDB4MEE7IC8qIExGICovXG52YXIgQ0hBUl9DQVJSSUFHRV9SRVRVUk4gICAgICA9IDB4MEQ7IC8qIENSICovXG52YXIgQ0hBUl9TUEFDRSAgICAgICAgICAgICAgICA9IDB4MjA7IC8qIFNwYWNlICovXG52YXIgQ0hBUl9FWENMQU1BVElPTiAgICAgICAgICA9IDB4MjE7IC8qICEgKi9cbnZhciBDSEFSX0RPVUJMRV9RVU9URSAgICAgICAgID0gMHgyMjsgLyogXCIgKi9cbnZhciBDSEFSX1NIQVJQICAgICAgICAgICAgICAgID0gMHgyMzsgLyogIyAqL1xudmFyIENIQVJfUEVSQ0VOVCAgICAgICAgICAgICAgPSAweDI1OyAvKiAlICovXG52YXIgQ0hBUl9BTVBFUlNBTkQgICAgICAgICAgICA9IDB4MjY7IC8qICYgKi9cbnZhciBDSEFSX1NJTkdMRV9RVU9URSAgICAgICAgID0gMHgyNzsgLyogJyAqL1xudmFyIENIQVJfQVNURVJJU0sgICAgICAgICAgICAgPSAweDJBOyAvKiAqICovXG52YXIgQ0hBUl9DT01NQSAgICAgICAgICAgICAgICA9IDB4MkM7IC8qICwgKi9cbnZhciBDSEFSX01JTlVTICAgICAgICAgICAgICAgID0gMHgyRDsgLyogLSAqL1xudmFyIENIQVJfQ09MT04gICAgICAgICAgICAgICAgPSAweDNBOyAvKiA6ICovXG52YXIgQ0hBUl9FUVVBTFMgICAgICAgICAgICAgICA9IDB4M0Q7IC8qID0gKi9cbnZhciBDSEFSX0dSRUFURVJfVEhBTiAgICAgICAgID0gMHgzRTsgLyogPiAqL1xudmFyIENIQVJfUVVFU1RJT04gICAgICAgICAgICAgPSAweDNGOyAvKiA/ICovXG52YXIgQ0hBUl9DT01NRVJDSUFMX0FUICAgICAgICA9IDB4NDA7IC8qIEAgKi9cbnZhciBDSEFSX0xFRlRfU1FVQVJFX0JSQUNLRVQgID0gMHg1QjsgLyogWyAqL1xudmFyIENIQVJfUklHSFRfU1FVQVJFX0JSQUNLRVQgPSAweDVEOyAvKiBdICovXG52YXIgQ0hBUl9HUkFWRV9BQ0NFTlQgICAgICAgICA9IDB4NjA7IC8qIGAgKi9cbnZhciBDSEFSX0xFRlRfQ1VSTFlfQlJBQ0tFVCAgID0gMHg3QjsgLyogeyAqL1xudmFyIENIQVJfVkVSVElDQUxfTElORSAgICAgICAgPSAweDdDOyAvKiB8ICovXG52YXIgQ0hBUl9SSUdIVF9DVVJMWV9CUkFDS0VUICA9IDB4N0Q7IC8qIH0gKi9cblxudmFyIEVTQ0FQRV9TRVFVRU5DRVMgPSB7fTtcblxuRVNDQVBFX1NFUVVFTkNFU1sweDAwXSAgID0gJ1xcXFwwJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwN10gICA9ICdcXFxcYSc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDhdICAgPSAnXFxcXGInO1xuRVNDQVBFX1NFUVVFTkNFU1sweDA5XSAgID0gJ1xcXFx0JztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwQV0gICA9ICdcXFxcbic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MEJdICAgPSAnXFxcXHYnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBDXSAgID0gJ1xcXFxmJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwRF0gICA9ICdcXFxccic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MUJdICAgPSAnXFxcXGUnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDIyXSAgID0gJ1xcXFxcIic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4NUNdICAgPSAnXFxcXFxcXFwnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDg1XSAgID0gJ1xcXFxOJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHhBMF0gICA9ICdcXFxcXyc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MjAyOF0gPSAnXFxcXEwnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDIwMjldID0gJ1xcXFxQJztcblxudmFyIERFUFJFQ0FURURfQk9PTEVBTlNfU1lOVEFYID0gW1xuICAneScsICdZJywgJ3llcycsICdZZXMnLCAnWUVTJywgJ29uJywgJ09uJywgJ09OJyxcbiAgJ24nLCAnTicsICdubycsICdObycsICdOTycsICdvZmYnLCAnT2ZmJywgJ09GRidcbl07XG5cbnZhciBERVBSRUNBVEVEX0JBU0U2MF9TWU5UQVggPSAvXlstK10/WzAtOV9dKyg/OjpbMC05X10rKSsoPzpcXC5bMC05X10qKT8kLztcblxuZnVuY3Rpb24gY29tcGlsZVN0eWxlTWFwKHNjaGVtYSwgbWFwKSB7XG4gIHZhciByZXN1bHQsIGtleXMsIGluZGV4LCBsZW5ndGgsIHRhZywgc3R5bGUsIHR5cGU7XG5cbiAgaWYgKG1hcCA9PT0gbnVsbCkgcmV0dXJuIHt9O1xuXG4gIHJlc3VsdCA9IHt9O1xuICBrZXlzID0gT2JqZWN0LmtleXMobWFwKTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdGFnID0ga2V5c1tpbmRleF07XG4gICAgc3R5bGUgPSBTdHJpbmcobWFwW3RhZ10pO1xuXG4gICAgaWYgKHRhZy5zbGljZSgwLCAyKSA9PT0gJyEhJykge1xuICAgICAgdGFnID0gJ3RhZzp5YW1sLm9yZywyMDAyOicgKyB0YWcuc2xpY2UoMik7XG4gICAgfVxuICAgIHR5cGUgPSBzY2hlbWEuY29tcGlsZWRUeXBlTWFwWydmYWxsYmFjayddW3RhZ107XG5cbiAgICBpZiAodHlwZSAmJiBfaGFzT3duUHJvcGVydHkuY2FsbCh0eXBlLnN0eWxlQWxpYXNlcywgc3R5bGUpKSB7XG4gICAgICBzdHlsZSA9IHR5cGUuc3R5bGVBbGlhc2VzW3N0eWxlXTtcbiAgICB9XG5cbiAgICByZXN1bHRbdGFnXSA9IHN0eWxlO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZW5jb2RlSGV4KGNoYXJhY3Rlcikge1xuICB2YXIgc3RyaW5nLCBoYW5kbGUsIGxlbmd0aDtcblxuICBzdHJpbmcgPSBjaGFyYWN0ZXIudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cbiAgaWYgKGNoYXJhY3RlciA8PSAweEZGKSB7XG4gICAgaGFuZGxlID0gJ3gnO1xuICAgIGxlbmd0aCA9IDI7XG4gIH0gZWxzZSBpZiAoY2hhcmFjdGVyIDw9IDB4RkZGRikge1xuICAgIGhhbmRsZSA9ICd1JztcbiAgICBsZW5ndGggPSA0O1xuICB9IGVsc2UgaWYgKGNoYXJhY3RlciA8PSAweEZGRkZGRkZGKSB7XG4gICAgaGFuZGxlID0gJ1UnO1xuICAgIGxlbmd0aCA9IDg7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignY29kZSBwb2ludCB3aXRoaW4gYSBzdHJpbmcgbWF5IG5vdCBiZSBncmVhdGVyIHRoYW4gMHhGRkZGRkZGRicpO1xuICB9XG5cbiAgcmV0dXJuICdcXFxcJyArIGhhbmRsZSArIGNvbW1vbi5yZXBlYXQoJzAnLCBsZW5ndGggLSBzdHJpbmcubGVuZ3RoKSArIHN0cmluZztcbn1cblxuXG52YXIgUVVPVElOR19UWVBFX1NJTkdMRSA9IDEsXG4gICAgUVVPVElOR19UWVBFX0RPVUJMRSA9IDI7XG5cbmZ1bmN0aW9uIFN0YXRlKG9wdGlvbnMpIHtcbiAgdGhpcy5zY2hlbWEgICAgICAgID0gb3B0aW9uc1snc2NoZW1hJ10gfHwgX2RlZmF1bHQ7XG4gIHRoaXMuaW5kZW50ICAgICAgICA9IE1hdGgubWF4KDEsIChvcHRpb25zWydpbmRlbnQnXSB8fCAyKSk7XG4gIHRoaXMubm9BcnJheUluZGVudCA9IG9wdGlvbnNbJ25vQXJyYXlJbmRlbnQnXSB8fCBmYWxzZTtcbiAgdGhpcy5za2lwSW52YWxpZCAgID0gb3B0aW9uc1snc2tpcEludmFsaWQnXSB8fCBmYWxzZTtcbiAgdGhpcy5mbG93TGV2ZWwgICAgID0gKGNvbW1vbi5pc05vdGhpbmcob3B0aW9uc1snZmxvd0xldmVsJ10pID8gLTEgOiBvcHRpb25zWydmbG93TGV2ZWwnXSk7XG4gIHRoaXMuc3R5bGVNYXAgICAgICA9IGNvbXBpbGVTdHlsZU1hcCh0aGlzLnNjaGVtYSwgb3B0aW9uc1snc3R5bGVzJ10gfHwgbnVsbCk7XG4gIHRoaXMuc29ydEtleXMgICAgICA9IG9wdGlvbnNbJ3NvcnRLZXlzJ10gfHwgZmFsc2U7XG4gIHRoaXMubGluZVdpZHRoICAgICA9IG9wdGlvbnNbJ2xpbmVXaWR0aCddIHx8IDgwO1xuICB0aGlzLm5vUmVmcyAgICAgICAgPSBvcHRpb25zWydub1JlZnMnXSB8fCBmYWxzZTtcbiAgdGhpcy5ub0NvbXBhdE1vZGUgID0gb3B0aW9uc1snbm9Db21wYXRNb2RlJ10gfHwgZmFsc2U7XG4gIHRoaXMuY29uZGVuc2VGbG93ICA9IG9wdGlvbnNbJ2NvbmRlbnNlRmxvdyddIHx8IGZhbHNlO1xuICB0aGlzLnF1b3RpbmdUeXBlICAgPSBvcHRpb25zWydxdW90aW5nVHlwZSddID09PSAnXCInID8gUVVPVElOR19UWVBFX0RPVUJMRSA6IFFVT1RJTkdfVFlQRV9TSU5HTEU7XG4gIHRoaXMuZm9yY2VRdW90ZXMgICA9IG9wdGlvbnNbJ2ZvcmNlUXVvdGVzJ10gfHwgZmFsc2U7XG4gIHRoaXMucmVwbGFjZXIgICAgICA9IHR5cGVvZiBvcHRpb25zWydyZXBsYWNlciddID09PSAnZnVuY3Rpb24nID8gb3B0aW9uc1sncmVwbGFjZXInXSA6IG51bGw7XG5cbiAgdGhpcy5pbXBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdDtcbiAgdGhpcy5leHBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRFeHBsaWNpdDtcblxuICB0aGlzLnRhZyA9IG51bGw7XG4gIHRoaXMucmVzdWx0ID0gJyc7XG5cbiAgdGhpcy5kdXBsaWNhdGVzID0gW107XG4gIHRoaXMudXNlZER1cGxpY2F0ZXMgPSBudWxsO1xufVxuXG4vLyBJbmRlbnRzIGV2ZXJ5IGxpbmUgaW4gYSBzdHJpbmcuIEVtcHR5IGxpbmVzIChcXG4gb25seSkgYXJlIG5vdCBpbmRlbnRlZC5cbmZ1bmN0aW9uIGluZGVudFN0cmluZyhzdHJpbmcsIHNwYWNlcykge1xuICB2YXIgaW5kID0gY29tbW9uLnJlcGVhdCgnICcsIHNwYWNlcyksXG4gICAgICBwb3NpdGlvbiA9IDAsXG4gICAgICBuZXh0ID0gLTEsXG4gICAgICByZXN1bHQgPSAnJyxcbiAgICAgIGxpbmUsXG4gICAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgIG5leHQgPSBzdHJpbmcuaW5kZXhPZignXFxuJywgcG9zaXRpb24pO1xuICAgIGlmIChuZXh0ID09PSAtMSkge1xuICAgICAgbGluZSA9IHN0cmluZy5zbGljZShwb3NpdGlvbik7XG4gICAgICBwb3NpdGlvbiA9IGxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGluZSA9IHN0cmluZy5zbGljZShwb3NpdGlvbiwgbmV4dCArIDEpO1xuICAgICAgcG9zaXRpb24gPSBuZXh0ICsgMTtcbiAgICB9XG5cbiAgICBpZiAobGluZS5sZW5ndGggJiYgbGluZSAhPT0gJ1xcbicpIHJlc3VsdCArPSBpbmQ7XG5cbiAgICByZXN1bHQgKz0gbGluZTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKSB7XG4gIHJldHVybiAnXFxuJyArIGNvbW1vbi5yZXBlYXQoJyAnLCBzdGF0ZS5pbmRlbnQgKiBsZXZlbCk7XG59XG5cbmZ1bmN0aW9uIHRlc3RJbXBsaWNpdFJlc29sdmluZyhzdGF0ZSwgc3RyKSB7XG4gIHZhciBpbmRleCwgbGVuZ3RoLCB0eXBlO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBzdGF0ZS5pbXBsaWNpdFR5cGVzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB0eXBlID0gc3RhdGUuaW1wbGljaXRUeXBlc1tpbmRleF07XG5cbiAgICBpZiAodHlwZS5yZXNvbHZlKHN0cikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gWzMzXSBzLXdoaXRlIDo6PSBzLXNwYWNlIHwgcy10YWJcbmZ1bmN0aW9uIGlzV2hpdGVzcGFjZShjKSB7XG4gIHJldHVybiBjID09PSBDSEFSX1NQQUNFIHx8IGMgPT09IENIQVJfVEFCO1xufVxuXG4vLyBSZXR1cm5zIHRydWUgaWYgdGhlIGNoYXJhY3RlciBjYW4gYmUgcHJpbnRlZCB3aXRob3V0IGVzY2FwaW5nLlxuLy8gRnJvbSBZQU1MIDEuMjogXCJhbnkgYWxsb3dlZCBjaGFyYWN0ZXJzIGtub3duIHRvIGJlIG5vbi1wcmludGFibGVcbi8vIHNob3VsZCBhbHNvIGJlIGVzY2FwZWQuIFtIb3dldmVyLF0gVGhpcyBpc25cdTIwMTl0IG1hbmRhdG9yeVwiXG4vLyBEZXJpdmVkIGZyb20gbmItY2hhciAtIFxcdCAtICN4ODUgLSAjeEEwIC0gI3gyMDI4IC0gI3gyMDI5LlxuZnVuY3Rpb24gaXNQcmludGFibGUoYykge1xuICByZXR1cm4gICgweDAwMDIwIDw9IGMgJiYgYyA8PSAweDAwMDA3RSlcbiAgICAgIHx8ICgoMHgwMDBBMSA8PSBjICYmIGMgPD0gMHgwMEQ3RkYpICYmIGMgIT09IDB4MjAyOCAmJiBjICE9PSAweDIwMjkpXG4gICAgICB8fCAoKDB4MEUwMDAgPD0gYyAmJiBjIDw9IDB4MDBGRkZEKSAmJiBjICE9PSBDSEFSX0JPTSlcbiAgICAgIHx8ICAoMHgxMDAwMCA8PSBjICYmIGMgPD0gMHgxMEZGRkYpO1xufVxuXG4vLyBbMzRdIG5zLWNoYXIgOjo9IG5iLWNoYXIgLSBzLXdoaXRlXG4vLyBbMjddIG5iLWNoYXIgOjo9IGMtcHJpbnRhYmxlIC0gYi1jaGFyIC0gYy1ieXRlLW9yZGVyLW1hcmtcbi8vIFsyNl0gYi1jaGFyICA6Oj0gYi1saW5lLWZlZWQgfCBiLWNhcnJpYWdlLXJldHVyblxuLy8gSW5jbHVkaW5nIHMtd2hpdGUgKGZvciBzb21lIHJlYXNvbiwgZXhhbXBsZXMgZG9lc24ndCBtYXRjaCBzcGVjcyBpbiB0aGlzIGFzcGVjdClcbi8vIG5zLWNoYXIgOjo9IGMtcHJpbnRhYmxlIC0gYi1saW5lLWZlZWQgLSBiLWNhcnJpYWdlLXJldHVybiAtIGMtYnl0ZS1vcmRlci1tYXJrXG5mdW5jdGlvbiBpc05zQ2hhck9yV2hpdGVzcGFjZShjKSB7XG4gIHJldHVybiBpc1ByaW50YWJsZShjKVxuICAgICYmIGMgIT09IENIQVJfQk9NXG4gICAgLy8gLSBiLWNoYXJcbiAgICAmJiBjICE9PSBDSEFSX0NBUlJJQUdFX1JFVFVSTlxuICAgICYmIGMgIT09IENIQVJfTElORV9GRUVEO1xufVxuXG4vLyBbMTI3XSAgbnMtcGxhaW4tc2FmZShjKSA6Oj0gYyA9IGZsb3ctb3V0ICBcdTIxRDIgbnMtcGxhaW4tc2FmZS1vdXRcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZmxvdy1pbiAgIFx1MjFEMiBucy1wbGFpbi1zYWZlLWluXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGJsb2NrLWtleSBcdTIxRDIgbnMtcGxhaW4tc2FmZS1vdXRcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZmxvdy1rZXkgIFx1MjFEMiBucy1wbGFpbi1zYWZlLWluXG4vLyBbMTI4XSBucy1wbGFpbi1zYWZlLW91dCA6Oj0gbnMtY2hhclxuLy8gWzEyOV0gIG5zLXBsYWluLXNhZmUtaW4gOjo9IG5zLWNoYXIgLSBjLWZsb3ctaW5kaWNhdG9yXG4vLyBbMTMwXSAgbnMtcGxhaW4tY2hhcihjKSA6Oj0gICggbnMtcGxhaW4tc2FmZShjKSAtIFx1MjAxQzpcdTIwMUQgLSBcdTIwMUMjXHUyMDFEIClcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKCAvKiBBbiBucy1jaGFyIHByZWNlZGluZyAqLyBcdTIwMUMjXHUyMDFEIClcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKCBcdTIwMUM6XHUyMDFEIC8qIEZvbGxvd2VkIGJ5IGFuIG5zLXBsYWluLXNhZmUoYykgKi8gKVxuZnVuY3Rpb24gaXNQbGFpblNhZmUoYywgcHJldiwgaW5ibG9jaykge1xuICB2YXIgY0lzTnNDaGFyT3JXaGl0ZXNwYWNlID0gaXNOc0NoYXJPcldoaXRlc3BhY2UoYyk7XG4gIHZhciBjSXNOc0NoYXIgPSBjSXNOc0NoYXJPcldoaXRlc3BhY2UgJiYgIWlzV2hpdGVzcGFjZShjKTtcbiAgcmV0dXJuIChcbiAgICAvLyBucy1wbGFpbi1zYWZlXG4gICAgaW5ibG9jayA/IC8vIGMgPSBmbG93LWluXG4gICAgICBjSXNOc0NoYXJPcldoaXRlc3BhY2VcbiAgICAgIDogY0lzTnNDaGFyT3JXaGl0ZXNwYWNlXG4gICAgICAgIC8vIC0gYy1mbG93LWluZGljYXRvclxuICAgICAgICAmJiBjICE9PSBDSEFSX0NPTU1BXG4gICAgICAgICYmIGMgIT09IENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVFxuICAgICAgICAmJiBjICE9PSBDSEFSX1JJR0hUX1NRVUFSRV9CUkFDS0VUXG4gICAgICAgICYmIGMgIT09IENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUXG4gICAgICAgICYmIGMgIT09IENIQVJfUklHSFRfQ1VSTFlfQlJBQ0tFVFxuICApXG4gICAgLy8gbnMtcGxhaW4tY2hhclxuICAgICYmIGMgIT09IENIQVJfU0hBUlAgLy8gZmFsc2Ugb24gJyMnXG4gICAgJiYgIShwcmV2ID09PSBDSEFSX0NPTE9OICYmICFjSXNOc0NoYXIpIC8vIGZhbHNlIG9uICc6ICdcbiAgICB8fCAoaXNOc0NoYXJPcldoaXRlc3BhY2UocHJldikgJiYgIWlzV2hpdGVzcGFjZShwcmV2KSAmJiBjID09PSBDSEFSX1NIQVJQKSAvLyBjaGFuZ2UgdG8gdHJ1ZSBvbiAnW14gXSMnXG4gICAgfHwgKHByZXYgPT09IENIQVJfQ09MT04gJiYgY0lzTnNDaGFyKTsgLy8gY2hhbmdlIHRvIHRydWUgb24gJzpbXiBdJ1xufVxuXG4vLyBTaW1wbGlmaWVkIHRlc3QgZm9yIHZhbHVlcyBhbGxvd2VkIGFzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgaW4gcGxhaW4gc3R5bGUuXG5mdW5jdGlvbiBpc1BsYWluU2FmZUZpcnN0KGMpIHtcbiAgLy8gVXNlcyBhIHN1YnNldCBvZiBucy1jaGFyIC0gYy1pbmRpY2F0b3JcbiAgLy8gd2hlcmUgbnMtY2hhciA9IG5iLWNoYXIgLSBzLXdoaXRlLlxuICAvLyBObyBzdXBwb3J0IG9mICggKCBcdTIwMUM/XHUyMDFEIHwgXHUyMDFDOlx1MjAxRCB8IFx1MjAxQy1cdTIwMUQgKSAvKiBGb2xsb3dlZCBieSBhbiBucy1wbGFpbi1zYWZlKGMpKSAqLyApIHBhcnRcbiAgcmV0dXJuIGlzUHJpbnRhYmxlKGMpICYmIGMgIT09IENIQVJfQk9NXG4gICAgJiYgIWlzV2hpdGVzcGFjZShjKSAvLyAtIHMtd2hpdGVcbiAgICAvLyAtIChjLWluZGljYXRvciA6Oj1cbiAgICAvLyBcdTIwMUMtXHUyMDFEIHwgXHUyMDFDP1x1MjAxRCB8IFx1MjAxQzpcdTIwMUQgfCBcdTIwMUMsXHUyMDFEIHwgXHUyMDFDW1x1MjAxRCB8IFx1MjAxQ11cdTIwMUQgfCBcdTIwMUN7XHUyMDFEIHwgXHUyMDFDfVx1MjAxRFxuICAgICYmIGMgIT09IENIQVJfTUlOVVNcbiAgICAmJiBjICE9PSBDSEFSX1FVRVNUSU9OXG4gICAgJiYgYyAhPT0gQ0hBUl9DT0xPTlxuICAgICYmIGMgIT09IENIQVJfQ09NTUFcbiAgICAmJiBjICE9PSBDSEFSX0xFRlRfU1FVQVJFX0JSQUNLRVRcbiAgICAmJiBjICE9PSBDSEFSX1JJR0hUX1NRVUFSRV9CUkFDS0VUXG4gICAgJiYgYyAhPT0gQ0hBUl9MRUZUX0NVUkxZX0JSQUNLRVRcbiAgICAmJiBjICE9PSBDSEFSX1JJR0hUX0NVUkxZX0JSQUNLRVRcbiAgICAvLyB8IFx1MjAxQyNcdTIwMUQgfCBcdTIwMUMmXHUyMDFEIHwgXHUyMDFDKlx1MjAxRCB8IFx1MjAxQyFcdTIwMUQgfCBcdTIwMUN8XHUyMDFEIHwgXHUyMDFDPVx1MjAxRCB8IFx1MjAxQz5cdTIwMUQgfCBcdTIwMUMnXHUyMDFEIHwgXHUyMDFDXCJcdTIwMURcbiAgICAmJiBjICE9PSBDSEFSX1NIQVJQXG4gICAgJiYgYyAhPT0gQ0hBUl9BTVBFUlNBTkRcbiAgICAmJiBjICE9PSBDSEFSX0FTVEVSSVNLXG4gICAgJiYgYyAhPT0gQ0hBUl9FWENMQU1BVElPTlxuICAgICYmIGMgIT09IENIQVJfVkVSVElDQUxfTElORVxuICAgICYmIGMgIT09IENIQVJfRVFVQUxTXG4gICAgJiYgYyAhPT0gQ0hBUl9HUkVBVEVSX1RIQU5cbiAgICAmJiBjICE9PSBDSEFSX1NJTkdMRV9RVU9URVxuICAgICYmIGMgIT09IENIQVJfRE9VQkxFX1FVT1RFXG4gICAgLy8gfCBcdTIwMUMlXHUyMDFEIHwgXHUyMDFDQFx1MjAxRCB8IFx1MjAxQ2BcdTIwMUQpXG4gICAgJiYgYyAhPT0gQ0hBUl9QRVJDRU5UXG4gICAgJiYgYyAhPT0gQ0hBUl9DT01NRVJDSUFMX0FUXG4gICAgJiYgYyAhPT0gQ0hBUl9HUkFWRV9BQ0NFTlQ7XG59XG5cbi8vIFNpbXBsaWZpZWQgdGVzdCBmb3IgdmFsdWVzIGFsbG93ZWQgYXMgdGhlIGxhc3QgY2hhcmFjdGVyIGluIHBsYWluIHN0eWxlLlxuZnVuY3Rpb24gaXNQbGFpblNhZmVMYXN0KGMpIHtcbiAgLy8ganVzdCBub3Qgd2hpdGVzcGFjZSBvciBjb2xvbiwgaXQgd2lsbCBiZSBjaGVja2VkIHRvIGJlIHBsYWluIGNoYXJhY3RlciBsYXRlclxuICByZXR1cm4gIWlzV2hpdGVzcGFjZShjKSAmJiBjICE9PSBDSEFSX0NPTE9OO1xufVxuXG4vLyBTYW1lIGFzICdzdHJpbmcnLmNvZGVQb2ludEF0KHBvcyksIGJ1dCB3b3JrcyBpbiBvbGRlciBicm93c2Vycy5cbmZ1bmN0aW9uIGNvZGVQb2ludEF0KHN0cmluZywgcG9zKSB7XG4gIHZhciBmaXJzdCA9IHN0cmluZy5jaGFyQ29kZUF0KHBvcyksIHNlY29uZDtcbiAgaWYgKGZpcnN0ID49IDB4RDgwMCAmJiBmaXJzdCA8PSAweERCRkYgJiYgcG9zICsgMSA8IHN0cmluZy5sZW5ndGgpIHtcbiAgICBzZWNvbmQgPSBzdHJpbmcuY2hhckNvZGVBdChwb3MgKyAxKTtcbiAgICBpZiAoc2Vjb25kID49IDB4REMwMCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAvLyBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZyNzdXJyb2dhdGUtZm9ybXVsYWVcbiAgICAgIHJldHVybiAoZmlyc3QgLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmlyc3Q7XG59XG5cbi8vIERldGVybWluZXMgd2hldGhlciBibG9jayBpbmRlbnRhdGlvbiBpbmRpY2F0b3IgaXMgcmVxdWlyZWQuXG5mdW5jdGlvbiBuZWVkSW5kZW50SW5kaWNhdG9yKHN0cmluZykge1xuICB2YXIgbGVhZGluZ1NwYWNlUmUgPSAvXlxcbiogLztcbiAgcmV0dXJuIGxlYWRpbmdTcGFjZVJlLnRlc3Qoc3RyaW5nKTtcbn1cblxudmFyIFNUWUxFX1BMQUlOICAgPSAxLFxuICAgIFNUWUxFX1NJTkdMRSAgPSAyLFxuICAgIFNUWUxFX0xJVEVSQUwgPSAzLFxuICAgIFNUWUxFX0ZPTERFRCAgPSA0LFxuICAgIFNUWUxFX0RPVUJMRSAgPSA1O1xuXG4vLyBEZXRlcm1pbmVzIHdoaWNoIHNjYWxhciBzdHlsZXMgYXJlIHBvc3NpYmxlIGFuZCByZXR1cm5zIHRoZSBwcmVmZXJyZWQgc3R5bGUuXG4vLyBsaW5lV2lkdGggPSAtMSA9PiBubyBsaW1pdC5cbi8vIFByZS1jb25kaXRpb25zOiBzdHIubGVuZ3RoID4gMC5cbi8vIFBvc3QtY29uZGl0aW9uczpcbi8vICAgIFNUWUxFX1BMQUlOIG9yIFNUWUxFX1NJTkdMRSA9PiBubyBcXG4gYXJlIGluIHRoZSBzdHJpbmcuXG4vLyAgICBTVFlMRV9MSVRFUkFMID0+IG5vIGxpbmVzIGFyZSBzdWl0YWJsZSBmb3IgZm9sZGluZyAob3IgbGluZVdpZHRoIGlzIC0xKS5cbi8vICAgIFNUWUxFX0ZPTERFRCA9PiBhIGxpbmUgPiBsaW5lV2lkdGggYW5kIGNhbiBiZSBmb2xkZWQgKGFuZCBsaW5lV2lkdGggIT0gLTEpLlxuZnVuY3Rpb24gY2hvb3NlU2NhbGFyU3R5bGUoc3RyaW5nLCBzaW5nbGVMaW5lT25seSwgaW5kZW50UGVyTGV2ZWwsIGxpbmVXaWR0aCxcbiAgdGVzdEFtYmlndW91c1R5cGUsIHF1b3RpbmdUeXBlLCBmb3JjZVF1b3RlcywgaW5ibG9jaykge1xuXG4gIHZhciBpO1xuICB2YXIgY2hhciA9IDA7XG4gIHZhciBwcmV2Q2hhciA9IG51bGw7XG4gIHZhciBoYXNMaW5lQnJlYWsgPSBmYWxzZTtcbiAgdmFyIGhhc0ZvbGRhYmxlTGluZSA9IGZhbHNlOyAvLyBvbmx5IGNoZWNrZWQgaWYgc2hvdWxkVHJhY2tXaWR0aFxuICB2YXIgc2hvdWxkVHJhY2tXaWR0aCA9IGxpbmVXaWR0aCAhPT0gLTE7XG4gIHZhciBwcmV2aW91c0xpbmVCcmVhayA9IC0xOyAvLyBjb3VudCB0aGUgZmlyc3QgbGluZSBjb3JyZWN0bHlcbiAgdmFyIHBsYWluID0gaXNQbGFpblNhZmVGaXJzdChjb2RlUG9pbnRBdChzdHJpbmcsIDApKVxuICAgICAgICAgICYmIGlzUGxhaW5TYWZlTGFzdChjb2RlUG9pbnRBdChzdHJpbmcsIHN0cmluZy5sZW5ndGggLSAxKSk7XG5cbiAgaWYgKHNpbmdsZUxpbmVPbmx5IHx8IGZvcmNlUXVvdGVzKSB7XG4gICAgLy8gQ2FzZTogbm8gYmxvY2sgc3R5bGVzLlxuICAgIC8vIENoZWNrIGZvciBkaXNhbGxvd2VkIGNoYXJhY3RlcnMgdG8gcnVsZSBvdXQgcGxhaW4gYW5kIHNpbmdsZS5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgY2hhciA+PSAweDEwMDAwID8gaSArPSAyIDogaSsrKSB7XG4gICAgICBjaGFyID0gY29kZVBvaW50QXQoc3RyaW5nLCBpKTtcbiAgICAgIGlmICghaXNQcmludGFibGUoY2hhcikpIHtcbiAgICAgICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgICAgIH1cbiAgICAgIHBsYWluID0gcGxhaW4gJiYgaXNQbGFpblNhZmUoY2hhciwgcHJldkNoYXIsIGluYmxvY2spO1xuICAgICAgcHJldkNoYXIgPSBjaGFyO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBDYXNlOiBibG9jayBzdHlsZXMgcGVybWl0dGVkLlxuICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBjaGFyID49IDB4MTAwMDAgPyBpICs9IDIgOiBpKyspIHtcbiAgICAgIGNoYXIgPSBjb2RlUG9pbnRBdChzdHJpbmcsIGkpO1xuICAgICAgaWYgKGNoYXIgPT09IENIQVJfTElORV9GRUVEKSB7XG4gICAgICAgIGhhc0xpbmVCcmVhayA9IHRydWU7XG4gICAgICAgIC8vIENoZWNrIGlmIGFueSBsaW5lIGNhbiBiZSBmb2xkZWQuXG4gICAgICAgIGlmIChzaG91bGRUcmFja1dpZHRoKSB7XG4gICAgICAgICAgaGFzRm9sZGFibGVMaW5lID0gaGFzRm9sZGFibGVMaW5lIHx8XG4gICAgICAgICAgICAvLyBGb2xkYWJsZSBsaW5lID0gdG9vIGxvbmcsIGFuZCBub3QgbW9yZS1pbmRlbnRlZC5cbiAgICAgICAgICAgIChpIC0gcHJldmlvdXNMaW5lQnJlYWsgLSAxID4gbGluZVdpZHRoICYmXG4gICAgICAgICAgICAgc3RyaW5nW3ByZXZpb3VzTGluZUJyZWFrICsgMV0gIT09ICcgJyk7XG4gICAgICAgICAgcHJldmlvdXNMaW5lQnJlYWsgPSBpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFpc1ByaW50YWJsZShjaGFyKSkge1xuICAgICAgICByZXR1cm4gU1RZTEVfRE9VQkxFO1xuICAgICAgfVxuICAgICAgcGxhaW4gPSBwbGFpbiAmJiBpc1BsYWluU2FmZShjaGFyLCBwcmV2Q2hhciwgaW5ibG9jayk7XG4gICAgICBwcmV2Q2hhciA9IGNoYXI7XG4gICAgfVxuICAgIC8vIGluIGNhc2UgdGhlIGVuZCBpcyBtaXNzaW5nIGEgXFxuXG4gICAgaGFzRm9sZGFibGVMaW5lID0gaGFzRm9sZGFibGVMaW5lIHx8IChzaG91bGRUcmFja1dpZHRoICYmXG4gICAgICAoaSAtIHByZXZpb3VzTGluZUJyZWFrIC0gMSA+IGxpbmVXaWR0aCAmJlxuICAgICAgIHN0cmluZ1twcmV2aW91c0xpbmVCcmVhayArIDFdICE9PSAnICcpKTtcbiAgfVxuICAvLyBBbHRob3VnaCBldmVyeSBzdHlsZSBjYW4gcmVwcmVzZW50IFxcbiB3aXRob3V0IGVzY2FwaW5nLCBwcmVmZXIgYmxvY2sgc3R5bGVzXG4gIC8vIGZvciBtdWx0aWxpbmUsIHNpbmNlIHRoZXkncmUgbW9yZSByZWFkYWJsZSBhbmQgdGhleSBkb24ndCBhZGQgZW1wdHkgbGluZXMuXG4gIC8vIEFsc28gcHJlZmVyIGZvbGRpbmcgYSBzdXBlci1sb25nIGxpbmUuXG4gIGlmICghaGFzTGluZUJyZWFrICYmICFoYXNGb2xkYWJsZUxpbmUpIHtcbiAgICAvLyBTdHJpbmdzIGludGVycHJldGFibGUgYXMgYW5vdGhlciB0eXBlIGhhdmUgdG8gYmUgcXVvdGVkO1xuICAgIC8vIGUuZy4gdGhlIHN0cmluZyAndHJ1ZScgdnMuIHRoZSBib29sZWFuIHRydWUuXG4gICAgaWYgKHBsYWluICYmICFmb3JjZVF1b3RlcyAmJiAhdGVzdEFtYmlndW91c1R5cGUoc3RyaW5nKSkge1xuICAgICAgcmV0dXJuIFNUWUxFX1BMQUlOO1xuICAgIH1cbiAgICByZXR1cm4gcXVvdGluZ1R5cGUgPT09IFFVT1RJTkdfVFlQRV9ET1VCTEUgPyBTVFlMRV9ET1VCTEUgOiBTVFlMRV9TSU5HTEU7XG4gIH1cbiAgLy8gRWRnZSBjYXNlOiBibG9jayBpbmRlbnRhdGlvbiBpbmRpY2F0b3IgY2FuIG9ubHkgaGF2ZSBvbmUgZGlnaXQuXG4gIGlmIChpbmRlbnRQZXJMZXZlbCA+IDkgJiYgbmVlZEluZGVudEluZGljYXRvcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgfVxuICAvLyBBdCB0aGlzIHBvaW50IHdlIGtub3cgYmxvY2sgc3R5bGVzIGFyZSB2YWxpZC5cbiAgLy8gUHJlZmVyIGxpdGVyYWwgc3R5bGUgdW5sZXNzIHdlIHdhbnQgdG8gZm9sZC5cbiAgaWYgKCFmb3JjZVF1b3Rlcykge1xuICAgIHJldHVybiBoYXNGb2xkYWJsZUxpbmUgPyBTVFlMRV9GT0xERUQgOiBTVFlMRV9MSVRFUkFMO1xuICB9XG4gIHJldHVybiBxdW90aW5nVHlwZSA9PT0gUVVPVElOR19UWVBFX0RPVUJMRSA/IFNUWUxFX0RPVUJMRSA6IFNUWUxFX1NJTkdMRTtcbn1cblxuLy8gTm90ZTogbGluZSBicmVha2luZy9mb2xkaW5nIGlzIGltcGxlbWVudGVkIGZvciBvbmx5IHRoZSBmb2xkZWQgc3R5bGUuXG4vLyBOQi4gV2UgZHJvcCB0aGUgbGFzdCB0cmFpbGluZyBuZXdsaW5lIChpZiBhbnkpIG9mIGEgcmV0dXJuZWQgYmxvY2sgc2NhbGFyXG4vLyAgc2luY2UgdGhlIGR1bXBlciBhZGRzIGl0cyBvd24gbmV3bGluZS4gVGhpcyBhbHdheXMgd29ya3M6XG4vLyAgICBcdTIwMjIgTm8gZW5kaW5nIG5ld2xpbmUgPT4gdW5hZmZlY3RlZDsgYWxyZWFkeSB1c2luZyBzdHJpcCBcIi1cIiBjaG9tcGluZy5cbi8vICAgIFx1MjAyMiBFbmRpbmcgbmV3bGluZSAgICA9PiByZW1vdmVkIHRoZW4gcmVzdG9yZWQuXG4vLyAgSW1wb3J0YW50bHksIHRoaXMga2VlcHMgdGhlIFwiK1wiIGNob21wIGluZGljYXRvciBmcm9tIGdhaW5pbmcgYW4gZXh0cmEgbGluZS5cbmZ1bmN0aW9uIHdyaXRlU2NhbGFyKHN0YXRlLCBzdHJpbmcsIGxldmVsLCBpc2tleSwgaW5ibG9jaykge1xuICBzdGF0ZS5kdW1wID0gKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3RyaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHN0YXRlLnF1b3RpbmdUeXBlID09PSBRVU9USU5HX1RZUEVfRE9VQkxFID8gJ1wiXCInIDogXCInJ1wiO1xuICAgIH1cbiAgICBpZiAoIXN0YXRlLm5vQ29tcGF0TW9kZSkge1xuICAgICAgaWYgKERFUFJFQ0FURURfQk9PTEVBTlNfU1lOVEFYLmluZGV4T2Yoc3RyaW5nKSAhPT0gLTEgfHwgREVQUkVDQVRFRF9CQVNFNjBfU1lOVEFYLnRlc3Qoc3RyaW5nKSkge1xuICAgICAgICByZXR1cm4gc3RhdGUucXVvdGluZ1R5cGUgPT09IFFVT1RJTkdfVFlQRV9ET1VCTEUgPyAoJ1wiJyArIHN0cmluZyArICdcIicpIDogKFwiJ1wiICsgc3RyaW5nICsgXCInXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpbmRlbnQgPSBzdGF0ZS5pbmRlbnQgKiBNYXRoLm1heCgxLCBsZXZlbCk7IC8vIG5vIDAtaW5kZW50IHNjYWxhcnNcbiAgICAvLyBBcyBpbmRlbnRhdGlvbiBnZXRzIGRlZXBlciwgbGV0IHRoZSB3aWR0aCBkZWNyZWFzZSBtb25vdG9uaWNhbGx5XG4gICAgLy8gdG8gdGhlIGxvd2VyIGJvdW5kIG1pbihzdGF0ZS5saW5lV2lkdGgsIDQwKS5cbiAgICAvLyBOb3RlIHRoYXQgdGhpcyBpbXBsaWVzXG4gICAgLy8gIHN0YXRlLmxpbmVXaWR0aCBcdTIyNjQgNDAgKyBzdGF0ZS5pbmRlbnQ6IHdpZHRoIGlzIGZpeGVkIGF0IHRoZSBsb3dlciBib3VuZC5cbiAgICAvLyAgc3RhdGUubGluZVdpZHRoID4gNDAgKyBzdGF0ZS5pbmRlbnQ6IHdpZHRoIGRlY3JlYXNlcyB1bnRpbCB0aGUgbG93ZXIgYm91bmQuXG4gICAgLy8gVGhpcyBiZWhhdmVzIGJldHRlciB0aGFuIGEgY29uc3RhbnQgbWluaW11bSB3aWR0aCB3aGljaCBkaXNhbGxvd3MgbmFycm93ZXIgb3B0aW9ucyxcbiAgICAvLyBvciBhbiBpbmRlbnQgdGhyZXNob2xkIHdoaWNoIGNhdXNlcyB0aGUgd2lkdGggdG8gc3VkZGVubHkgaW5jcmVhc2UuXG4gICAgdmFyIGxpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aCA9PT0gLTFcbiAgICAgID8gLTEgOiBNYXRoLm1heChNYXRoLm1pbihzdGF0ZS5saW5lV2lkdGgsIDQwKSwgc3RhdGUubGluZVdpZHRoIC0gaW5kZW50KTtcblxuICAgIC8vIFdpdGhvdXQga25vd2luZyBpZiBrZXlzIGFyZSBpbXBsaWNpdC9leHBsaWNpdCwgYXNzdW1lIGltcGxpY2l0IGZvciBzYWZldHkuXG4gICAgdmFyIHNpbmdsZUxpbmVPbmx5ID0gaXNrZXlcbiAgICAgIC8vIE5vIGJsb2NrIHN0eWxlcyBpbiBmbG93IG1vZGUuXG4gICAgICB8fCAoc3RhdGUuZmxvd0xldmVsID4gLTEgJiYgbGV2ZWwgPj0gc3RhdGUuZmxvd0xldmVsKTtcbiAgICBmdW5jdGlvbiB0ZXN0QW1iaWd1aXR5KHN0cmluZykge1xuICAgICAgcmV0dXJuIHRlc3RJbXBsaWNpdFJlc29sdmluZyhzdGF0ZSwgc3RyaW5nKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGNob29zZVNjYWxhclN0eWxlKHN0cmluZywgc2luZ2xlTGluZU9ubHksIHN0YXRlLmluZGVudCwgbGluZVdpZHRoLFxuICAgICAgdGVzdEFtYmlndWl0eSwgc3RhdGUucXVvdGluZ1R5cGUsIHN0YXRlLmZvcmNlUXVvdGVzICYmICFpc2tleSwgaW5ibG9jaykpIHtcblxuICAgICAgY2FzZSBTVFlMRV9QTEFJTjpcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIGNhc2UgU1RZTEVfU0lOR0xFOlxuICAgICAgICByZXR1cm4gXCInXCIgKyBzdHJpbmcucmVwbGFjZSgvJy9nLCBcIicnXCIpICsgXCInXCI7XG4gICAgICBjYXNlIFNUWUxFX0xJVEVSQUw6XG4gICAgICAgIHJldHVybiAnfCcgKyBibG9ja0hlYWRlcihzdHJpbmcsIHN0YXRlLmluZGVudClcbiAgICAgICAgICArIGRyb3BFbmRpbmdOZXdsaW5lKGluZGVudFN0cmluZyhzdHJpbmcsIGluZGVudCkpO1xuICAgICAgY2FzZSBTVFlMRV9GT0xERUQ6XG4gICAgICAgIHJldHVybiAnPicgKyBibG9ja0hlYWRlcihzdHJpbmcsIHN0YXRlLmluZGVudClcbiAgICAgICAgICArIGRyb3BFbmRpbmdOZXdsaW5lKGluZGVudFN0cmluZyhmb2xkU3RyaW5nKHN0cmluZywgbGluZVdpZHRoKSwgaW5kZW50KSk7XG4gICAgICBjYXNlIFNUWUxFX0RPVUJMRTpcbiAgICAgICAgcmV0dXJuICdcIicgKyBlc2NhcGVTdHJpbmcoc3RyaW5nKSArICdcIic7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdpbXBvc3NpYmxlIGVycm9yOiBpbnZhbGlkIHNjYWxhciBzdHlsZScpO1xuICAgIH1cbiAgfSgpKTtcbn1cblxuLy8gUHJlLWNvbmRpdGlvbnM6IHN0cmluZyBpcyB2YWxpZCBmb3IgYSBibG9jayBzY2FsYXIsIDEgPD0gaW5kZW50UGVyTGV2ZWwgPD0gOS5cbmZ1bmN0aW9uIGJsb2NrSGVhZGVyKHN0cmluZywgaW5kZW50UGVyTGV2ZWwpIHtcbiAgdmFyIGluZGVudEluZGljYXRvciA9IG5lZWRJbmRlbnRJbmRpY2F0b3Ioc3RyaW5nKSA/IFN0cmluZyhpbmRlbnRQZXJMZXZlbCkgOiAnJztcblxuICAvLyBub3RlIHRoZSBzcGVjaWFsIGNhc2U6IHRoZSBzdHJpbmcgJ1xcbicgY291bnRzIGFzIGEgXCJ0cmFpbGluZ1wiIGVtcHR5IGxpbmUuXG4gIHZhciBjbGlwID0gICAgICAgICAgc3RyaW5nW3N0cmluZy5sZW5ndGggLSAxXSA9PT0gJ1xcbic7XG4gIHZhciBrZWVwID0gY2xpcCAmJiAoc3RyaW5nW3N0cmluZy5sZW5ndGggLSAyXSA9PT0gJ1xcbicgfHwgc3RyaW5nID09PSAnXFxuJyk7XG4gIHZhciBjaG9tcCA9IGtlZXAgPyAnKycgOiAoY2xpcCA/ICcnIDogJy0nKTtcblxuICByZXR1cm4gaW5kZW50SW5kaWNhdG9yICsgY2hvbXAgKyAnXFxuJztcbn1cblxuLy8gKFNlZSB0aGUgbm90ZSBmb3Igd3JpdGVTY2FsYXIuKVxuZnVuY3Rpb24gZHJvcEVuZGluZ05ld2xpbmUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmdbc3RyaW5nLmxlbmd0aCAtIDFdID09PSAnXFxuJyA/IHN0cmluZy5zbGljZSgwLCAtMSkgOiBzdHJpbmc7XG59XG5cbi8vIE5vdGU6IGEgbG9uZyBsaW5lIHdpdGhvdXQgYSBzdWl0YWJsZSBicmVhayBwb2ludCB3aWxsIGV4Y2VlZCB0aGUgd2lkdGggbGltaXQuXG4vLyBQcmUtY29uZGl0aW9uczogZXZlcnkgY2hhciBpbiBzdHIgaXNQcmludGFibGUsIHN0ci5sZW5ndGggPiAwLCB3aWR0aCA+IDAuXG5mdW5jdGlvbiBmb2xkU3RyaW5nKHN0cmluZywgd2lkdGgpIHtcbiAgLy8gSW4gZm9sZGVkIHN0eWxlLCAkayQgY29uc2VjdXRpdmUgbmV3bGluZXMgb3V0cHV0IGFzICRrKzEkIG5ld2xpbmVzXHUyMDE0XG4gIC8vIHVubGVzcyB0aGV5J3JlIGJlZm9yZSBvciBhZnRlciBhIG1vcmUtaW5kZW50ZWQgbGluZSwgb3IgYXQgdGhlIHZlcnlcbiAgLy8gYmVnaW5uaW5nIG9yIGVuZCwgaW4gd2hpY2ggY2FzZSAkayQgbWFwcyB0byAkayQuXG4gIC8vIFRoZXJlZm9yZSwgcGFyc2UgZWFjaCBjaHVuayBhcyBuZXdsaW5lKHMpIGZvbGxvd2VkIGJ5IGEgY29udGVudCBsaW5lLlxuICB2YXIgbGluZVJlID0gLyhcXG4rKShbXlxcbl0qKS9nO1xuXG4gIC8vIGZpcnN0IGxpbmUgKHBvc3NpYmx5IGFuIGVtcHR5IGxpbmUpXG4gIHZhciByZXN1bHQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXh0TEYgPSBzdHJpbmcuaW5kZXhPZignXFxuJyk7XG4gICAgbmV4dExGID0gbmV4dExGICE9PSAtMSA/IG5leHRMRiA6IHN0cmluZy5sZW5ndGg7XG4gICAgbGluZVJlLmxhc3RJbmRleCA9IG5leHRMRjtcbiAgICByZXR1cm4gZm9sZExpbmUoc3RyaW5nLnNsaWNlKDAsIG5leHRMRiksIHdpZHRoKTtcbiAgfSgpKTtcbiAgLy8gSWYgd2UgaGF2ZW4ndCByZWFjaGVkIHRoZSBmaXJzdCBjb250ZW50IGxpbmUgeWV0LCBkb24ndCBhZGQgYW4gZXh0cmEgXFxuLlxuICB2YXIgcHJldk1vcmVJbmRlbnRlZCA9IHN0cmluZ1swXSA9PT0gJ1xcbicgfHwgc3RyaW5nWzBdID09PSAnICc7XG4gIHZhciBtb3JlSW5kZW50ZWQ7XG5cbiAgLy8gcmVzdCBvZiB0aGUgbGluZXNcbiAgdmFyIG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gbGluZVJlLmV4ZWMoc3RyaW5nKSkpIHtcbiAgICB2YXIgcHJlZml4ID0gbWF0Y2hbMV0sIGxpbmUgPSBtYXRjaFsyXTtcbiAgICBtb3JlSW5kZW50ZWQgPSAobGluZVswXSA9PT0gJyAnKTtcbiAgICByZXN1bHQgKz0gcHJlZml4XG4gICAgICArICghcHJldk1vcmVJbmRlbnRlZCAmJiAhbW9yZUluZGVudGVkICYmIGxpbmUgIT09ICcnXG4gICAgICAgID8gJ1xcbicgOiAnJylcbiAgICAgICsgZm9sZExpbmUobGluZSwgd2lkdGgpO1xuICAgIHByZXZNb3JlSW5kZW50ZWQgPSBtb3JlSW5kZW50ZWQ7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBHcmVlZHkgbGluZSBicmVha2luZy5cbi8vIFBpY2tzIHRoZSBsb25nZXN0IGxpbmUgdW5kZXIgdGhlIGxpbWl0IGVhY2ggdGltZSxcbi8vIG90aGVyd2lzZSBzZXR0bGVzIGZvciB0aGUgc2hvcnRlc3QgbGluZSBvdmVyIHRoZSBsaW1pdC5cbi8vIE5CLiBNb3JlLWluZGVudGVkIGxpbmVzICpjYW5ub3QqIGJlIGZvbGRlZCwgYXMgdGhhdCB3b3VsZCBhZGQgYW4gZXh0cmEgXFxuLlxuZnVuY3Rpb24gZm9sZExpbmUobGluZSwgd2lkdGgpIHtcbiAgaWYgKGxpbmUgPT09ICcnIHx8IGxpbmVbMF0gPT09ICcgJykgcmV0dXJuIGxpbmU7XG5cbiAgLy8gU2luY2UgYSBtb3JlLWluZGVudGVkIGxpbmUgYWRkcyBhIFxcbiwgYnJlYWtzIGNhbid0IGJlIGZvbGxvd2VkIGJ5IGEgc3BhY2UuXG4gIHZhciBicmVha1JlID0gLyBbXiBdL2c7IC8vIG5vdGU6IHRoZSBtYXRjaCBpbmRleCB3aWxsIGFsd2F5cyBiZSA8PSBsZW5ndGgtMi5cbiAgdmFyIG1hdGNoO1xuICAvLyBzdGFydCBpcyBhbiBpbmNsdXNpdmUgaW5kZXguIGVuZCwgY3VyciwgYW5kIG5leHQgYXJlIGV4Y2x1c2l2ZS5cbiAgdmFyIHN0YXJ0ID0gMCwgZW5kLCBjdXJyID0gMCwgbmV4dCA9IDA7XG4gIHZhciByZXN1bHQgPSAnJztcblxuICAvLyBJbnZhcmlhbnRzOiAwIDw9IHN0YXJ0IDw9IGxlbmd0aC0xLlxuICAvLyAgIDAgPD0gY3VyciA8PSBuZXh0IDw9IG1heCgwLCBsZW5ndGgtMikuIGN1cnIgLSBzdGFydCA8PSB3aWR0aC5cbiAgLy8gSW5zaWRlIHRoZSBsb29wOlxuICAvLyAgIEEgbWF0Y2ggaW1wbGllcyBsZW5ndGggPj0gMiwgc28gY3VyciBhbmQgbmV4dCBhcmUgPD0gbGVuZ3RoLTIuXG4gIHdoaWxlICgobWF0Y2ggPSBicmVha1JlLmV4ZWMobGluZSkpKSB7XG4gICAgbmV4dCA9IG1hdGNoLmluZGV4O1xuICAgIC8vIG1haW50YWluIGludmFyaWFudDogY3VyciAtIHN0YXJ0IDw9IHdpZHRoXG4gICAgaWYgKG5leHQgLSBzdGFydCA+IHdpZHRoKSB7XG4gICAgICBlbmQgPSAoY3VyciA+IHN0YXJ0KSA/IGN1cnIgOiBuZXh0OyAvLyBkZXJpdmUgZW5kIDw9IGxlbmd0aC0yXG4gICAgICByZXN1bHQgKz0gJ1xcbicgKyBsaW5lLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgLy8gc2tpcCB0aGUgc3BhY2UgdGhhdCB3YXMgb3V0cHV0IGFzIFxcblxuICAgICAgc3RhcnQgPSBlbmQgKyAxOyAgICAgICAgICAgICAgICAgICAgLy8gZGVyaXZlIHN0YXJ0IDw9IGxlbmd0aC0xXG4gICAgfVxuICAgIGN1cnIgPSBuZXh0O1xuICB9XG5cbiAgLy8gQnkgdGhlIGludmFyaWFudHMsIHN0YXJ0IDw9IGxlbmd0aC0xLCBzbyB0aGVyZSBpcyBzb21ldGhpbmcgbGVmdCBvdmVyLlxuICAvLyBJdCBpcyBlaXRoZXIgdGhlIHdob2xlIHN0cmluZyBvciBhIHBhcnQgc3RhcnRpbmcgZnJvbSBub24td2hpdGVzcGFjZS5cbiAgcmVzdWx0ICs9ICdcXG4nO1xuICAvLyBJbnNlcnQgYSBicmVhayBpZiB0aGUgcmVtYWluZGVyIGlzIHRvbyBsb25nIGFuZCB0aGVyZSBpcyBhIGJyZWFrIGF2YWlsYWJsZS5cbiAgaWYgKGxpbmUubGVuZ3RoIC0gc3RhcnQgPiB3aWR0aCAmJiBjdXJyID4gc3RhcnQpIHtcbiAgICByZXN1bHQgKz0gbGluZS5zbGljZShzdGFydCwgY3VycikgKyAnXFxuJyArIGxpbmUuc2xpY2UoY3VyciArIDEpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCArPSBsaW5lLnNsaWNlKHN0YXJ0KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuc2xpY2UoMSk7IC8vIGRyb3AgZXh0cmEgXFxuIGpvaW5lclxufVxuXG4vLyBFc2NhcGVzIGEgZG91YmxlLXF1b3RlZCBzdHJpbmcuXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmcoc3RyaW5nKSB7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgdmFyIGNoYXIgPSAwO1xuICB2YXIgZXNjYXBlU2VxO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgY2hhciA+PSAweDEwMDAwID8gaSArPSAyIDogaSsrKSB7XG4gICAgY2hhciA9IGNvZGVQb2ludEF0KHN0cmluZywgaSk7XG4gICAgZXNjYXBlU2VxID0gRVNDQVBFX1NFUVVFTkNFU1tjaGFyXTtcblxuICAgIGlmICghZXNjYXBlU2VxICYmIGlzUHJpbnRhYmxlKGNoYXIpKSB7XG4gICAgICByZXN1bHQgKz0gc3RyaW5nW2ldO1xuICAgICAgaWYgKGNoYXIgPj0gMHgxMDAwMCkgcmVzdWx0ICs9IHN0cmluZ1tpICsgMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCArPSBlc2NhcGVTZXEgfHwgZW5jb2RlSGV4KGNoYXIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvd1NlcXVlbmNlKHN0YXRlLCBsZXZlbCwgb2JqZWN0KSB7XG4gIHZhciBfcmVzdWx0ID0gJycsXG4gICAgICBfdGFnICAgID0gc3RhdGUudGFnLFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGgsXG4gICAgICB2YWx1ZTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB2YWx1ZSA9IG9iamVjdFtpbmRleF07XG5cbiAgICBpZiAoc3RhdGUucmVwbGFjZXIpIHtcbiAgICAgIHZhbHVlID0gc3RhdGUucmVwbGFjZXIuY2FsbChvYmplY3QsIFN0cmluZyhpbmRleCksIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBXcml0ZSBvbmx5IHZhbGlkIGVsZW1lbnRzLCBwdXQgbnVsbCBpbnN0ZWFkIG9mIGludmFsaWQgZWxlbWVudHMuXG4gICAgaWYgKHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIHZhbHVlLCBmYWxzZSwgZmFsc2UpIHx8XG4gICAgICAgICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICB3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBudWxsLCBmYWxzZSwgZmFsc2UpKSkge1xuXG4gICAgICBpZiAoX3Jlc3VsdCAhPT0gJycpIF9yZXN1bHQgKz0gJywnICsgKCFzdGF0ZS5jb25kZW5zZUZsb3cgPyAnICcgOiAnJyk7XG4gICAgICBfcmVzdWx0ICs9IHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9ICdbJyArIF9yZXN1bHQgKyAnXSc7XG59XG5cbmZ1bmN0aW9uIHdyaXRlQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgY29tcGFjdCkge1xuICB2YXIgX3Jlc3VsdCA9ICcnLFxuICAgICAgX3RhZyAgICA9IHN0YXRlLnRhZyxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoLFxuICAgICAgdmFsdWU7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdmFsdWUgPSBvYmplY3RbaW5kZXhdO1xuXG4gICAgaWYgKHN0YXRlLnJlcGxhY2VyKSB7XG4gICAgICB2YWx1ZSA9IHN0YXRlLnJlcGxhY2VyLmNhbGwob2JqZWN0LCBTdHJpbmcoaW5kZXgpLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gV3JpdGUgb25seSB2YWxpZCBlbGVtZW50cywgcHV0IG51bGwgaW5zdGVhZCBvZiBpbnZhbGlkIGVsZW1lbnRzLlxuICAgIGlmICh3cml0ZU5vZGUoc3RhdGUsIGxldmVsICsgMSwgdmFsdWUsIHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKSB8fFxuICAgICAgICAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCArIDEsIG51bGwsIHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKSkpIHtcblxuICAgICAgaWYgKCFjb21wYWN0IHx8IF9yZXN1bHQgIT09ICcnKSB7XG4gICAgICAgIF9yZXN1bHQgKz0gZ2VuZXJhdGVOZXh0TGluZShzdGF0ZSwgbGV2ZWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICAgIF9yZXN1bHQgKz0gJy0nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3Jlc3VsdCArPSAnLSAnO1xuICAgICAgfVxuXG4gICAgICBfcmVzdWx0ICs9IHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9IF9yZXN1bHQgfHwgJ1tdJzsgLy8gRW1wdHkgc2VxdWVuY2UgaWYgbm8gdmFsaWQgdmFsdWVzLlxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb3dNYXBwaW5nKHN0YXRlLCBsZXZlbCwgb2JqZWN0KSB7XG4gIHZhciBfcmVzdWx0ICAgICAgID0gJycsXG4gICAgICBfdGFnICAgICAgICAgID0gc3RhdGUudGFnLFxuICAgICAgb2JqZWN0S2V5TGlzdCA9IE9iamVjdC5rZXlzKG9iamVjdCksXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aCxcbiAgICAgIG9iamVjdEtleSxcbiAgICAgIG9iamVjdFZhbHVlLFxuICAgICAgcGFpckJ1ZmZlcjtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG5cbiAgICBwYWlyQnVmZmVyID0gJyc7XG4gICAgaWYgKF9yZXN1bHQgIT09ICcnKSBwYWlyQnVmZmVyICs9ICcsICc7XG5cbiAgICBpZiAoc3RhdGUuY29uZGVuc2VGbG93KSBwYWlyQnVmZmVyICs9ICdcIic7XG5cbiAgICBvYmplY3RLZXkgPSBvYmplY3RLZXlMaXN0W2luZGV4XTtcbiAgICBvYmplY3RWYWx1ZSA9IG9iamVjdFtvYmplY3RLZXldO1xuXG4gICAgaWYgKHN0YXRlLnJlcGxhY2VyKSB7XG4gICAgICBvYmplY3RWYWx1ZSA9IHN0YXRlLnJlcGxhY2VyLmNhbGwob2JqZWN0LCBvYmplY3RLZXksIG9iamVjdFZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAoIXdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIG9iamVjdEtleSwgZmFsc2UsIGZhbHNlKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCBrZXk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlLmR1bXAubGVuZ3RoID4gMTAyNCkgcGFpckJ1ZmZlciArPSAnPyAnO1xuXG4gICAgcGFpckJ1ZmZlciArPSBzdGF0ZS5kdW1wICsgKHN0YXRlLmNvbmRlbnNlRmxvdyA/ICdcIicgOiAnJykgKyAnOicgKyAoc3RhdGUuY29uZGVuc2VGbG93ID8gJycgOiAnICcpO1xuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBvYmplY3RWYWx1ZSwgZmFsc2UsIGZhbHNlKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCB2YWx1ZS5cbiAgICB9XG5cbiAgICBwYWlyQnVmZmVyICs9IHN0YXRlLmR1bXA7XG5cbiAgICAvLyBCb3RoIGtleSBhbmQgdmFsdWUgYXJlIHZhbGlkLlxuICAgIF9yZXN1bHQgKz0gcGFpckJ1ZmZlcjtcbiAgfVxuXG4gIHN0YXRlLnRhZyA9IF90YWc7XG4gIHN0YXRlLmR1bXAgPSAneycgKyBfcmVzdWx0ICsgJ30nO1xufVxuXG5mdW5jdGlvbiB3cml0ZUJsb2NrTWFwcGluZyhzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgY29tcGFjdCkge1xuICB2YXIgX3Jlc3VsdCAgICAgICA9ICcnLFxuICAgICAgX3RhZyAgICAgICAgICA9IHN0YXRlLnRhZyxcbiAgICAgIG9iamVjdEtleUxpc3QgPSBPYmplY3Qua2V5cyhvYmplY3QpLFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGgsXG4gICAgICBvYmplY3RLZXksXG4gICAgICBvYmplY3RWYWx1ZSxcbiAgICAgIGV4cGxpY2l0UGFpcixcbiAgICAgIHBhaXJCdWZmZXI7XG5cbiAgLy8gQWxsb3cgc29ydGluZyBrZXlzIHNvIHRoYXQgdGhlIG91dHB1dCBmaWxlIGlzIGRldGVybWluaXN0aWNcbiAgaWYgKHN0YXRlLnNvcnRLZXlzID09PSB0cnVlKSB7XG4gICAgLy8gRGVmYXVsdCBzb3J0aW5nXG4gICAgb2JqZWN0S2V5TGlzdC5zb3J0KCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHN0YXRlLnNvcnRLZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gQ3VzdG9tIHNvcnQgZnVuY3Rpb25cbiAgICBvYmplY3RLZXlMaXN0LnNvcnQoc3RhdGUuc29ydEtleXMpO1xuICB9IGVsc2UgaWYgKHN0YXRlLnNvcnRLZXlzKSB7XG4gICAgLy8gU29tZXRoaW5nIGlzIHdyb25nXG4gICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignc29ydEtleXMgbXVzdCBiZSBhIGJvb2xlYW4gb3IgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdEtleUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXJCdWZmZXIgPSAnJztcblxuICAgIGlmICghY29tcGFjdCB8fCBfcmVzdWx0ICE9PSAnJykge1xuICAgICAgcGFpckJ1ZmZlciArPSBnZW5lcmF0ZU5leHRMaW5lKHN0YXRlLCBsZXZlbCk7XG4gICAgfVxuXG4gICAgb2JqZWN0S2V5ID0gb2JqZWN0S2V5TGlzdFtpbmRleF07XG4gICAgb2JqZWN0VmFsdWUgPSBvYmplY3Rbb2JqZWN0S2V5XTtcblxuICAgIGlmIChzdGF0ZS5yZXBsYWNlcikge1xuICAgICAgb2JqZWN0VmFsdWUgPSBzdGF0ZS5yZXBsYWNlci5jYWxsKG9iamVjdCwgb2JqZWN0S2V5LCBvYmplY3RWYWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsICsgMSwgb2JqZWN0S2V5LCB0cnVlLCB0cnVlLCB0cnVlKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCBrZXkuXG4gICAgfVxuXG4gICAgZXhwbGljaXRQYWlyID0gKHN0YXRlLnRhZyAhPT0gbnVsbCAmJiBzdGF0ZS50YWcgIT09ICc/JykgfHxcbiAgICAgICAgICAgICAgICAgICAoc3RhdGUuZHVtcCAmJiBzdGF0ZS5kdW1wLmxlbmd0aCA+IDEwMjQpO1xuXG4gICAgaWYgKGV4cGxpY2l0UGFpcikge1xuICAgICAgaWYgKHN0YXRlLmR1bXAgJiYgQ0hBUl9MSU5FX0ZFRUQgPT09IHN0YXRlLmR1bXAuY2hhckNvZGVBdCgwKSkge1xuICAgICAgICBwYWlyQnVmZmVyICs9ICc/JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhaXJCdWZmZXIgKz0gJz8gJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYWlyQnVmZmVyICs9IHN0YXRlLmR1bXA7XG5cbiAgICBpZiAoZXhwbGljaXRQYWlyKSB7XG4gICAgICBwYWlyQnVmZmVyICs9IGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKTtcbiAgICB9XG5cbiAgICBpZiAoIXdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCBvYmplY3RWYWx1ZSwgdHJ1ZSwgZXhwbGljaXRQYWlyKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCB2YWx1ZS5cbiAgICB9XG5cbiAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICBwYWlyQnVmZmVyICs9ICc6JztcbiAgICB9IGVsc2Uge1xuICAgICAgcGFpckJ1ZmZlciArPSAnOiAnO1xuICAgIH1cblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcDtcblxuICAgIC8vIEJvdGgga2V5IGFuZCB2YWx1ZSBhcmUgdmFsaWQuXG4gICAgX3Jlc3VsdCArPSBwYWlyQnVmZmVyO1xuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9IF9yZXN1bHQgfHwgJ3t9JzsgLy8gRW1wdHkgbWFwcGluZyBpZiBubyB2YWxpZCBwYWlycy5cbn1cblxuZnVuY3Rpb24gZGV0ZWN0VHlwZShzdGF0ZSwgb2JqZWN0LCBleHBsaWNpdCkge1xuICB2YXIgX3Jlc3VsdCwgdHlwZUxpc3QsIGluZGV4LCBsZW5ndGgsIHR5cGUsIHN0eWxlO1xuXG4gIHR5cGVMaXN0ID0gZXhwbGljaXQgPyBzdGF0ZS5leHBsaWNpdFR5cGVzIDogc3RhdGUuaW1wbGljaXRUeXBlcztcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gdHlwZUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHR5cGUgPSB0eXBlTGlzdFtpbmRleF07XG5cbiAgICBpZiAoKHR5cGUuaW5zdGFuY2VPZiAgfHwgdHlwZS5wcmVkaWNhdGUpICYmXG4gICAgICAgICghdHlwZS5pbnN0YW5jZU9mIHx8ICgodHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpICYmIChvYmplY3QgaW5zdGFuY2VvZiB0eXBlLmluc3RhbmNlT2YpKSkgJiZcbiAgICAgICAgKCF0eXBlLnByZWRpY2F0ZSAgfHwgdHlwZS5wcmVkaWNhdGUob2JqZWN0KSkpIHtcblxuICAgICAgaWYgKGV4cGxpY2l0KSB7XG4gICAgICAgIGlmICh0eXBlLm11bHRpICYmIHR5cGUucmVwcmVzZW50TmFtZSkge1xuICAgICAgICAgIHN0YXRlLnRhZyA9IHR5cGUucmVwcmVzZW50TmFtZShvYmplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXRlLnRhZyA9IHR5cGUudGFnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS50YWcgPSAnPyc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLnJlcHJlc2VudCkge1xuICAgICAgICBzdHlsZSA9IHN0YXRlLnN0eWxlTWFwW3R5cGUudGFnXSB8fCB0eXBlLmRlZmF1bHRTdHlsZTtcblxuICAgICAgICBpZiAoX3RvU3RyaW5nLmNhbGwodHlwZS5yZXByZXNlbnQpID09PSAnW29iamVjdCBGdW5jdGlvbl0nKSB7XG4gICAgICAgICAgX3Jlc3VsdCA9IHR5cGUucmVwcmVzZW50KG9iamVjdCwgc3R5bGUpO1xuICAgICAgICB9IGVsc2UgaWYgKF9oYXNPd25Qcm9wZXJ0eS5jYWxsKHR5cGUucmVwcmVzZW50LCBzdHlsZSkpIHtcbiAgICAgICAgICBfcmVzdWx0ID0gdHlwZS5yZXByZXNlbnRbc3R5bGVdKG9iamVjdCwgc3R5bGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJyE8JyArIHR5cGUudGFnICsgJz4gdGFnIHJlc29sdmVyIGFjY2VwdHMgbm90IFwiJyArIHN0eWxlICsgJ1wiIHN0eWxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5kdW1wID0gX3Jlc3VsdDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTZXJpYWxpemVzIGBvYmplY3RgIGFuZCB3cml0ZXMgaXQgdG8gZ2xvYmFsIGByZXN1bHRgLlxuLy8gUmV0dXJucyB0cnVlIG9uIHN1Y2Nlc3MsIG9yIGZhbHNlIG9uIGludmFsaWQgb2JqZWN0LlxuLy9cbmZ1bmN0aW9uIHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgYmxvY2ssIGNvbXBhY3QsIGlza2V5LCBpc2Jsb2Nrc2VxKSB7XG4gIHN0YXRlLnRhZyA9IG51bGw7XG4gIHN0YXRlLmR1bXAgPSBvYmplY3Q7XG5cbiAgaWYgKCFkZXRlY3RUeXBlKHN0YXRlLCBvYmplY3QsIGZhbHNlKSkge1xuICAgIGRldGVjdFR5cGUoc3RhdGUsIG9iamVjdCwgdHJ1ZSk7XG4gIH1cblxuICB2YXIgdHlwZSA9IF90b1N0cmluZy5jYWxsKHN0YXRlLmR1bXApO1xuICB2YXIgaW5ibG9jayA9IGJsb2NrO1xuICB2YXIgdGFnU3RyO1xuXG4gIGlmIChibG9jaykge1xuICAgIGJsb2NrID0gKHN0YXRlLmZsb3dMZXZlbCA8IDAgfHwgc3RhdGUuZmxvd0xldmVsID4gbGV2ZWwpO1xuICB9XG5cbiAgdmFyIG9iamVjdE9yQXJyYXkgPSB0eXBlID09PSAnW29iamVjdCBPYmplY3RdJyB8fCB0eXBlID09PSAnW29iamVjdCBBcnJheV0nLFxuICAgICAgZHVwbGljYXRlSW5kZXgsXG4gICAgICBkdXBsaWNhdGU7XG5cbiAgaWYgKG9iamVjdE9yQXJyYXkpIHtcbiAgICBkdXBsaWNhdGVJbmRleCA9IHN0YXRlLmR1cGxpY2F0ZXMuaW5kZXhPZihvYmplY3QpO1xuICAgIGR1cGxpY2F0ZSA9IGR1cGxpY2F0ZUluZGV4ICE9PSAtMTtcbiAgfVxuXG4gIGlmICgoc3RhdGUudGFnICE9PSBudWxsICYmIHN0YXRlLnRhZyAhPT0gJz8nKSB8fCBkdXBsaWNhdGUgfHwgKHN0YXRlLmluZGVudCAhPT0gMiAmJiBsZXZlbCA+IDApKSB7XG4gICAgY29tcGFjdCA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKGR1cGxpY2F0ZSAmJiBzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0pIHtcbiAgICBzdGF0ZS5kdW1wID0gJypyZWZfJyArIGR1cGxpY2F0ZUluZGV4O1xuICB9IGVsc2Uge1xuICAgIGlmIChvYmplY3RPckFycmF5ICYmIGR1cGxpY2F0ZSAmJiAhc3RhdGUudXNlZER1cGxpY2F0ZXNbZHVwbGljYXRlSW5kZXhdKSB7XG4gICAgICBzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0gPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIGlmIChibG9jayAmJiAoT2JqZWN0LmtleXMoc3RhdGUuZHVtcCkubGVuZ3RoICE9PSAwKSkge1xuICAgICAgICB3cml0ZUJsb2NrTWFwcGluZyhzdGF0ZSwgbGV2ZWwsIHN0YXRlLmR1bXAsIGNvbXBhY3QpO1xuICAgICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgICAgc3RhdGUuZHVtcCA9ICcmcmVmXycgKyBkdXBsaWNhdGVJbmRleCArIHN0YXRlLmR1bXA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRlRmxvd01hcHBpbmcoc3RhdGUsIGxldmVsLCBzdGF0ZS5kdW1wKTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyAnICcgKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICBpZiAoYmxvY2sgJiYgKHN0YXRlLmR1bXAubGVuZ3RoICE9PSAwKSkge1xuICAgICAgICBpZiAoc3RhdGUubm9BcnJheUluZGVudCAmJiAhaXNibG9ja3NlcSAmJiBsZXZlbCA+IDApIHtcbiAgICAgICAgICB3cml0ZUJsb2NrU2VxdWVuY2Uoc3RhdGUsIGxldmVsIC0gMSwgc3RhdGUuZHVtcCwgY29tcGFjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd3JpdGVCbG9ja1NlcXVlbmNlKHN0YXRlLCBsZXZlbCwgc3RhdGUuZHVtcCwgY29tcGFjdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0ZUZsb3dTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwsIHN0YXRlLmR1bXApO1xuICAgICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgICAgc3RhdGUuZHVtcCA9ICcmcmVmXycgKyBkdXBsaWNhdGVJbmRleCArICcgJyArIHN0YXRlLmR1bXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdbb2JqZWN0IFN0cmluZ10nKSB7XG4gICAgICBpZiAoc3RhdGUudGFnICE9PSAnPycpIHtcbiAgICAgICAgd3JpdGVTY2FsYXIoc3RhdGUsIHN0YXRlLmR1bXAsIGxldmVsLCBpc2tleSwgaW5ibG9jayk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBVbmRlZmluZWRdJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc3RhdGUuc2tpcEludmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJ3VuYWNjZXB0YWJsZSBraW5kIG9mIGFuIG9iamVjdCB0byBkdW1wICcgKyB0eXBlKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUudGFnICE9PSBudWxsICYmIHN0YXRlLnRhZyAhPT0gJz8nKSB7XG4gICAgICAvLyBOZWVkIHRvIGVuY29kZSBhbGwgY2hhcmFjdGVycyBleGNlcHQgdGhvc2UgYWxsb3dlZCBieSB0aGUgc3BlYzpcbiAgICAgIC8vXG4gICAgICAvLyBbMzVdIG5zLWRlYy1kaWdpdCAgICA6Oj0gIFsjeDMwLSN4MzldIC8qIDAtOSAqL1xuICAgICAgLy8gWzM2XSBucy1oZXgtZGlnaXQgICAgOjo9ICBucy1kZWMtZGlnaXRcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHwgWyN4NDEtI3g0Nl0gLyogQS1GICovIHwgWyN4NjEtI3g2Nl0gLyogYS1mICovXG4gICAgICAvLyBbMzddIG5zLWFzY2lpLWxldHRlciA6Oj0gIFsjeDQxLSN4NUFdIC8qIEEtWiAqLyB8IFsjeDYxLSN4N0FdIC8qIGEteiAqL1xuICAgICAgLy8gWzM4XSBucy13b3JkLWNoYXIgICAgOjo9ICBucy1kZWMtZGlnaXQgfCBucy1hc2NpaS1sZXR0ZXIgfCBcdTIwMUMtXHUyMDFEXG4gICAgICAvLyBbMzldIG5zLXVyaS1jaGFyICAgICA6Oj0gIFx1MjAxQyVcdTIwMUQgbnMtaGV4LWRpZ2l0IG5zLWhleC1kaWdpdCB8IG5zLXdvcmQtY2hhciB8IFx1MjAxQyNcdTIwMURcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHwgXHUyMDFDO1x1MjAxRCB8IFx1MjAxQy9cdTIwMUQgfCBcdTIwMUM/XHUyMDFEIHwgXHUyMDFDOlx1MjAxRCB8IFx1MjAxQ0BcdTIwMUQgfCBcdTIwMUMmXHUyMDFEIHwgXHUyMDFDPVx1MjAxRCB8IFx1MjAxQytcdTIwMUQgfCBcdTIwMUMkXHUyMDFEIHwgXHUyMDFDLFx1MjAxRFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgfCBcdTIwMUNfXHUyMDFEIHwgXHUyMDFDLlx1MjAxRCB8IFx1MjAxQyFcdTIwMUQgfCBcdTIwMUN+XHUyMDFEIHwgXHUyMDFDKlx1MjAxRCB8IFx1MjAxQydcdTIwMUQgfCBcdTIwMUMoXHUyMDFEIHwgXHUyMDFDKVx1MjAxRCB8IFx1MjAxQ1tcdTIwMUQgfCBcdTIwMUNdXHUyMDFEXG4gICAgICAvL1xuICAgICAgLy8gQWxzbyBuZWVkIHRvIGVuY29kZSAnIScgYmVjYXVzZSBpdCBoYXMgc3BlY2lhbCBtZWFuaW5nIChlbmQgb2YgdGFnIHByZWZpeCkuXG4gICAgICAvL1xuICAgICAgdGFnU3RyID0gZW5jb2RlVVJJKFxuICAgICAgICBzdGF0ZS50YWdbMF0gPT09ICchJyA/IHN0YXRlLnRhZy5zbGljZSgxKSA6IHN0YXRlLnRhZ1xuICAgICAgKS5yZXBsYWNlKC8hL2csICclMjEnKTtcblxuICAgICAgaWYgKHN0YXRlLnRhZ1swXSA9PT0gJyEnKSB7XG4gICAgICAgIHRhZ1N0ciA9ICchJyArIHRhZ1N0cjtcbiAgICAgIH0gZWxzZSBpZiAodGFnU3RyLnNsaWNlKDAsIDE4KSA9PT0gJ3RhZzp5YW1sLm9yZywyMDAyOicpIHtcbiAgICAgICAgdGFnU3RyID0gJyEhJyArIHRhZ1N0ci5zbGljZSgxOCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWdTdHIgPSAnITwnICsgdGFnU3RyICsgJz4nO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5kdW1wID0gdGFnU3RyICsgJyAnICsgc3RhdGUuZHVtcDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0RHVwbGljYXRlUmVmZXJlbmNlcyhvYmplY3QsIHN0YXRlKSB7XG4gIHZhciBvYmplY3RzID0gW10sXG4gICAgICBkdXBsaWNhdGVzSW5kZXhlcyA9IFtdLFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGg7XG5cbiAgaW5zcGVjdE5vZGUob2JqZWN0LCBvYmplY3RzLCBkdXBsaWNhdGVzSW5kZXhlcyk7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IGR1cGxpY2F0ZXNJbmRleGVzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBzdGF0ZS5kdXBsaWNhdGVzLnB1c2gob2JqZWN0c1tkdXBsaWNhdGVzSW5kZXhlc1tpbmRleF1dKTtcbiAgfVxuICBzdGF0ZS51c2VkRHVwbGljYXRlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBpbnNwZWN0Tm9kZShvYmplY3QsIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKSB7XG4gIHZhciBvYmplY3RLZXlMaXN0LFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGg7XG5cbiAgaWYgKG9iamVjdCAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0Jykge1xuICAgIGluZGV4ID0gb2JqZWN0cy5pbmRleE9mKG9iamVjdCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgaWYgKGR1cGxpY2F0ZXNJbmRleGVzLmluZGV4T2YoaW5kZXgpID09PSAtMSkge1xuICAgICAgICBkdXBsaWNhdGVzSW5kZXhlcy5wdXNoKGluZGV4KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb2JqZWN0cy5wdXNoKG9iamVjdCk7XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICAgICAgaW5zcGVjdE5vZGUob2JqZWN0W2luZGV4XSwgb2JqZWN0cywgZHVwbGljYXRlc0luZGV4ZXMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3RLZXlMaXN0ID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICAgICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICAgICAgaW5zcGVjdE5vZGUob2JqZWN0W29iamVjdEtleUxpc3RbaW5kZXhdXSwgb2JqZWN0cywgZHVwbGljYXRlc0luZGV4ZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGR1bXAkMShpbnB1dCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB2YXIgc3RhdGUgPSBuZXcgU3RhdGUob3B0aW9ucyk7XG5cbiAgaWYgKCFzdGF0ZS5ub1JlZnMpIGdldER1cGxpY2F0ZVJlZmVyZW5jZXMoaW5wdXQsIHN0YXRlKTtcblxuICB2YXIgdmFsdWUgPSBpbnB1dDtcblxuICBpZiAoc3RhdGUucmVwbGFjZXIpIHtcbiAgICB2YWx1ZSA9IHN0YXRlLnJlcGxhY2VyLmNhbGwoeyAnJzogdmFsdWUgfSwgJycsIHZhbHVlKTtcbiAgfVxuXG4gIGlmICh3cml0ZU5vZGUoc3RhdGUsIDAsIHZhbHVlLCB0cnVlLCB0cnVlKSkgcmV0dXJuIHN0YXRlLmR1bXAgKyAnXFxuJztcblxuICByZXR1cm4gJyc7XG59XG5cbnZhciBkdW1wXzEgPSBkdW1wJDE7XG5cbnZhciBkdW1wZXIgPSB7XG5cdGR1bXA6IGR1bXBfMVxufTtcblxuZnVuY3Rpb24gcmVuYW1lZChmcm9tLCB0bykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignRnVuY3Rpb24geWFtbC4nICsgZnJvbSArICcgaXMgcmVtb3ZlZCBpbiBqcy15YW1sIDQuICcgK1xuICAgICAgJ1VzZSB5YW1sLicgKyB0byArICcgaW5zdGVhZCwgd2hpY2ggaXMgbm93IHNhZmUgYnkgZGVmYXVsdC4nKTtcbiAgfTtcbn1cblxuXG52YXIgVHlwZSAgICAgICAgICAgICAgICA9IHR5cGU7XG52YXIgU2NoZW1hICAgICAgICAgICAgICA9IHNjaGVtYTtcbnZhciBGQUlMU0FGRV9TQ0hFTUEgICAgID0gZmFpbHNhZmU7XG52YXIgSlNPTl9TQ0hFTUEgICAgICAgICA9IGpzb247XG52YXIgQ09SRV9TQ0hFTUEgICAgICAgICA9IGNvcmU7XG52YXIgREVGQVVMVF9TQ0hFTUEgICAgICA9IF9kZWZhdWx0O1xudmFyIGxvYWQgICAgICAgICAgICAgICAgPSBsb2FkZXIubG9hZDtcbnZhciBsb2FkQWxsICAgICAgICAgICAgID0gbG9hZGVyLmxvYWRBbGw7XG52YXIgZHVtcCAgICAgICAgICAgICAgICA9IGR1bXBlci5kdW1wO1xudmFyIFlBTUxFeGNlcHRpb24gICAgICAgPSBleGNlcHRpb247XG5cbi8vIFJlLWV4cG9ydCBhbGwgdHlwZXMgaW4gY2FzZSB1c2VyIHdhbnRzIHRvIGNyZWF0ZSBjdXN0b20gc2NoZW1hXG52YXIgdHlwZXMgPSB7XG4gIGJpbmFyeTogICAgYmluYXJ5LFxuICBmbG9hdDogICAgIGZsb2F0LFxuICBtYXA6ICAgICAgIG1hcCxcbiAgbnVsbDogICAgICBfbnVsbCxcbiAgcGFpcnM6ICAgICBwYWlycyxcbiAgc2V0OiAgICAgICBzZXQsXG4gIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICBib29sOiAgICAgIGJvb2wsXG4gIGludDogICAgICAgaW50LFxuICBtZXJnZTogICAgIG1lcmdlLFxuICBvbWFwOiAgICAgIG9tYXAsXG4gIHNlcTogICAgICAgc2VxLFxuICBzdHI6ICAgICAgIHN0clxufTtcblxuLy8gUmVtb3ZlZCBmdW5jdGlvbnMgZnJvbSBKUy1ZQU1MIDMuMC54XG52YXIgc2FmZUxvYWQgICAgICAgICAgICA9IHJlbmFtZWQoJ3NhZmVMb2FkJywgJ2xvYWQnKTtcbnZhciBzYWZlTG9hZEFsbCAgICAgICAgID0gcmVuYW1lZCgnc2FmZUxvYWRBbGwnLCAnbG9hZEFsbCcpO1xudmFyIHNhZmVEdW1wICAgICAgICAgICAgPSByZW5hbWVkKCdzYWZlRHVtcCcsICdkdW1wJyk7XG5cbnZhciBqc1lhbWwgPSB7XG5cdFR5cGU6IFR5cGUsXG5cdFNjaGVtYTogU2NoZW1hLFxuXHRGQUlMU0FGRV9TQ0hFTUE6IEZBSUxTQUZFX1NDSEVNQSxcblx0SlNPTl9TQ0hFTUE6IEpTT05fU0NIRU1BLFxuXHRDT1JFX1NDSEVNQTogQ09SRV9TQ0hFTUEsXG5cdERFRkFVTFRfU0NIRU1BOiBERUZBVUxUX1NDSEVNQSxcblx0bG9hZDogbG9hZCxcblx0bG9hZEFsbDogbG9hZEFsbCxcblx0ZHVtcDogZHVtcCxcblx0WUFNTEV4Y2VwdGlvbjogWUFNTEV4Y2VwdGlvbixcblx0dHlwZXM6IHR5cGVzLFxuXHRzYWZlTG9hZDogc2FmZUxvYWQsXG5cdHNhZmVMb2FkQWxsOiBzYWZlTG9hZEFsbCxcblx0c2FmZUR1bXA6IHNhZmVEdW1wXG59O1xuXG5leHBvcnQgZGVmYXVsdCBqc1lhbWw7XG5leHBvcnQgeyBDT1JFX1NDSEVNQSwgREVGQVVMVF9TQ0hFTUEsIEZBSUxTQUZFX1NDSEVNQSwgSlNPTl9TQ0hFTUEsIFNjaGVtYSwgVHlwZSwgWUFNTEV4Y2VwdGlvbiwgZHVtcCwgbG9hZCwgbG9hZEFsbCwgc2FmZUR1bXAsIHNhZmVMb2FkLCBzYWZlTG9hZEFsbCwgdHlwZXMgfTtcbiIsICJpbXBvcnQgeyBBSVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMvY29uZmlnJztcbmltcG9ydCB7U3VtbWFyaXplUmVxdWVzdCwgS2V5d29yZHNSZXF1ZXN0LCBUcmFuc2xhdGVSZXF1ZXN0LCBSZXdyaXRlUmVxdWVzdCwgQ29tcG9zZVJlcXVlc3R9IGZyb20gJy4uL3R5cGVzL3JlcXVlc3RzJztcbmltcG9ydCB7IFN1bW1hcml6ZVJlc3BvbnNlLCBLZXl3b3Jkc1Jlc3BvbnNlLCBUcmFuc2xhdGVSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzL3Jlc3BvbnNlcyc7XG5cbmV4cG9ydCBjbGFzcyBBSVNlcnZpY2Uge1xuXHRwcml2YXRlIHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzO1xuXG5cdGNvbnN0cnVjdG9yKHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHR9XG5cblx0dXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MpOiB2b2lkIHtcblx0XHR0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG5cdH1cblxuXHRhc3luYyBzdW1tYXJpemUocmVxdWVzdDogU3VtbWFyaXplUmVxdWVzdCk6IFByb21pc2U8UmVzcG9uc2U+IHtcblx0XHRyZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS92MS9zdW1tYXJpemUnLCByZXF1ZXN0LCByZXF1ZXN0LmNvbmZpZy5zdHJlYW0pO1xuXHR9XG5cblx0YXN5bmMgZXh0cmFjdEtleXdvcmRzKHJlcXVlc3Q6IEtleXdvcmRzUmVxdWVzdCk6IFByb21pc2U8UmVzcG9uc2U+IHtcblx0XHRyZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS92MS9rZXl3b3JkcycsIHJlcXVlc3QsIGZhbHNlKTtcblx0fVxuXG5cdGFzeW5jIHRyYW5zbGF0ZShyZXF1ZXN0OiBUcmFuc2xhdGVSZXF1ZXN0KTogUHJvbWlzZTxSZXNwb25zZT4ge1xuXHRcdHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL3YxL3RyYW5zbGF0ZScsIHJlcXVlc3QsIHJlcXVlc3QuY29uZmlnLnN0cmVhbSk7XG5cdH1cblxuXHRhc3luYyByZXdyaXRlKHJlcXVlc3Q6IFJld3JpdGVSZXF1ZXN0KTogUHJvbWlzZTxSZXNwb25zZT4ge1xuXHRcdHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KCcvYXBpL3YxL3Jld3JpdGUnLCByZXF1ZXN0LCByZXF1ZXN0LmNvbmZpZy5zdHJlYW0pO1xuXHR9XG5cbiAgICBhc3luYyBjb21wb3NlKHJlcXVlc3Q6IENvbXBvc2VSZXF1ZXN0KTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tYWtlUmVxdWVzdCgnL2FwaS92MS9jb21wb3NlJywgcmVxdWVzdCwgcmVxdWVzdC5jb25maWcuc3RyZWFtKTtcbiAgICB9XG5cblx0cHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdChlbmRwb2ludDogc3RyaW5nLCByZXF1ZXN0Qm9keTogYW55LCBpc1N0cmVhbWluZzogYm9vbGVhbik6IFByb21pc2U8UmVzcG9uc2U+IHtcblx0XHRjb25zdCBub3JtYWxpemVkRW5kcG9pbnQgPSBlbmRwb2ludC5zdGFydHNXaXRoKCcvJykgPyBlbmRwb2ludCA6ICcvJyArIGVuZHBvaW50O1xuXG5cdFx0Y29uc3QgaGVhZGVyczogSGVhZGVyc0luaXQgPSB7XG5cdFx0XHQnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuXHRcdFx0J09yaWdpbic6ICdhcHA6Ly9vYnNpZGlhbi5tZCcsXG5cdFx0XHQnQWNjZXB0JzogaXNTdHJlYW1pbmcgPyAndGV4dC9ldmVudC1zdHJlYW0sIGFwcGxpY2F0aW9uL3gtbmRqc29uLCBhcHBsaWNhdGlvbi9qc29uJyA6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHRcdH07XG5cblx0XHRpZiAodGhpcy5zZXR0aW5ncy5hcGlLZXkpIHtcblx0XHRcdGhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLnNldHRpbmdzLmFwaUtleX1gO1xuXHRcdH1cblxuXHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5zZXR0aW5ncy5hcGlVcmx9JHtub3JtYWxpemVkRW5kcG9pbnR9YCwge1xuXHRcdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0XHRoZWFkZXJzOiBoZWFkZXJzLFxuXHRcdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpXG5cdFx0fSk7XG5cblx0XHRpZiAoIXJlc3BvbnNlLm9rKSB7XG5cdFx0XHRjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIHN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtlcnJvclRleHR9YCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgRWRpdG9yLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTdHJlYW1DaHVuayB9IGZyb20gJy4uL3R5cGVzL3Jlc3BvbnNlcyc7XG5pbXBvcnQgeyBhcHBlbmRUb0VuZE9mRG9jdW1lbnQgfSBmcm9tICcuLi91dGlscy9lZGl0b3ItdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgU3RyZWFtaW5nU2VydmljZSB7XG5cdGFzeW5jIGhhbmRsZVN0cmVhbWluZ1Jlc3BvbnNlKFxuXHRcdHJlc3BvbnNlOiBSZXNwb25zZSwgXG5cdFx0ZWRpdG9yOiBFZGl0b3IsIFxuXHRcdGhlYWRlclRleHQ6IHN0cmluZywgXG5cdFx0c3VjY2Vzc01lc3NhZ2U6IHN0cmluZ1xuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5IS5nZXRSZWFkZXIoKTtcblx0XHRjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG5cblx0XHQvLyBJbnNlcnQgaGVhZGVyIGF0IHRoZSBlbmQgb2YgZG9jdW1lbnRcblx0XHRhcHBlbmRUb0VuZE9mRG9jdW1lbnQoZWRpdG9yLCBoZWFkZXJUZXh0KTtcblxuXHRcdGxldCBidWZmZXIgPSAnJztcblx0XHRsZXQgdG90YWxDb250ZW50ID0gJyc7XG5cblx0XHR0cnkge1xuXHRcdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdFx0Y29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcblx0XHRcdFx0aWYgKGRvbmUpIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIERlY29kZSBjaHVuayBhbmQgYWRkIHRvIGJ1ZmZlclxuXHRcdFx0XHRjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcblx0XHRcdFx0YnVmZmVyICs9IGNodW5rO1xuXG5cdFx0XHRcdC8vIFRyeSBkaWZmZXJlbnQgbGluZSBlbmRpbmdzXG5cdFx0XHRcdGNvbnN0IGxpbmVzID0gYnVmZmVyLnNwbGl0KC9cXHI/XFxuLyk7XG5cdFx0XHRcdGJ1ZmZlciA9IGxpbmVzLnBvcCgpIHx8ICcnOyAvLyBLZWVwIGluY29tcGxldGUgbGluZSBpbiBidWZmZXJcblxuXHRcdFx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcblx0XHRcdFx0XHRpZiAobGluZS50cmltKCkgPT09ICcnKSBjb250aW51ZTtcblxuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRsZXQganNvblN0ciA9IGxpbmU7XG5cblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBTU0UgZm9ybWF0XG5cdFx0XHRcdFx0XHRpZiAobGluZS5zdGFydHNXaXRoKCdkYXRhOiAnKSkge1xuXHRcdFx0XHRcdFx0XHRqc29uU3RyID0gbGluZS5zbGljZSg2KS50cmltKCk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGxpbmUuc3RhcnRzV2l0aCgnZXZlbnQ6JykgfHwgbGluZS5zdGFydHNXaXRoKCdpZDonKSB8fCBsaW5lLnN0YXJ0c1dpdGgoJ3JldHJ5OicpKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNraXAgb3RoZXIgU1NFIGZpZWxkc1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gU2tpcCBTU0UgZW5kIG1hcmtlclxuXHRcdFx0XHRcdFx0aWYgKGpzb25TdHIgPT09ICdbRE9ORV0nIHx8IGpzb25TdHIgPT09ICdkYXRhOiBbRE9ORV0nKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBTa2lwIGVtcHR5IG9yIG5vbi1KU09OIGxpbmVzXG5cdFx0XHRcdFx0XHRpZiAoIWpzb25TdHIgfHwgKCFqc29uU3RyLnN0YXJ0c1dpdGgoJ3snKSAmJiAhanNvblN0ci5zdGFydHNXaXRoKCdbJykpKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRjb25zdCBzdHJlYW1EYXRhOiBTdHJlYW1DaHVuayA9IEpTT04ucGFyc2UoanNvblN0cik7XG5cblx0XHRcdFx0XHRcdC8vIFRyeSBkaWZmZXJlbnQgcG9zc2libGUgZmllbGQgbmFtZXMgZm9yIGNvbnRlbnRcblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRlbnQgPSBzdHJlYW1EYXRhLmNvbnRlbnQgfHwgc3RyZWFtRGF0YS50ZXh0IHx8IHN0cmVhbURhdGEuZGVsdGEgfHwgc3RyZWFtRGF0YS5jaHVuayB8fCBzdHJlYW1EYXRhLm1lc3NhZ2U7XG5cblx0XHRcdFx0XHRcdGlmIChjb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdHRvdGFsQ29udGVudCArPSBjb250ZW50O1xuXG5cdFx0XHRcdFx0XHRcdC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBVSSB1cGRhdGVzXG5cdFx0XHRcdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpO1xuXG5cdFx0XHRcdFx0XHRcdC8vIEdldCBjdXJyZW50IHBvc2l0aW9uIGFuZCBhcHBlbmQgY29udGVudFxuXHRcdFx0XHRcdFx0XHRjb25zdCBsYXN0TGluZSA9IGVkaXRvci5sYXN0TGluZSgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsYXN0TGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShsYXN0TGluZSk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFwcGVuZFBvc2l0aW9uID0geyBsaW5lOiBsYXN0TGluZSwgY2g6IGxhc3RMaW5lQ29udGVudC5sZW5ndGggfTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBcHBlbmQgY29udGVudCBkaXJlY3RseVxuXHRcdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKGNvbnRlbnQsIGFwcGVuZFBvc2l0aW9uLCBhcHBlbmRQb3NpdGlvbik7XG5cblx0XHRcdFx0XHRcdFx0Ly8gRW5zdXJlIHZpc2liaWxpdHlcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3TGFzdExpbmUgPSBlZGl0b3IubGFzdExpbmUoKTtcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IG5ld0xhc3RMaW5lLCBjaDogZWRpdG9yLmdldExpbmUobmV3TGFzdExpbmUpLmxlbmd0aCB9KTtcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnNjcm9sbEludG9WaWV3KHsgZnJvbTogeyBsaW5lOiBuZXdMYXN0TGluZSwgY2g6IDAgfSwgdG86IHsgbGluZTogbmV3TGFzdExpbmUsIGNoOiAwIH0gfSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGlmIChzdHJlYW1EYXRhLmRvbmUpIHtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShzdWNjZXNzTWVzc2FnZSk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGNhdGNoIChwYXJzZUVycm9yKSB7XG5cdFx0XHRcdFx0XHQvLyBTa2lwIG1hbGZvcm1lZCBKU09OIGNodW5rc1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBQcm9jZXNzIGFueSByZW1haW5pbmcgZGF0YSBpbiBidWZmZXJcblx0XHRcdGlmIChidWZmZXIudHJpbSgpKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0bGV0IGpzb25TdHIgPSBidWZmZXIudHJpbSgpO1xuXHRcdFx0XHRcdGlmIChqc29uU3RyLnN0YXJ0c1dpdGgoJ2RhdGE6ICcpKSB7XG5cdFx0XHRcdFx0XHRqc29uU3RyID0ganNvblN0ci5zbGljZSg2KS50cmltKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChqc29uU3RyICE9PSAnW0RPTkVdJyAmJiBqc29uU3RyLnN0YXJ0c1dpdGgoJ3snKSkge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc3RyZWFtRGF0YTogU3RyZWFtQ2h1bmsgPSBKU09OLnBhcnNlKGpzb25TdHIpO1xuXHRcdFx0XHRcdFx0Y29uc3QgY29udGVudCA9IHN0cmVhbURhdGEuY29udGVudCB8fCBzdHJlYW1EYXRhLnRleHQgfHwgc3RyZWFtRGF0YS5kZWx0YSB8fCBzdHJlYW1EYXRhLmNodW5rIHx8IHN0cmVhbURhdGEubWVzc2FnZTtcblx0XHRcdFx0XHRcdGlmIChjb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdHRvdGFsQ29udGVudCArPSBjb250ZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsYXN0TGluZSA9IGVkaXRvci5sYXN0TGluZSgpO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsYXN0TGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShsYXN0TGluZSk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFwcGVuZFBvc2l0aW9uID0geyBsaW5lOiBsYXN0TGluZSwgY2g6IGxhc3RMaW5lQ29udGVudC5sZW5ndGggfTtcblx0XHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZShjb250ZW50LCBhcHBlbmRQb3NpdGlvbiwgYXBwZW5kUG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRcdC8vIFNraXAgaWYgZmluYWwgYnVmZmVyIGNhbid0IGJlIHBhcnNlZFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoc3RyZWFtRXJyb3IpIHtcblx0XHRcdG5ldyBOb3RpY2UoJ0Vycm9yIGR1cmluZyBzdHJlYW1pbmc6ICcgKyBzdHJlYW1FcnJvci5tZXNzYWdlKTtcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0cmVhZGVyLnJlbGVhc2VMb2NrKCk7XG5cdFx0fVxuXG5cdFx0bmV3IE5vdGljZShzdWNjZXNzTWVzc2FnZSk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRUb0VuZE9mRG9jdW1lbnQoZWRpdG9yOiBFZGl0b3IsIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuXHRjb25zdCBsYXN0TGluZSA9IGVkaXRvci5sYXN0TGluZSgpO1xuXHRjb25zdCBsYXN0TGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShsYXN0TGluZSk7XG5cdGNvbnN0IGVuZE9mRG9jdW1lbnQgPSB7IGxpbmU6IGxhc3RMaW5lLCBjaDogbGFzdExpbmVDb250ZW50Lmxlbmd0aCB9O1xuXHRlZGl0b3Iuc2V0Q3Vyc29yKGVuZE9mRG9jdW1lbnQpO1xuXHRlZGl0b3IucmVwbGFjZVJhbmdlKHRleHQsIGVuZE9mRG9jdW1lbnQsIGVuZE9mRG9jdW1lbnQpO1xufSIsICJpbXBvcnQgeyBFdmVudHMgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCB0eXBlIFVJU3RhdGUgPSB7XG4gICAgaXNNb2RhbE9wZW46IGJvb2xlYW47XG59O1xuXG5leHBvcnQgY2xhc3MgVUlTdGF0ZVNlcnZpY2UgZXh0ZW5kcyBFdmVudHMge1xuICAgIHByaXZhdGUgc3RhdGU6IFVJU3RhdGUgPSB7XG4gICAgICAgIGlzTW9kYWxPcGVuOiBmYWxzZSxcbiAgICB9O1xuXG4gICAgZ2V0U3RhdGUoKTogVUlTdGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH1cblxuICAgIHNldE1vZGFsU3RhdGUoaXNPcGVuOiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzTW9kYWxPcGVuICE9PSBpc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaXNNb2RhbE9wZW4gPSBpc09wZW47XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ21vZGFsLXN0YXRlLWNoYW5nZScsIHRoaXMuc3RhdGUpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBFZGl0b3IsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEFJU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2FpLXNlcnZpY2UnO1xuaW1wb3J0IHsgU3RyZWFtaW5nU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3N0cmVhbWluZy1zZXJ2aWNlJztcbmltcG9ydCB7IENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb25maWctc2VydmljZSc7XG5pbXBvcnQgeyBBSVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMvY29uZmlnJztcbmltcG9ydCB7IFN1bW1hcml6ZVJlcXVlc3QgfSBmcm9tICcuLi90eXBlcy9yZXF1ZXN0cyc7XG5pbXBvcnQgeyBTdW1tYXJpemVSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzL3Jlc3BvbnNlcyc7XG5pbXBvcnQgeyBhcHBlbmRUb0VuZE9mRG9jdW1lbnQgfSBmcm9tICcuLi91dGlscy9lZGl0b3ItdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgU3VtbWFyaXplT3BlcmF0aW9uIHtcblx0cHJpdmF0ZSBhaVNlcnZpY2U6IEFJU2VydmljZTtcblx0cHJpdmF0ZSBzdHJlYW1pbmdTZXJ2aWNlOiBTdHJlYW1pbmdTZXJ2aWNlO1xuXHRwcml2YXRlIGNvbmZpZ1NlcnZpY2U6IENvbmZpZ1NlcnZpY2U7XG5cblx0Y29uc3RydWN0b3IoYWlTZXJ2aWNlOiBBSVNlcnZpY2UsIHN0cmVhbWluZ1NlcnZpY2U6IFN0cmVhbWluZ1NlcnZpY2UsIGNvbmZpZ1NlcnZpY2U6IENvbmZpZ1NlcnZpY2UpIHtcblx0XHR0aGlzLmFpU2VydmljZSA9IGFpU2VydmljZTtcblx0XHR0aGlzLnN0cmVhbWluZ1NlcnZpY2UgPSBzdHJlYW1pbmdTZXJ2aWNlO1xuXHRcdHRoaXMuY29uZmlnU2VydmljZSA9IGNvbmZpZ1NlcnZpY2U7XG5cdH1cblxuXHRhc3luYyBleGVjdXRlKGVkaXRvcjogRWRpdG9yLCB0ZXh0OiBzdHJpbmcsIHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCFzZXR0aW5ncy5zdW1tYXJpemUpIHtcblx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBjb25maWd1cmUgdGhlIHN1bW1hcml6ZSBzZXR0aW5ncyBpbiB0aGUgcGx1Z2luIHNldHRpbmdzIGZpcnN0Jyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCFzZXR0aW5ncy5hcGlVcmwpIHtcblx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBjb25maWd1cmUgdGhlIHN1bW1hcml6ZSBzZXR0aW5ncyBpbiB0aGUgcGx1Z2luIHNldHRpbmdzIGZpcnN0Jyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlcXVlc3RCb2R5OiBTdW1tYXJpemVSZXF1ZXN0ID0ge1xuXHRcdFx0XHRwYXlsb2FkOiB7XG5cdFx0XHRcdFx0dGV4dDogdGV4dCxcblx0XHRcdFx0XHRtYXhMZW5ndGg6IHNldHRpbmdzLnN1bW1hcml6ZS5tYXhMZW5ndGggfHwgMjAwXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNvbmZpZzoge1xuXHRcdFx0XHRcdHByb3ZpZGVyOiBzZXR0aW5ncy5zdW1tYXJpemUucHJvdmlkZXIsXG5cdFx0XHRcdFx0bW9kZWw6IHNldHRpbmdzLnN1bW1hcml6ZS5tb2RlbCxcblx0XHRcdFx0XHR0ZW1wZXJhdHVyZTogc2V0dGluZ3Muc3VtbWFyaXplLnRlbXBlcmF0dXJlLFxuXHRcdFx0XHRcdHN0cmVhbTogc2V0dGluZ3Muc3VtbWFyaXplLnN0cmVhbVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYWlTZXJ2aWNlLnN1bW1hcml6ZShyZXF1ZXN0Qm9keSk7XG5cblx0XHRcdC8vIENoZWNrIGNvbnRlbnQgdHlwZSB0byBkZXRlcm1pbmUgaWYgaXQncyBhIHN0cmVhbWluZyByZXNwb25zZVxuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7XG5cdFx0XHRjb25zdCBpc1N0cmVhbWluZyA9IHNldHRpbmdzLnN1bW1hcml6ZS5zdHJlYW0gJiZcblx0XHRcdFx0KGNvbnRlbnRUeXBlLmluY2x1ZGVzKCd0ZXh0L2V2ZW50LXN0cmVhbScpIHx8IGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi94LW5kanNvbicpIHx8IHJlc3BvbnNlLmJvZHkpO1xuXG5cdFx0XHRpZiAoaXNTdHJlYW1pbmcgJiYgcmVzcG9uc2UuYm9keSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnN0cmVhbWluZ1NlcnZpY2UuaGFuZGxlU3RyZWFtaW5nUmVzcG9uc2UoXG5cdFx0XHRcdFx0cmVzcG9uc2UsXG5cdFx0XHRcdFx0ZWRpdG9yLFxuXHRcdFx0XHRcdCdcXG5cXG4qKlN1bW1hcnk6KipcXG5cXG4nLFxuXHRcdFx0XHRcdCdUZXh0IHN1bW1hcml6ZWQgc3VjY2Vzc2Z1bGx5J1xuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSGFuZGxlIG5vbi1zdHJlYW1pbmcgcmVzcG9uc2Vcblx0XHRcdFx0Y29uc3QgcmVzdWx0OiBTdW1tYXJpemVSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblx0XHRcdFx0YXBwZW5kVG9FbmRPZkRvY3VtZW50KGVkaXRvciwgYFxcblxcbioqU3VtbWFyeToqKlxcblxcbiAke3Jlc3VsdC5zdW1tYXJ5fWApO1xuXHRcdFx0XHRuZXcgTm90aWNlKCdUZXh0IHN1bW1hcml6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN1bW1hcml6aW5nIHRleHQ6JywgZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIGNvbmZpZ3VyZSB0aGUgc3VtbWFyaXplIHNldHRpbmdzIGluIHRoZSBwbHVnaW4gc2V0dGluZ3MgZmlyc3QnKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEFJU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2FpLXNlcnZpY2UnO1xuaW1wb3J0IHsgU3RyZWFtaW5nU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3N0cmVhbWluZy1zZXJ2aWNlJztcbmltcG9ydCB7IENvbmZpZ1NlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy9jb25maWctc2VydmljZSc7XG5pbXBvcnQgeyBBSVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMvY29uZmlnJztcbmltcG9ydCB7IFRyYW5zbGF0ZVJlcXVlc3QgfSBmcm9tICcuLi90eXBlcy9yZXF1ZXN0cyc7XG5pbXBvcnQgeyBUcmFuc2xhdGVSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzL3Jlc3BvbnNlcyc7XG5pbXBvcnQgeyBhcHBlbmRUb0VuZE9mRG9jdW1lbnQgfSBmcm9tICcuLi91dGlscy9lZGl0b3ItdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgVHJhbnNsYXRlT3BlcmF0aW9uIHtcblx0cHJpdmF0ZSBhaVNlcnZpY2U6IEFJU2VydmljZTtcblx0cHJpdmF0ZSBzdHJlYW1pbmdTZXJ2aWNlOiBTdHJlYW1pbmdTZXJ2aWNlO1xuXHRwcml2YXRlIGNvbmZpZ1NlcnZpY2U6IENvbmZpZ1NlcnZpY2U7XG5cblx0Y29uc3RydWN0b3IoYWlTZXJ2aWNlOiBBSVNlcnZpY2UsIHN0cmVhbWluZ1NlcnZpY2U6IFN0cmVhbWluZ1NlcnZpY2UsIGNvbmZpZ1NlcnZpY2U6IENvbmZpZ1NlcnZpY2UpIHtcblx0XHR0aGlzLmFpU2VydmljZSA9IGFpU2VydmljZTtcblx0XHR0aGlzLnN0cmVhbWluZ1NlcnZpY2UgPSBzdHJlYW1pbmdTZXJ2aWNlO1xuXHRcdHRoaXMuY29uZmlnU2VydmljZSA9IGNvbmZpZ1NlcnZpY2U7XG5cdH1cblxuXHRhc3luYyBleGVjdXRlKGVkaXRvcjogRWRpdG9yLCB0ZXh0OiBzdHJpbmcsIHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzLCBjdXN0b21UYXJnZXRMYW5ndWFnZT86IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICghc2V0dGluZ3MudHJhbnNsYXRlKSB7XG5cdFx0XHRuZXcgTm90aWNlKCdQbGVhc2UgY29uZmlndXJlIHRoZSB0cmFuc2xhdGUgc2V0dGluZ3MgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncyBmaXJzdCcpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghc2V0dGluZ3MuYXBpVXJsKSB7XG5cdFx0XHRuZXcgTm90aWNlKCdQbGVhc2UgY29uZmlndXJlIHRoZSB0cmFuc2xhdGUgc2V0dGluZ3MgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncyBmaXJzdCcpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIElmIG5vIGN1c3RvbSB0YXJnZXQgbGFuZ3VhZ2UgaXMgcHJvdmlkZWQsIHVzZSBkZWZhdWx0IGZyb20gc2V0dGluZ3Ncblx0XHRjb25zdCB0YXJnZXRMYW5ndWFnZSA9IGN1c3RvbVRhcmdldExhbmd1YWdlIHx8IHNldHRpbmdzLnRyYW5zbGF0ZS5kZWZhdWx0VGFyZ2V0TGFuZ3VhZ2U7XG5cblx0XHRpZiAoIXRhcmdldExhbmd1YWdlKSB7XG5cdFx0XHRuZXcgTm90aWNlKCdQbGVhc2UgY29uZmlndXJlIHRoZSB0cmFuc2xhdGUgc2V0dGluZ3MgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncyBmaXJzdCcpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCByZXF1ZXN0Qm9keTogVHJhbnNsYXRlUmVxdWVzdCA9IHtcblx0XHRcdFx0cGF5bG9hZDoge1xuXHRcdFx0XHRcdHRleHQ6IHRleHQsXG5cdFx0XHRcdFx0dGFyZ2V0TGFuZ3VhZ2U6IHRhcmdldExhbmd1YWdlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGNvbmZpZzoge1xuXHRcdFx0XHRcdHByb3ZpZGVyOiBzZXR0aW5ncy50cmFuc2xhdGUucHJvdmlkZXIsXG5cdFx0XHRcdFx0bW9kZWw6IHNldHRpbmdzLnRyYW5zbGF0ZS5tb2RlbCxcblx0XHRcdFx0XHR0ZW1wZXJhdHVyZTogc2V0dGluZ3MudHJhbnNsYXRlLnRlbXBlcmF0dXJlLFxuXHRcdFx0XHRcdHN0cmVhbTogc2V0dGluZ3MudHJhbnNsYXRlLnN0cmVhbVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuYWlTZXJ2aWNlLnRyYW5zbGF0ZShyZXF1ZXN0Qm9keSk7XG5cblx0XHRcdC8vIENoZWNrIGNvbnRlbnQgdHlwZSB0byBkZXRlcm1pbmUgaWYgaXQncyBhIHN0cmVhbWluZyByZXNwb25zZVxuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7XG5cdFx0XHRjb25zdCBpc1N0cmVhbWluZyA9IHNldHRpbmdzLnRyYW5zbGF0ZS5zdHJlYW0gJiZcblx0XHRcdFx0KGNvbnRlbnRUeXBlLmluY2x1ZGVzKCd0ZXh0L2V2ZW50LXN0cmVhbScpIHx8IGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi94LW5kanNvbicpIHx8IHJlc3BvbnNlLmJvZHkpO1xuXG5cdFx0XHRpZiAoaXNTdHJlYW1pbmcgJiYgcmVzcG9uc2UuYm9keSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnN0cmVhbWluZ1NlcnZpY2UuaGFuZGxlU3RyZWFtaW5nUmVzcG9uc2UoXG5cdFx0XHRcdFx0cmVzcG9uc2UsXG5cdFx0XHRcdFx0ZWRpdG9yLFxuXHRcdFx0XHRcdGBcXG5cXG4qKlRyYW5zbGF0aW9uICgke3RhcmdldExhbmd1YWdlfSk6KipcXG5cXG5gLFxuXHRcdFx0XHRcdCdUZXh0IHRyYW5zbGF0ZWQgc3VjY2Vzc2Z1bGx5J1xuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSGFuZGxlIG5vbi1zdHJlYW1pbmcgcmVzcG9uc2Vcblx0XHRcdFx0Y29uc3QgcmVzdWx0OiBUcmFuc2xhdGVSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblx0XHRcdFx0YXBwZW5kVG9FbmRPZkRvY3VtZW50KGVkaXRvciwgYFxcblxcbioqVHJhbnNsYXRpb24gKCR7dGFyZ2V0TGFuZ3VhZ2V9KToqKlxcblxcbiR7cmVzdWx0LnRyYW5zbGF0aW9ufWApO1xuXHRcdFx0XHRuZXcgTm90aWNlKCdUZXh0IHRyYW5zbGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHRyYW5zbGF0aW5nIHRleHQ6JywgZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIGNvbmZpZ3VyZSB0aGUgdHJhbnNsYXRlIHNldHRpbmdzIGluIHRoZSBwbHVnaW4gc2V0dGluZ3MgZmlyc3QnKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBFZGl0b3IsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEFJU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2FpLXNlcnZpY2UnO1xuaW1wb3J0IHsgQ29uZmlnU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NvbmZpZy1zZXJ2aWNlJztcbmltcG9ydCB7IEFJUGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcy9jb25maWcnO1xuaW1wb3J0IHsgS2V5d29yZHNSZXF1ZXN0IH0gZnJvbSAnLi4vdHlwZXMvcmVxdWVzdHMnO1xuaW1wb3J0IHsgS2V5d29yZHNSZXNwb25zZSB9IGZyb20gJy4uL3R5cGVzL3Jlc3BvbnNlcyc7XG5cbmV4cG9ydCBjbGFzcyBLZXl3b3Jkc09wZXJhdGlvbiB7XG5cdHByaXZhdGUgYWlTZXJ2aWNlOiBBSVNlcnZpY2U7XG5cdHByaXZhdGUgY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZTtcblxuXHRjb25zdHJ1Y3RvcihhaVNlcnZpY2U6IEFJU2VydmljZSwgY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZSkge1xuXHRcdHRoaXMuYWlTZXJ2aWNlID0gYWlTZXJ2aWNlO1xuXHRcdHRoaXMuY29uZmlnU2VydmljZSA9IGNvbmZpZ1NlcnZpY2U7XG5cdH1cblxuXHRhc3luYyBleGVjdXRlKGVkaXRvcjogRWRpdG9yLCB0ZXh0OiBzdHJpbmcsIHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCFzZXR0aW5ncy5rZXl3b3Jkcykge1xuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIGNvbmZpZ3VyZSB0aGUga2V5d29yZHMgc2V0dGluZ3MgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncyBmaXJzdCcpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICghc2V0dGluZ3MuYXBpVXJsKSB7XG5cdFx0XHRuZXcgTm90aWNlKCdQbGVhc2UgY29uZmlndXJlIHRoZSBrZXl3b3JkcyBzZXR0aW5ncyBpbiB0aGUgcGx1Z2luIHNldHRpbmdzIGZpcnN0Jyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlcXVlc3RCb2R5OiBLZXl3b3Jkc1JlcXVlc3QgPSB7XG5cdFx0XHRcdHBheWxvYWQ6IHtcblx0XHRcdFx0XHR0ZXh0OiB0ZXh0LFxuXHRcdFx0XHRcdG1heEtleXdvcmRzOiBzZXR0aW5ncy5rZXl3b3Jkcy5tYXhLZXl3b3JkcyB8fCAxMCxcblx0XHRcdFx0fSxcblx0XHRcdFx0Y29uZmlnOiB7XG5cdFx0XHRcdFx0cHJvdmlkZXI6IHNldHRpbmdzLmtleXdvcmRzLnByb3ZpZGVyLFxuXHRcdFx0XHRcdG1vZGVsOiBzZXR0aW5ncy5rZXl3b3Jkcy5tb2RlbCxcblx0XHRcdFx0XHR0ZW1wZXJhdHVyZTogc2V0dGluZ3Mua2V5d29yZHMudGVtcGVyYXR1cmUgfHwgMC4zLFxuXHRcdFx0XHRcdHN0cmVhbTogc2V0dGluZ3Mua2V5d29yZHMuc3RyZWFtXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5haVNlcnZpY2UuZXh0cmFjdEtleXdvcmRzKHJlcXVlc3RCb2R5KTtcblx0XHRcdGNvbnN0IHJlc3VsdDogS2V5d29yZHNSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuXHRcdFx0Ly8gQWRkIGtleXdvcmRzIGFmdGVyIHRoZSBzZWxlY3RlZCB0ZXh0XG5cdFx0XHRjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCd0bycpO1xuXHRcdFx0ZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpO1xuXHRcdFx0Y29uc3Qga2V5d29yZHNMaXN0ID0gcmVzdWx0LmtleXdvcmRzLm1hcChrZXl3b3JkID0+IGAtICR7a2V5d29yZH1gKS5qb2luKCdcXG4nKTtcblx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoYFxcblxcbioqS2V5d29yZHM6KipcXG4ke2tleXdvcmRzTGlzdH1gLCBjdXJzb3IpO1xuXG5cdFx0XHRuZXcgTm90aWNlKCdLZXl3b3JkcyBleHRyYWN0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4dHJhY3Rpbmcga2V5d29yZHM6JywgZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIGNvbmZpZ3VyZSB0aGUga2V5d29yZHMgc2V0dGluZ3MgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncyBmaXJzdCcpO1xuXHRcdH1cblx0fVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQUlTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvYWktc2VydmljZSc7XG5pbXBvcnQgeyBTdHJlYW1pbmdTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvc3RyZWFtaW5nLXNlcnZpY2UnO1xuaW1wb3J0IHsgQ29uZmlnU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2NvbmZpZy1zZXJ2aWNlJztcbmltcG9ydCB7IEFJUGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcy9jb25maWcnO1xuaW1wb3J0IHsgUmV3cml0ZVJlcXVlc3QgfSBmcm9tICcuLi90eXBlcy9yZXF1ZXN0cyc7XG5pbXBvcnQgeyBSZXdyaXRlUmVzcG9uc2UgfSBmcm9tICcuLi90eXBlcy9yZXNwb25zZXMnO1xuaW1wb3J0IHsgYXBwZW5kVG9FbmRPZkRvY3VtZW50IH0gZnJvbSAnLi4vdXRpbHMvZWRpdG9yLXV0aWxzJztcblxuZXhwb3J0IGNsYXNzIFJld3JpdGVPcGVyYXRpb24ge1xuXHRwcml2YXRlIGFpU2VydmljZTogQUlTZXJ2aWNlO1xuXHRwcml2YXRlIHN0cmVhbWluZ1NlcnZpY2U6IFN0cmVhbWluZ1NlcnZpY2U7XG5cdHByaXZhdGUgY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZTtcblxuXHRjb25zdHJ1Y3RvcihhaVNlcnZpY2U6IEFJU2VydmljZSwgc3RyZWFtaW5nU2VydmljZTogU3RyZWFtaW5nU2VydmljZSwgY29uZmlnU2VydmljZTogQ29uZmlnU2VydmljZSkge1xuXHRcdHRoaXMuYWlTZXJ2aWNlID0gYWlTZXJ2aWNlO1xuXHRcdHRoaXMuc3RyZWFtaW5nU2VydmljZSA9IHN0cmVhbWluZ1NlcnZpY2U7XG5cdFx0dGhpcy5jb25maWdTZXJ2aWNlID0gY29uZmlnU2VydmljZTtcblx0fVxuXG5cdGFzeW5jIGV4ZWN1dGUoZWRpdG9yOiBFZGl0b3IsIHRleHQ6IHN0cmluZywgaW5zdHJ1Y3Rpb246IHN0cmluZyx0b25lOiBzdHJpbmcgLGhlYWRlckxhYmVsOiBzdHJpbmcsIHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0aWYgKCFzZXR0aW5ncy5yZXdyaXRlKSB7XG5cdFx0XHRuZXcgTm90aWNlKCdQbGVhc2UgY29uZmlndXJlIHRoZSByZXdyaXRlIHNldHRpbmdzIGluIHRoZSBwbHVnaW4gc2V0dGluZ3MgZmlyc3QnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXNldHRpbmdzLmFwaVVybCkge1xuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIGNvbmZpZ3VyZSB0aGUgcmV3cml0ZSBzZXR0aW5ncyBpbiB0aGUgcGx1Z2luIHNldHRpbmdzIGZpcnN0Jyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCByZXF1ZXN0Qm9keTogUmV3cml0ZVJlcXVlc3QgPSB7XG5cdFx0XHRcdHBheWxvYWQ6IHtcblx0XHRcdFx0XHR0ZXh0LFxuXHRcdFx0XHRcdGluc3RydWN0aW9uLFxuXHQgICAgICAgICAgICAgICAgICAgLi4uKHRvbmUgJiYgdG9uZS50cmltKCkgIT09ICcnICYmIHsgdG9uZSB9KVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjb25maWc6IHtcblx0XHRcdFx0XHRwcm92aWRlcjogc2V0dGluZ3MucmV3cml0ZS5wcm92aWRlcixcblx0XHRcdFx0XHRtb2RlbDogc2V0dGluZ3MucmV3cml0ZS5tb2RlbCxcblx0XHRcdFx0XHR0ZW1wZXJhdHVyZTogc2V0dGluZ3MucmV3cml0ZS50ZW1wZXJhdHVyZSxcblx0XHRcdFx0XHRzdHJlYW06IHNldHRpbmdzLnJld3JpdGUuc3RyZWFtXG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5haVNlcnZpY2UucmV3cml0ZShyZXF1ZXN0Qm9keSk7XG5cblx0XHRcdGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpIHx8ICcnO1xuXHRcdFx0Y29uc3QgaXNTdHJlYW1pbmcgPSBzZXR0aW5ncy5yZXdyaXRlLnN0cmVhbSAmJlxuXHRcdFx0XHQoY29udGVudFR5cGUuaW5jbHVkZXMoJ3RleHQvZXZlbnQtc3RyZWFtJykgfHwgY29udGVudFR5cGUuaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL3gtbmRqc29uJykgfHwgcmVzcG9uc2UuYm9keSk7XG5cblx0XHRcdGlmIChpc1N0cmVhbWluZyAmJiByZXNwb25zZS5ib2R5KSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RyZWFtaW5nU2VydmljZS5oYW5kbGVTdHJlYW1pbmdSZXNwb25zZShcblx0XHRcdFx0XHRyZXNwb25zZSxcblx0XHRcdFx0XHRlZGl0b3IsXG5cdFx0XHRcdFx0YFxcblxcbioqJHtoZWFkZXJMYWJlbH06KipcXG5cXG5gLFxuXHRcdFx0XHRcdCdBY3Rpb24gYXBwbGllZCBzdWNjZXNzZnVsbHknXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zdCByZXN1bHQ6IFJld3JpdGVSZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblx0XHRcdFx0Y29uc3Qgb3V0cHV0ID0gcmVzdWx0LnRleHQgfHwgcmVzdWx0LnJlc3VsdCB8fCByZXN1bHQub3V0cHV0IHx8IHJlc3VsdC5jb250ZW50IHx8IHJlc3VsdC5tZXNzYWdlIHx8ICcnO1xuXG5cdFx0XHRcdGFwcGVuZFRvRW5kT2ZEb2N1bWVudChlZGl0b3IsIGBcXG5cXG4qKiR7aGVhZGVyTGFiZWx9OioqXFxuXFxuJHtvdXRwdXR9YCk7XG5cdFx0XHRcdG5ldyBOb3RpY2UoJ0FjdGlvbiBhcHBsaWVkIHN1Y2Nlc3NmdWxseScpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBhcHBseWluZyByZXdyaXRlOicsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBjb25maWd1cmUgdGhlIHJld3JpdGUgc2V0dGluZ3MgaW4gdGhlIHBsdWdpbiBzZXR0aW5ncyBmaXJzdCcpO1xuXHRcdH1cblx0fVxuXG5cdC8vIENvbnZlbmllbmNlIG1ldGhvZHMgZm9yIGRpZmZlcmVudCByZXdyaXRlIG9wZXJhdGlvbnNcblx0YXN5bmMgaW1wcm92ZURlc2NyaXB0aW9uKGVkaXRvcjogRWRpdG9yLCB0ZXh0OiBzdHJpbmcsIHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5leGVjdXRlKGVkaXRvciwgdGV4dCwgJ2ltcHJvdmVfdGV4dCcsICcnLCdJbXByb3ZlZCBkZXNjcmlwdGlvbicsIHNldHRpbmdzKTtcblx0fVxuXG5cdGFzeW5jIGltcHJvdmVXcml0aW5nKGVkaXRvcjogRWRpdG9yLCB0ZXh0OiBzdHJpbmcsIHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5leGVjdXRlKGVkaXRvciwgdGV4dCwgJ2ltcHJvdmVfdGV4dCcsICcnLCdJbXByb3ZlZCB3cml0aW5nJywgc2V0dGluZ3MpO1xuXHR9XG5cblx0YXN5bmMgZml4U3BlbGxpbmdHcmFtbWFyKGVkaXRvcjogRWRpdG9yLCB0ZXh0OiBzdHJpbmcsIHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5leGVjdXRlKGVkaXRvciwgdGV4dCwgJ2ZpeF9zcGVsbGluZ19ncmFtbWFyJywgJycsJ0ZpeGVkIHNwZWxsaW5nICYgZ3JhbW1hcicsIHNldHRpbmdzKTtcblx0fVxuXG5cdGFzeW5jIGJyYWluc3Rvcm0oZWRpdG9yOiBFZGl0b3IsIHRleHQ6IHN0cmluZywgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmV4ZWN1dGUoZWRpdG9yLCB0ZXh0LCAnYnJhaW5zdG9ybV9pZGVhcycsICcnLCdCcmFpbnN0b3JtJywgc2V0dGluZ3MpO1xuXHR9XG5cblx0YXN5bmMgbWFrZVNob3J0ZXIoZWRpdG9yOiBFZGl0b3IsIHRleHQ6IHN0cmluZywgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmV4ZWN1dGUoZWRpdG9yLCB0ZXh0LCAnc2hvcnRlbicsICcnLCdTaG9ydGVyIHZlcnNpb24nLCBzZXR0aW5ncyk7XG5cdH1cblxuXHRhc3luYyBjaGFuZ2VUb25lKGVkaXRvcjogRWRpdG9yLCB0ZXh0OiBzdHJpbmcsIHRvbmU6IHN0cmluZywgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRhd2FpdCB0aGlzLmV4ZWN1dGUoZWRpdG9yLCB0ZXh0LCAncmV3cml0ZV93aXRoX3RvbmUnLCB0b25lLCdDaGFuZ2luZyB0b25lJywgc2V0dGluZ3MpO1xuXHR9XG59IiwgImltcG9ydCB7IEVkaXRvciwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQUlQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzL2NvbmZpZyc7XG5pbXBvcnQge0FJU2VydmljZX0gZnJvbSBcIi4uL3NlcnZpY2VzL2FpLXNlcnZpY2VcIjtcbmltcG9ydCB7U3RyZWFtaW5nU2VydmljZX0gZnJvbSBcIi4uL3NlcnZpY2VzL3N0cmVhbWluZy1zZXJ2aWNlXCI7XG5pbXBvcnQge0NvbmZpZ1NlcnZpY2V9IGZyb20gXCIuLi9zZXJ2aWNlcy9jb25maWctc2VydmljZVwiO1xuaW1wb3J0IHtDb21wb3NlUmVxdWVzdH0gZnJvbSBcIi4uL3R5cGVzL3JlcXVlc3RzXCI7XG5pbXBvcnQge1RyYW5zbGF0ZVJlc3BvbnNlfSBmcm9tIFwiLi4vdHlwZXMvcmVzcG9uc2VzXCI7XG5pbXBvcnQge2FwcGVuZFRvRW5kT2ZEb2N1bWVudH0gZnJvbSBcIi4uL3V0aWxzL2VkaXRvci11dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgQ29tcG9zZU9wZXJhdGlvbiB7XG4gICAgcHJpdmF0ZSBhaVNlcnZpY2U6IEFJU2VydmljZTtcbiAgICBwcml2YXRlIHN0cmVhbWluZ1NlcnZpY2U6IFN0cmVhbWluZ1NlcnZpY2U7XG4gICAgcHJpdmF0ZSBjb25maWdTZXJ2aWNlOiBDb25maWdTZXJ2aWNlO1xuXG4gICAgY29uc3RydWN0b3IoYWlTZXJ2aWNlOiBBSVNlcnZpY2UsIHN0cmVhbWluZ1NlcnZpY2U6IFN0cmVhbWluZ1NlcnZpY2UsIGNvbmZpZ1NlcnZpY2U6IENvbmZpZ1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5haVNlcnZpY2UgPSBhaVNlcnZpY2U7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nU2VydmljZSA9IHN0cmVhbWluZ1NlcnZpY2U7XG4gICAgICAgIHRoaXMuY29uZmlnU2VydmljZSA9IGNvbmZpZ1NlcnZpY2U7XG4gICAgfVxuXG5cbiAgICBhc3luYyBleGVjdXRlKFxuICAgICAgICBlZGl0b3I6IEVkaXRvcixcbiAgICAgICAgdG9waWM6IHN0cmluZyxcbiAgICAgICAgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3NcbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFzZXR0aW5ncy5jb21wb3NlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgY29uZmlndXJlIHRoZSBjb21wb3NlIHNldHRpbmdzIGluIHRoZSBwbHVnaW4gc2V0dGluZ3MgZmlyc3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc2V0dGluZ3MuYXBpVXJsKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgY29uZmlndXJlIHRoZSBjb21wb3NlIHNldHRpbmdzIGluIHRoZSBwbHVnaW4gc2V0dGluZ3MgZmlyc3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0Qm9keTogQ29tcG9zZVJlcXVlc3QgPSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZDoge1xuICAgICAgICAgICAgICAgICAgICB0b3BpYzogdG9waWMsXG4gICAgICAgICAgICAgICAgICAgIG1heExlbmd0aDogc2V0dGluZ3MuY29tcG9zZT8ubWF4TGVuZ3RoIHx8IDIwMCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlcjogc2V0dGluZ3MuY29tcG9zZS5wcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLmNvbXBvc2UubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy5jb21wb3NlLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHNldHRpbmdzLmNvbXBvc2Uuc3RyZWFtXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5haVNlcnZpY2UuY29tcG9zZShyZXF1ZXN0Qm9keSk7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGNvbnRlbnQgdHlwZSB0byBkZXRlcm1pbmUgaWYgaXQncyBhIHN0cmVhbWluZyByZXNwb25zZVxuICAgICAgICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykgfHwgJyc7XG4gICAgICAgICAgICBjb25zdCBpc1N0cmVhbWluZyA9IHNldHRpbmdzLmNvbXBvc2Uuc3RyZWFtICYmXG4gICAgICAgICAgICAgICAgKGNvbnRlbnRUeXBlLmluY2x1ZGVzKCd0ZXh0L2V2ZW50LXN0cmVhbScpIHx8IGNvbnRlbnRUeXBlLmluY2x1ZGVzKCdhcHBsaWNhdGlvbi94LW5kanNvbicpIHx8IHJlc3BvbnNlLmJvZHkpO1xuXG4gICAgICAgICAgICBpZiAoaXNTdHJlYW1pbmcgJiYgcmVzcG9uc2UuYm9keSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RyZWFtaW5nU2VydmljZS5oYW5kbGVTdHJlYW1pbmdSZXNwb25zZShcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICAgICAgYFxcblxcbioqTmV3IElkZWEqKlxcblxcbmAsXG4gICAgICAgICAgICAgICAgICAgICdDb21wb3NlZCBzdWNjZXNzZnVsbHknXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIG5vbi1zdHJlYW1pbmcgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQ6IFRyYW5zbGF0ZVJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICAgIGFwcGVuZFRvRW5kT2ZEb2N1bWVudChlZGl0b3IsIGBcXG5cXG4qKk5ldyBJZGVhKipcXG5cXG5gLCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQ29tcG9zZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDb21wb3NlIG9wZXJhdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2UgY29uZmlndXJlIHRoZSBjb21wb3NlIHNldHRpbmdzIGluIHRoZSBwbHVnaW4gc2V0dGluZ3MgZmlyc3QnKTtcblxuICAgICAgICB9XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25WaWV3LCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTdW1tYXJpemVPcGVyYXRpb24gfSBmcm9tICcuLi9vcGVyYXRpb25zL3N1bW1hcml6ZSc7XG5pbXBvcnQgeyBUcmFuc2xhdGVPcGVyYXRpb24gfSBmcm9tICcuLi9vcGVyYXRpb25zL3RyYW5zbGF0ZSc7XG5pbXBvcnQgeyBLZXl3b3Jkc09wZXJhdGlvbiB9IGZyb20gJy4uL29wZXJhdGlvbnMva2V5d29yZHMnO1xuaW1wb3J0IHsgUmV3cml0ZU9wZXJhdGlvbiB9IGZyb20gJy4uL29wZXJhdGlvbnMvcmV3cml0ZSc7XG5pbXBvcnQgeyBBSVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMvY29uZmlnJztcbmltcG9ydCB7IExhbmd1YWdlLCBTVVBQT1JURURfTEFOR1VBR0VTIH0gZnJvbSAnLi4vdHlwZXMvbGFuZ3VhZ2VzJztcbmltcG9ydCB7IFRPTkVTIH0gZnJvbSAnLi4vdHlwZXMvdG9uZXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmREZWZpbml0aW9uIHtcblx0aWQ6IHN0cmluZztcblx0bmFtZTogc3RyaW5nO1xuXHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IFByb21pc2U8dm9pZD47XG59XG5cbmV4cG9ydCBjbGFzcyBDb21tYW5kc01hbmFnZXIge1xuXHRwcml2YXRlIHN1bW1hcml6ZU9wZXJhdGlvbjogU3VtbWFyaXplT3BlcmF0aW9uO1xuXHRwcml2YXRlIHRyYW5zbGF0ZU9wZXJhdGlvbjogVHJhbnNsYXRlT3BlcmF0aW9uO1xuXHRwcml2YXRlIGtleXdvcmRzT3BlcmF0aW9uOiBLZXl3b3Jkc09wZXJhdGlvbjtcblx0cHJpdmF0ZSByZXdyaXRlck9wZXJhdGlvbjogUmV3cml0ZU9wZXJhdGlvbjtcblx0cHJpdmF0ZSBzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncztcblx0cHJpdmF0ZSBsYW5ndWFnZXM6IExhbmd1YWdlW107XG5cdHByaXZhdGUgdG9uZXM6IHN0cmluZ1tdID0gVE9ORVM7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0c3VtbWFyaXplT3BlcmF0aW9uOiBTdW1tYXJpemVPcGVyYXRpb24sXG5cdFx0dHJhbnNsYXRlT3BlcmF0aW9uOiBUcmFuc2xhdGVPcGVyYXRpb24sXG5cdFx0a2V5d29yZHNPcGVyYXRpb246IEtleXdvcmRzT3BlcmF0aW9uLFxuXHRcdHJld3JpdGVyT3BlcmF0aW9uOiBSZXdyaXRlT3BlcmF0aW9uLFxuXHRcdHNldHRpbmdzOiBBSVBsdWdpblNldHRpbmdzXG5cdCkge1xuXHRcdHRoaXMuc3VtbWFyaXplT3BlcmF0aW9uID0gc3VtbWFyaXplT3BlcmF0aW9uO1xuXHRcdHRoaXMudHJhbnNsYXRlT3BlcmF0aW9uID0gdHJhbnNsYXRlT3BlcmF0aW9uO1xuXHRcdHRoaXMua2V5d29yZHNPcGVyYXRpb24gPSBrZXl3b3Jkc09wZXJhdGlvbjtcblx0XHR0aGlzLnJld3JpdGVyT3BlcmF0aW9uID0gcmV3cml0ZXJPcGVyYXRpb247XG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuXHRcdHRoaXMubGFuZ3VhZ2VzID0gWy4uLlNVUFBPUlRFRF9MQU5HVUFHRVNdOyAvLyBDcmVhdGUgYSBjb3B5XG5cdH1cblxuXHR1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncyk6IHZvaWQge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcblx0fVxuXG5cdGdldENvbW1hbmRzKCk6IENvbW1hbmREZWZpbml0aW9uW10ge1xuXHRcdGNvbnN0IGJhc2VDb21tYW5kczogQ29tbWFuZERlZmluaXRpb25bXSA9IFtcblx0XHRcdHtcblx0XHRcdFx0aWQ6ICdzdW1tYXJpemUtc2VsZWN0aW9uJyxcblx0XHRcdFx0bmFtZTogJ1N1bW1hcml6ZSBzZWxlY3RlZCB0ZXh0Jyxcblx0XHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuXHRcdFx0XHRcdGlmIChzZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5zdW1tYXJpemVPcGVyYXRpb24uZXhlY3V0ZShlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3Qgc29tZSB0ZXh0IHRvIHN1bW1hcml6ZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0aWQ6ICdleHRyYWN0LWtleXdvcmRzLXNlbGVjdGlvbicsXG5cdFx0XHRcdG5hbWU6ICdFeHRyYWN0IGtleXdvcmRzIGZyb20gc2VsZWN0ZWQgdGV4dCcsXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0XHRpZiAoc2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMua2V5d29yZHNPcGVyYXRpb24uZXhlY3V0ZShlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3Qgc29tZSB0ZXh0IHRvIGV4dHJhY3Qga2V5d29yZHMgZnJvbScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0aWQ6ICd0cmFuc2xhdGUtc2VsZWN0aW9uJyxcblx0XHRcdFx0bmFtZTogJ1RyYW5zbGF0ZSBzZWxlY3RlZCB0ZXh0IChkZWZhdWx0IGxhbmd1YWdlKScsXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0XHRpZiAoc2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMudHJhbnNsYXRlT3BlcmF0aW9uLmV4ZWN1dGUoZWRpdG9yLCBzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdQbGVhc2Ugc2VsZWN0IHNvbWUgdGV4dCB0byB0cmFuc2xhdGUnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdGlkOiAnaW1wcm92ZS1kZXNjcmlwdGlvbi1zZWxlY3Rpb24nLFxuXHRcdFx0XHRuYW1lOiAnSW1wcm92ZSBkZXNjcmlwdGlvbiBvZiBzZWxlY3RlZCB0ZXh0Jyxcblx0XHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuXHRcdFx0XHRcdGlmIChzZWxlY3Rpb24ubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5yZXdyaXRlck9wZXJhdGlvbi5pbXByb3ZlRGVzY3JpcHRpb24oZWRpdG9yLCBzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdQbGVhc2Ugc2VsZWN0IHNvbWUgdGV4dCB0byBpbXByb3ZlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRpZDogJ2ltcHJvdmUtd3JpdGluZy1zZWxlY3Rpb24nLFxuXHRcdFx0XHRuYW1lOiAnSW1wcm92ZSB3cml0aW5nIG9mIHNlbGVjdGVkIHRleHQnLFxuXHRcdFx0XHRlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0XHRjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnJld3JpdGVyT3BlcmF0aW9uLmltcHJvdmVXcml0aW5nKGVkaXRvciwgc2VsZWN0aW9uLCB0aGlzLnNldHRpbmdzKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIHNlbGVjdCBzb21lIHRleHQgdG8gaW1wcm92ZScpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0aWQ6ICdmaXgtc3BlbGxpbmctZ3JhbW1hci1zZWxlY3Rpb24nLFxuXHRcdFx0XHRuYW1lOiAnRml4IHNwZWxsaW5nICYgZ3JhbW1hciBvZiBzZWxlY3Rpb24nLFxuXHRcdFx0XHRlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0XHRjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRcdFx0aWYgKHNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnJld3JpdGVyT3BlcmF0aW9uLmZpeFNwZWxsaW5nR3JhbW1hcihlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3Qgc29tZSB0ZXh0IHRvIGNvcnJlY3QnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdGlkOiAnYnJhaW5zdG9ybS1zZWxlY3Rpb24nLFxuXHRcdFx0XHRuYW1lOiAnQnJhaW5zdG9ybSBpZGVhcyBmcm9tIHNlbGVjdGlvbicsXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0XHRpZiAoc2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucmV3cml0ZXJPcGVyYXRpb24uYnJhaW5zdG9ybShlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncyk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBzZWxlY3Qgc29tZSB0ZXh0IHRvIGJyYWluc3Rvcm0gb24nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdGlkOiAnbWFrZS1zaG9ydGVyLXNlbGVjdGlvbicsXG5cdFx0XHRcdG5hbWU6ICdNYWtlIHNlbGVjdGVkIHRleHQgc2hvcnRlcicsXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiBhc3luYyAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0XHRpZiAoc2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucmV3cml0ZXJPcGVyYXRpb24ubWFrZVNob3J0ZXIoZWRpdG9yLCBzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKCdQbGVhc2Ugc2VsZWN0IHNvbWUgdGV4dCB0byBzaG9ydGVuJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XTtcblxuXHRcdC8vIEdlbmVyYXRlIHRyYW5zbGF0aW9uIGNvbW1hbmRzIGZvciBlYWNoIGxhbmd1YWdlXG5cdFx0Y29uc3QgdHJhbnNsYXRpb25Db21tYW5kczogQ29tbWFuZERlZmluaXRpb25bXSA9IHRoaXMubGFuZ3VhZ2VzLm1hcChsYW5ndWFnZSA9PiAoe1xuXHRcdFx0aWQ6IGB0cmFuc2xhdGUtc2VsZWN0aW9uLXRvLSR7bGFuZ3VhZ2UuY29kZX1gLFxuXHRcdFx0bmFtZTogYFRyYW5zbGF0ZSBzZWxlY3Rpb24gdG8gJHtsYW5ndWFnZS5sYWJlbH1gLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0aWYgKHNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy50cmFuc2xhdGVPcGVyYXRpb24uZXhlY3V0ZShlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncywgbGFuZ3VhZ2UuY29kZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIHNlbGVjdCBzb21lIHRleHQgdG8gdHJhbnNsYXRlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KSk7XG5cblx0XHQvLyBHZW5lcmF0ZSB0b25lIGNvbW1hbmRzIGZvciBlYWNoIHRvbmVcblx0XHRjb25zdCByZXdyaXRlQ29tbWFuZHM6IENvbW1hbmREZWZpbml0aW9uW10gPSB0aGlzLnRvbmVzLm1hcCh0b25lID0+ICh7XG5cdFx0XHRpZDogYGNoYW5nZS10b25lLSR7dG9uZS50b0xvd2VyQ2FzZSgpfS1zZWxlY3Rpb25gLFxuXHRcdFx0bmFtZTogYENoYW5nZSB0b25lIHRvICR7dG9uZX1gLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0aWYgKHNlbGVjdGlvbi5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5yZXdyaXRlck9wZXJhdGlvbi5jaGFuZ2VUb25lKGVkaXRvciwgc2VsZWN0aW9uLCB0b25lLCB0aGlzLnNldHRpbmdzKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKCdQbGVhc2Ugc2VsZWN0IHNvbWUgdGV4dCB0byB0cmFuc2xhdGUnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pKTtcblxuXHRcdHJldHVybiBbLi4uYmFzZUNvbW1hbmRzLCAuLi50cmFuc2xhdGlvbkNvbW1hbmRzLC4uLnJld3JpdGVDb21tYW5kc107XG5cdH1cbn1cbiIsICJleHBvcnQgaW50ZXJmYWNlIExhbmd1YWdlIHtcblx0bGFiZWw6IHN0cmluZztcblx0Y29kZTogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgU1VQUE9SVEVEX0xBTkdVQUdFUzogTGFuZ3VhZ2VbXSA9IFtcblx0eyBsYWJlbDogJ0VuZ2xpc2gnLCBjb2RlOiAnZW4nIH0sXG5cdHsgbGFiZWw6ICdTcGFuaXNoJywgY29kZTogJ2VzJyB9LFxuXHR7IGxhYmVsOiAnRnJlbmNoJywgY29kZTogJ2ZyJyB9LFxuXHR7IGxhYmVsOiAnR2VybWFuJywgY29kZTogJ2RlJyB9LFxuXHR7IGxhYmVsOiAnSXRhbGlhbicsIGNvZGU6ICdpdCcgfSxcblx0eyBsYWJlbDogJ1BvcnR1Z3Vlc2UnLCBjb2RlOiAncHQnIH0sXG5cdHsgbGFiZWw6ICdDaGluZXNlIChTaW1wbGlmaWVkKScsIGNvZGU6ICd6aCcgfSxcblx0eyBsYWJlbDogJ0phcGFuZXNlJywgY29kZTogJ2phJyB9LFxuXHR7IGxhYmVsOiAnS29yZWFuJywgY29kZTogJ2tvJyB9LFxuXHR7IGxhYmVsOiAnSGluZGknLCBjb2RlOiAnaGknIH0sXG5cdHsgbGFiZWw6ICdBcmFiaWMnLCBjb2RlOiAnYXInIH0sXG5cdHsgbGFiZWw6ICdEdXRjaCcsIGNvZGU6ICdubCcgfSxcblx0eyBsYWJlbDogJ1J1c3NpYW4nLCBjb2RlOiAncnUnIH0sXG5dO1xuXG5leHBvcnQgY29uc3QgUE9QVUxBUl9MQU5HVUFHRVM6IExhbmd1YWdlW10gPSBbXG5cdHsgbGFiZWw6ICdFbmdsaXNoJywgY29kZTogJ2VuJyB9LFxuXHR7IGxhYmVsOiAnU3BhbmlzaCcsIGNvZGU6ICdlcycgfSxcblx0eyBsYWJlbDogJ0ZyZW5jaCcsIGNvZGU6ICdmcicgfSxcblx0eyBsYWJlbDogJ0dlcm1hbicsIGNvZGU6ICdkZScgfSxcblx0eyBsYWJlbDogJ0l0YWxpYW4nLCBjb2RlOiAnaXQnIH0sXG5cdHsgbGFiZWw6ICdQb3J0dWd1ZXNlJywgY29kZTogJ3B0JyB9LFxuXHR7IGxhYmVsOiAnQ2hpbmVzZSAoU2ltcGxpZmllZCknLCBjb2RlOiAnemgnIH0sXG5cdHsgbGFiZWw6ICdKYXBhbmVzZScsIGNvZGU6ICdqYScgfSxcblx0eyBsYWJlbDogJ0tvcmVhbicsIGNvZGU6ICdrbycgfSxcblx0eyBsYWJlbDogJ0hpbmRpJywgY29kZTogJ2hpJyB9LFxuXHR7IGxhYmVsOiAnQXJhYmljJywgY29kZTogJ2FyJyB9LFxuXHR7IGxhYmVsOiAnRHV0Y2gnLCBjb2RlOiAnbmwnIH0sXG5cdHsgbGFiZWw6ICdSdXNzaWFuJywgY29kZTogJ3J1JyB9LFxuXTtcblxuXG4iLCAiZXhwb3J0IGNvbnN0IFRPTkVTOiBzdHJpbmdbXSA9IFtcbiAgICAnRnJpZW5kbHknLCAnRm9ybWFsJywgJ0Nhc3VhbCcsICdQcm9mZXNzaW9uYWwnLCAnQ29uZmlkZW50JywgJ0VtcGF0aGV0aWMnLCAnUGVyc3Vhc2l2ZScsICdQbGF5ZnVsJywgJ0RpcmVjdCdcbl07IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgRHJvcGRvd25Db21wb25lbnQsIFRleHRDb21wb25lbnQsIFRvZ2dsZUNvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBTbGlkZXJDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBSVBsdWdpbiB9IGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgU1VQUE9SVEVEX0xBTkdVQUdFUyB9IGZyb20gJy4uL3R5cGVzL2xhbmd1YWdlcyc7XG5pbXBvcnQgeyBUT05FUyB9IGZyb20gJy4uL3R5cGVzL3RvbmVzJztcbmltcG9ydCB7IEV4cG9ydFBhdGhNb2RhbCB9IGZyb20gJy4vZXhwb3J0LXBhdGgtbW9kYWwnO1xuaW1wb3J0IHsgSW1wb3J0RmlsZU1vZGFsIH0gZnJvbSAnLi9pbXBvcnQtZmlsZS1tb2RhbCc7XG5cbmV4cG9ydCBjbGFzcyBBSVBsdWdpblNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBBSVBsdWdpbjtcblx0cHJpdmF0ZSBhY3RpdmVUYWI6ICdnZW5lcmFsJyB8ICdvcGVyYXRpb25zJyB8ICdhZHZhbmNlZCcgPSAnZ2VuZXJhbCc7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQUlQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHtjb250YWluZXJFbH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHQvLyBIZWFkZXJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ0FJIEJhY2tlbmRzIFNldHRpbmdzJ30pO1xuXG5cdFx0Ly8gVGFiIE5hdmlnYXRpb25cblx0XHRjb25zdCB0YWJDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3RhYi1jb250YWluZXInKTtcblx0XHR0YWJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4Jztcblx0XHR0YWJDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuXHRcdHRhYkNvbnRhaW5lci5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG5cblx0XHR0aGlzLmNyZWF0ZVRhYih0YWJDb250YWluZXIsICdHZW5lcmFsJywgJ2dlbmVyYWwnLCAoKSA9PiB0aGlzLmRpc3BsYXlHZW5lcmFsU2V0dGluZ3MoKSk7XG5cdFx0dGhpcy5jcmVhdGVUYWIodGFiQ29udGFpbmVyLCAnT3BlcmF0aW9ucycsICdvcGVyYXRpb25zJywgKCkgPT4gdGhpcy5kaXNwbGF5T3BlcmF0aW9uc1NldHRpbmdzKCkpO1xuXHRcdHRoaXMuY3JlYXRlVGFiKHRhYkNvbnRhaW5lciwgJ0FkdmFuY2VkJywgJ2FkdmFuY2VkJywgKCkgPT4gdGhpcy5kaXNwbGF5QWR2YW5jZWRTZXR0aW5ncygpKTtcblxuXHRcdC8vIFRhYiBDb250ZW50IENvbnRhaW5lclxuXHRcdGNvbnN0IGNvbnRlbnRDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3RhYi1jb250ZW50Jyk7XG5cdFx0XG5cdFx0Ly8gRGlzcGxheSBhY3RpdmUgdGFiXG5cdFx0c3dpdGNoICh0aGlzLmFjdGl2ZVRhYikge1xuXHRcdFx0Y2FzZSAnZ2VuZXJhbCc6XG5cdFx0XHRcdHRoaXMuZGlzcGxheUdlbmVyYWxTZXR0aW5ncygpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ29wZXJhdGlvbnMnOlxuXHRcdFx0XHR0aGlzLmRpc3BsYXlPcGVyYXRpb25zU2V0dGluZ3MoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdhZHZhbmNlZCc6XG5cdFx0XHRcdHRoaXMuZGlzcGxheUFkdmFuY2VkU2V0dGluZ3MoKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBjcmVhdGVUYWIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZywgdGFiSWQ6ICdnZW5lcmFsJyB8ICdvcGVyYXRpb25zJyB8ICdhZHZhbmNlZCcsIG9uQ2xpY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcblx0XHRjb25zdCB0YWIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogbGFiZWwgfSk7XG5cdFx0dGFiLnN0eWxlLnBhZGRpbmcgPSAnMTBweCAyMHB4Jztcblx0XHR0YWIuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuXHRcdHRhYi5zdHlsZS5iYWNrZ3JvdW5kID0gdGhpcy5hY3RpdmVUYWIgPT09IHRhYklkID8gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3ItaG92ZXIpJyA6ICd0cmFuc3BhcmVudCc7XG5cdFx0dGFiLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcblx0XHR0YWIuc3R5bGUuYm9yZGVyQm90dG9tID0gdGhpcy5hY3RpdmVUYWIgPT09IHRhYklkID8gJzJweCBzb2xpZCB2YXIoLS10ZXh0LWFjY2VudCknIDogJ25vbmUnO1xuXHRcdFxuXHRcdHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMuYWN0aXZlVGFiID0gdGFiSWQ7XG5cdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgZGlzcGxheUdlbmVyYWxTZXR0aW5ncygpOiB2b2lkIHtcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy50YWItY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuXHRcdGlmICghY29udGFpbmVyKSByZXR1cm47XG5cdFx0XG5cdFx0Y29udGFpbmVyLmVtcHR5KCk7XG5cblx0XHQvLyBBUEkgQ29uZmlndXJhdGlvbiBTZWN0aW9uXG5cdFx0Y29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHt0ZXh0OiAnQVBJIENvbmZpZ3VyYXRpb24nfSk7XG5cdFx0XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyKVxuXHRcdFx0LnNldE5hbWUoJ0FQSSBVUkwnKVxuXHRcdFx0LnNldERlc2MoJ0VudGVyIHRoZSBiYXNlIFVSTCBmb3IgdGhlIEFJIEFQSSAoZS5nLiwgaHR0cDovL2xvY2FsaG9zdDozMDAwKScpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjMwMDAnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpVXJsKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpVXJsID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcblx0XHRcdC5zZXROYW1lKCdBUEkgS2V5Jylcblx0XHRcdC5zZXREZXNjKCdFbnRlciB5b3VyIEFQSSBrZXknKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBBUEkga2V5Jylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSB8fCAnJylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHQvLyBHbG9iYWwgRGVmYXVsdHMgU2VjdGlvblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7dGV4dDogJ0dsb2JhbCBEZWZhdWx0cyd9KTtcblx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXIpXG5cdFx0XHQuc2V0TmFtZSgnRGVmYXVsdCBQcm92aWRlcicpXG5cdFx0XHQuc2V0RGVzYygnRGVmYXVsdCBBSSBwcm92aWRlciBmb3IgYWxsIG9wZXJhdGlvbnMnKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG5cdFx0XHRcdC5hZGRPcHRpb24oJ29sbGFtYScsICdPbGxhbWEnKVxuXHRcdFx0XHQuYWRkT3B0aW9uKCdvcGVuYWknLCAnT3BlbkFJJylcblx0XHRcdFx0LmFkZE9wdGlvbignYW50aHJvcGljJywgJ0FudGhyb3BpYycpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0UHJvdmlkZXIgfHwgJ29sbGFtYScpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0UHJvdmlkZXIgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyKVxuXHRcdFx0LnNldE5hbWUoJ0RlZmF1bHQgTW9kZWwnKVxuXHRcdFx0LnNldERlc2MoJ0RlZmF1bHQgQUkgbW9kZWwgZm9yIGFsbCBvcGVyYXRpb25zJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ2dlbW1hMzo0YicpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZWwgfHwgJycpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0TW9kZWwgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyKVxuXHRcdFx0LnNldE5hbWUoJ0RlZmF1bHQgVGVtcGVyYXR1cmUnKVxuXHRcdFx0LnNldERlc2MoJ0RlZmF1bHQgdGVtcGVyYXR1cmUgKDAuMCA9IGNvbnNlcnZhdGl2ZSwgMS4wID0gY3JlYXRpdmUpJylcblx0XHRcdC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuXHRcdFx0XHQuc2V0TGltaXRzKDAsIDEsIDAuMSlcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRUZW1wZXJhdHVyZSB8fCAwLjMpXG5cdFx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0VGVtcGVyYXR1cmUgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyKVxuXHRcdFx0LnNldE5hbWUoJ0RlZmF1bHQgU3RyZWFtaW5nJylcblx0XHRcdC5zZXREZXNjKCdFbmFibGUgc3RyZWFtaW5nIHJlc3BvbnNlcyBieSBkZWZhdWx0Jylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFN0cmVhbSB8fCB0cnVlKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFN0cmVhbSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdH1cblxuXHRwcml2YXRlIGRpc3BsYXlPcGVyYXRpb25zU2V0dGluZ3MoKTogdm9pZCB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudGFiLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcblx0XHRpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuXHRcdFxuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0Ly8gU3VtbWFyaXplIE9wZXJhdGlvblxuXHRcdHRoaXMuY3JlYXRlT3BlcmF0aW9uQWNjb3JkaW9uKGNvbnRhaW5lciwgJ1N1bW1hcml6ZScsIHRoaXMucGx1Z2luLnNldHRpbmdzLnN1bW1hcml6ZSwgYXN5bmMgKGNvbmZpZykgPT4ge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3VtbWFyaXplID0gY29uZmlnO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0fSk7XG5cblx0XHQvLyBLZXl3b3JkcyBPcGVyYXRpb25cblx0XHR0aGlzLmNyZWF0ZU9wZXJhdGlvbkFjY29yZGlvbihjb250YWluZXIsICdLZXl3b3JkcycsIHRoaXMucGx1Z2luLnNldHRpbmdzLmtleXdvcmRzLCBhc3luYyAoY29uZmlnKSA9PiB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5rZXl3b3JkcyA9IGNvbmZpZztcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gVHJhbnNsYXRlIE9wZXJhdGlvblxuXHRcdHRoaXMuY3JlYXRlT3BlcmF0aW9uQWNjb3JkaW9uKGNvbnRhaW5lciwgJ1RyYW5zbGF0ZScsIHRoaXMucGx1Z2luLnNldHRpbmdzLnRyYW5zbGF0ZSwgYXN5bmMgKGNvbmZpZykgPT4ge1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudHJhbnNsYXRlID0gY29uZmlnO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0fSwgdHJ1ZSk7XG5cblx0XHQvLyBSZXdyaXRlIE9wZXJhdGlvblxuXHRcdHRoaXMuY3JlYXRlT3BlcmF0aW9uQWNjb3JkaW9uKGNvbnRhaW5lciwgJ1Jld3JpdGUnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXdyaXRlLCBhc3luYyAoY29uZmlnKSA9PiB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXdyaXRlID0gY29uZmlnO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0fSk7XG5cblx0XHQvLyBDb21wb3NlIE9wZXJhdGlvblxuXHRcdHRoaXMuY3JlYXRlT3BlcmF0aW9uQWNjb3JkaW9uKGNvbnRhaW5lciwgJ0NvbXBvc2UnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21wb3NlLCBhc3luYyAoY29uZmlnKSA9PiB7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21wb3NlID0gY29uZmlnO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIGNyZWF0ZU9wZXJhdGlvbkFjY29yZGlvbihcblx0XHRjb250YWluZXI6IEhUTUxFbGVtZW50LFxuXHRcdG5hbWU6IHN0cmluZyxcblx0XHRjb25maWc6IGFueSxcblx0XHRvblNhdmU6IChjb25maWc6IGFueSkgPT4gUHJvbWlzZTx2b2lkPixcblx0XHRpbmNsdWRlTGFuZ3VhZ2U6IGJvb2xlYW4gPSBmYWxzZVxuXHQpOiB2b2lkIHtcblx0XHRjb25zdCBhY2NvcmRpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KCdvcGVyYXRpb24tYWNjb3JkaW9uJyk7XG5cdFx0YWNjb3JkaW9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxNXB4Jztcblx0XHRhY2NvcmRpb24uc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuXHRcdGFjY29yZGlvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4JztcblxuXHRcdGNvbnN0IGhlYWRlciA9IGFjY29yZGlvbi5jcmVhdGVEaXYoJ2FjY29yZGlvbi1oZWFkZXInKTtcblx0XHRoZWFkZXIuc3R5bGUucGFkZGluZyA9ICcxMHB4Jztcblx0XHRoZWFkZXIuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuXHRcdGhlYWRlci5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG5cdFx0aGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG5cdFx0aGVhZGVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nO1xuXHRcdGhlYWRlci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG5cblx0XHRjb25zdCB0aXRsZSA9IGhlYWRlci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6IG5hbWUgfSk7XG5cdFx0dGl0bGUuc3R5bGUubWFyZ2luID0gJzAnO1xuXG5cdFx0Y29uc3QgdG9nZ2xlID0gaGVhZGVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnXHUyNUJDJyB9KTtcblx0XHR0b2dnbGUuc3R5bGUudHJhbnNpdGlvbiA9ICd0cmFuc2Zvcm0gMC4ycyc7XG5cblx0XHRjb25zdCBjb250ZW50ID0gYWNjb3JkaW9uLmNyZWF0ZURpdignYWNjb3JkaW9uLWNvbnRlbnQnKTtcblx0XHRjb250ZW50LnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG5cdFx0Y29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG5cdFx0aGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0Y29uc3QgaXNWaXNpYmxlID0gY29udGVudC5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG5cdFx0XHRjb250ZW50LnN0eWxlLmRpc3BsYXkgPSBpc1Zpc2libGUgPyAnbm9uZScgOiAnYmxvY2snO1xuXHRcdFx0dG9nZ2xlLnN0eWxlLnRyYW5zZm9ybSA9IGlzVmlzaWJsZSA/ICdyb3RhdGUoMGRlZyknIDogJ3JvdGF0ZSgxODBkZWcpJztcblx0XHR9KTtcblxuXHRcdC8vIFByb3ZpZGVyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudClcblx0XHRcdC5zZXROYW1lKCdQcm92aWRlcicpXG5cdFx0XHQuc2V0RGVzYygnQUkgcHJvdmlkZXIgZm9yIHRoaXMgb3BlcmF0aW9uJylcblx0XHRcdC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuXHRcdFx0XHQuYWRkT3B0aW9uKCdvbGxhbWEnLCAnT2xsYW1hJylcblx0XHRcdFx0LmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSScpXG5cdFx0XHRcdC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMnKVxuXHRcdFx0XHQuc2V0VmFsdWUoY29uZmlnLnByb3ZpZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0Y29uZmlnLnByb3ZpZGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgb25TYXZlKGNvbmZpZyk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdC8vIE1vZGVsXG5cdFx0bmV3IFNldHRpbmcoY29udGVudClcblx0XHRcdC5zZXROYW1lKCdNb2RlbCcpXG5cdFx0XHQuc2V0RGVzYygnQUkgbW9kZWwgdG8gdXNlJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ01vZGVsIG5hbWUnKVxuXHRcdFx0XHQuc2V0VmFsdWUoY29uZmlnLm1vZGVsKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0Y29uZmlnLm1vZGVsID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgb25TYXZlKGNvbmZpZyk7XG5cdFx0XHRcdH0pKTtcblxuXHRcdC8vIFRlbXBlcmF0dXJlXG5cdFx0bmV3IFNldHRpbmcoY29udGVudClcblx0XHRcdC5zZXROYW1lKCdUZW1wZXJhdHVyZScpXG5cdFx0XHQuc2V0RGVzYygnVGVtcGVyYXR1cmUgKDAuMCA9IGNvbnNlcnZhdGl2ZSwgMS4wID0gY3JlYXRpdmUpJylcblx0XHRcdC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxuXHRcdFx0XHQuc2V0TGltaXRzKDAsIDEsIDAuMSlcblx0XHRcdFx0LnNldFZhbHVlKGNvbmZpZy50ZW1wZXJhdHVyZSlcblx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGNvbmZpZy50ZW1wZXJhdHVyZSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IG9uU2F2ZShjb25maWcpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHQvLyBTdHJlYW1cblx0XHRuZXcgU2V0dGluZyhjb250ZW50KVxuXHRcdFx0LnNldE5hbWUoJ1N0cmVhbWluZycpXG5cdFx0XHQuc2V0RGVzYygnRW5hYmxlIHN0cmVhbWluZyByZXNwb25zZXMnKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZShjb25maWcuc3RyZWFtKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0Y29uZmlnLnN0cmVhbSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IG9uU2F2ZShjb25maWcpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHQvLyBPcGVyYXRpb24tc3BlY2lmaWMgc2V0dGluZ3Ncblx0XHRpZiAobmFtZSA9PT0gJ1N1bW1hcml6ZScgfHwgbmFtZSA9PT0gJ0NvbXBvc2UnKSB7XG5cdFx0XHRuZXcgU2V0dGluZyhjb250ZW50KVxuXHRcdFx0XHQuc2V0TmFtZSgnTWF4IExlbmd0aCcpXG5cdFx0XHRcdC5zZXREZXNjKCdNYXhpbXVtIGxlbmd0aCBvZiB0aGUgb3V0cHV0Jylcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCcxMDAnKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZShjb25maWcubWF4TGVuZ3RoLnRvU3RyaW5nKCkpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uZmlnLm1heExlbmd0aCA9IHBhcnNlSW50KHZhbHVlKSB8fCAxMDA7XG5cdFx0XHRcdFx0XHRhd2FpdCBvblNhdmUoY29uZmlnKTtcblx0XHRcdFx0XHR9KSk7XG5cdFx0fVxuXG5cdFx0aWYgKG5hbWUgPT09ICdLZXl3b3JkcycpIHtcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRlbnQpXG5cdFx0XHRcdC5zZXROYW1lKCdNYXggS2V5d29yZHMnKVxuXHRcdFx0XHQuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2Yga2V5d29yZHMgdG8gZXh0cmFjdCcpXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignMTAnKVxuXHRcdFx0XHRcdC5zZXRWYWx1ZShjb25maWcubWF4S2V5d29yZHMudG9TdHJpbmcoKSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25maWcubWF4S2V5d29yZHMgPSBwYXJzZUludCh2YWx1ZSkgfHwgMTA7XG5cdFx0XHRcdFx0XHRhd2FpdCBvblNhdmUoY29uZmlnKTtcblx0XHRcdFx0XHR9KSk7XG5cdFx0fVxuXG5cdFx0aWYgKGluY2x1ZGVMYW5ndWFnZSkge1xuXHRcdFx0bmV3IFNldHRpbmcoY29udGVudClcblx0XHRcdFx0LnNldE5hbWUoJ0RlZmF1bHQgVGFyZ2V0IExhbmd1YWdlJylcblx0XHRcdFx0LnNldERlc2MoJ0RlZmF1bHQgbGFuZ3VhZ2UgZm9yIHRyYW5zbGF0aW9uJylcblx0XHRcdFx0LmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcblx0XHRcdFx0XHRTVVBQT1JURURfTEFOR1VBR0VTLmZvckVhY2gobGFuZyA9PiB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24obGFuZy5jb2RlLCBsYW5nLmxhYmVsKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRkcm9wZG93bi5zZXRWYWx1ZShjb25maWcuZGVmYXVsdFRhcmdldExhbmd1YWdlKTtcblx0XHRcdFx0XHRkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdGNvbmZpZy5kZWZhdWx0VGFyZ2V0TGFuZ3VhZ2UgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdGF3YWl0IG9uU2F2ZShjb25maWcpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGRpc3BsYXlBZHZhbmNlZFNldHRpbmdzKCk6IHZvaWQge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnRhYi1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0aWYgKCFjb250YWluZXIpIHJldHVybjtcblx0XHRcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblxuXHRcdC8vIENvbmZpZ3VyYXRpb24gTWlncmF0aW9uIFNlY3Rpb25cblx0XHRjb250YWluZXIuY3JlYXRlRWwoJ2gzJywge3RleHQ6ICdDb25maWd1cmF0aW9uIE1pZ3JhdGlvbid9KTtcblx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXIpXG5cdFx0XHQuc2V0TmFtZSgnSW1wb3J0IGZyb20gWUFNTCcpXG5cdFx0XHQuc2V0RGVzYygnSW1wb3J0IGNvbmZpZ3VyYXRpb24gZnJvbSBleGlzdGluZyBZQU1MIGZpbGUnKVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG5cdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdJbXBvcnQnKVxuXHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHQvLyBDcmVhdGUgYSBtb2RhbCB0byBsZXQgdGhlIHVzZXIgY2hvb3NlIHRoZSBmaWxlIHRvIGltcG9ydFxuXHRcdFx0XHRcdFx0Y29uc3QgbW9kYWwgPSBuZXcgSW1wb3J0RmlsZU1vZGFsKHRoaXMuYXBwLCAneWFtbCcpO1xuXHRcdFx0XHRcdFx0bW9kYWwub25JbXBvcnRDb21wbGV0ZSA9IChmaWxlUGF0aDogc3RyaW5nIHwgbnVsbCwgZmlsZUNvbnRlbnQ6IHN0cmluZyB8IG51bGwpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGZpbGVQYXRoICYmIGZpbGVDb250ZW50KSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUHJvY2VzcyB0aGUgbWlncmF0aW9uIGFzeW5jaHJvbm91c2x5IGJ1dCBkb24ndCB3YWl0IGZvciB0aGUgY2FsbGJhY2tcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5jb25maWdTZXJ2aWNlLm1pZ3JhdGVGcm9tWUFNTENvbnRlbnQoZmlsZUNvbnRlbnQpLnRoZW4oYXN5bmMgKG1pZ3JhdGVkU2V0dGluZ3MpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChtaWdyYXRlZFNldHRpbmdzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSBzZXR0aW5ncyB3aXRoIG1pZ3JhdGVkIHZhbHVlc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRPYmplY3QuYXNzaWduKHRoaXMucGx1Z2luLnNldHRpbmdzLCBtaWdyYXRlZFNldHRpbmdzKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRoZSBVSVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU2hvdyBzdWNjZXNzIG1lc3NhZ2Vcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgbm90aWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vdGljZS50ZXh0Q29udGVudCA9IGBDb25maWd1cmF0aW9uIGltcG9ydGVkIGZyb20gJHtmaWxlUGF0aH1gO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUucGFkZGluZyA9ICcxMHB4Jztcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1zdWNjZXNzKSc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW5vcm1hbCknO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChub3RpY2UpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5yZW1vdmUoKSwgMzAwMCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdNaWdyYXRpb24gZmFpbGVkOicsIGVycm9yKTtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IG5vdGljZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdFx0XHRcdFx0bm90aWNlLnRleHRDb250ZW50ID0gYE1pZ3JhdGlvbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gO1xuXHRcdFx0XHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG5cdFx0XHRcdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKSc7XG5cdFx0XHRcdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1ub3JtYWwpJztcblx0XHRcdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4Jztcblx0XHRcdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQobm90aWNlKTtcblx0XHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4gbm90aWNlLnJlbW92ZSgpLCAzMDAwKTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignSW1wb3J0IGZhaWxlZDonLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRjb25zdCBub3RpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRcdG5vdGljZS50ZXh0Q29udGVudCA9IGBJbXBvcnQgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YDtcblx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvciknO1xuXHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbm9ybWFsKSc7XG5cdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7XG5cdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKG5vdGljZSk7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5yZW1vdmUoKSwgMzAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXIpXG5cdFx0XHQuc2V0TmFtZSgnRXhwb3J0IHRvIFlBTUwnKVxuXHRcdFx0LnNldERlc2MoJ0V4cG9ydCBjdXJyZW50IGNvbmZpZ3VyYXRpb24gdG8gWUFNTCBmb3JtYXQnKVxuXHRcdFx0LmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG5cdFx0XHRcdC5zZXRCdXR0b25UZXh0KCdFeHBvcnQnKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IHlhbWxDb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uY29uZmlnU2VydmljZS5leHBvcnRUb1lBTUwoKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGEgbW9kYWwgdG8gbGV0IHRoZSB1c2VyIGNob29zZSB0aGUgZmlsZSBwYXRoXG5cdFx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IG5ldyBFeHBvcnRQYXRoTW9kYWwodGhpcy5hcHAsICdhaS1jb25maWctZXhwb3J0JywgJ3lhbWwnLCB5YW1sQ29udGVudCk7XG5cdFx0XHRcdFx0XHRtb2RhbC5vbkV4cG9ydENvbXBsZXRlID0gKHNhdmVkUGF0aDogc3RyaW5nIHwgbnVsbCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAoc2F2ZWRQYXRoKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gU2hvdyBzdWNjZXNzIG1lc3NhZ2Vcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBub3RpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRcdFx0XHRub3RpY2UudGV4dENvbnRlbnQgPSBgQ29uZmlndXJhdGlvbiBleHBvcnRlZCB0byAke3NhdmVkUGF0aH1gO1xuXHRcdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2VzcyknO1xuXHRcdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW5vcm1hbCknO1xuXHRcdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4Jztcblx0XHRcdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lci5hcHBlbmRDaGlsZChub3RpY2UpO1xuXHRcdFx0XHRcdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4gbm90aWNlLnJlbW92ZSgpLCAzMDAwKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXhwb3J0IGZhaWxlZDonLCBlcnJvcik7XG5cdFx0XHRcdFx0XHRjb25zdCBub3RpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRcdG5vdGljZS50ZXh0Q29udGVudCA9IGBFeHBvcnQgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YDtcblx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvciknO1xuXHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbm9ybWFsKSc7XG5cdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7XG5cdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKG5vdGljZSk7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5yZW1vdmUoKSwgMzAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXIpXG5cdFx0XHQuc2V0TmFtZSgnUmVzZXQgdG8gRGVmYXVsdHMnKVxuXHRcdFx0LnNldERlc2MoJ1Jlc2V0IGFsbCBzZXR0aW5ncyB0byBkZWZhdWx0IHZhbHVlcycpXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ1Jlc2V0Jylcblx0XHRcdFx0LnNldFdhcm5pbmcoKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Ly8gSW1wb3J0IGRlZmF1bHQgc2V0dGluZ3Ncblx0XHRcdFx0XHRjb25zdCB7IERFRkFVTFRfU0VUVElOR1MgfSA9IGF3YWl0IGltcG9ydCgnLi4vdHlwZXMvY29uZmlnJyk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MgPSB7IC4uLkRFRkFVTFRfU0VUVElOR1MgfTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0aGUgVUlcblx0XHRcdFx0fSkpO1xuXG5cdFx0Ly8gRGlhZ25vc3RpY3MgU2VjdGlvblxuXHRcdGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7dGV4dDogJ0RpYWdub3N0aWNzJ30pO1xuXHRcdFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcblx0XHRcdC5zZXROYW1lKCdUZXN0IEFQSSBDb25uZWN0aW9uJylcblx0XHRcdC5zZXREZXNjKCdUZXN0IHRoZSBjdXJyZW50IEFQSSBjb25maWd1cmF0aW9uJylcblx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuXHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnVGVzdCcpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0Ly8gU2ltcGxlIEFQSSB0ZXN0XG5cdFx0XHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmFwaVVybH0vaGVhbHRoYCwge1xuXHRcdFx0XHRcdFx0XHRtZXRob2Q6ICdHRVQnLFxuXHRcdFx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0XHRcdFx0XHRcdFx0XHQuLi4odGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5ICYmIHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5fWAgfSlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGlmIChyZXNwb25zZS5vaykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBub3RpY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdFx0XHRcdFx0bm90aWNlLnRleHRDb250ZW50ID0gJ0FQSSBjb25uZWN0aW9uIHN1Y2Nlc3NmdWwhJztcblx0XHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG5cdFx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItc3VjY2VzcyknO1xuXHRcdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1ub3JtYWwpJztcblx0XHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1cHgnO1xuXHRcdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXIuYXBwZW5kQ2hpbGQobm90aWNlKTtcblx0XHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiBub3RpY2UucmVtb3ZlKCksIDMwMDApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdBUEkgdGVzdCBmYWlsZWQ6JywgZXJyb3IpO1xuXHRcdFx0XHRcdFx0Y29uc3Qgbm90aWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0XHRcdFx0XHRub3RpY2UudGV4dENvbnRlbnQgPSBgQVBJIHRlc3QgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YDtcblx0XHRcdFx0XHRcdG5vdGljZS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvciknO1xuXHRcdFx0XHRcdFx0bm90aWNlLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbm9ybWFsKSc7XG5cdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7XG5cdFx0XHRcdFx0XHRub3RpY2Uuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuXHRcdFx0XHRcdFx0Y29udGFpbmVyLmFwcGVuZENoaWxkKG5vdGljZSk7XG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5yZW1vdmUoKSwgMzAwMCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXIpXG5cdFx0XHQuc2V0TmFtZSgnVmlldyBDdXJyZW50IENvbmZpZ3VyYXRpb24nKVxuXHRcdFx0LnNldERlc2MoJ1Nob3cgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbiBpbiBKU09OIGZvcm1hdCcpXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cblx0XHRcdFx0LnNldEJ1dHRvblRleHQoJ1ZpZXcnKVxuXHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgY29uZmlnSnNvbiA9IEpTT04uc3RyaW5naWZ5KHRoaXMucGx1Z2luLnNldHRpbmdzLCBudWxsLCAyKTtcblx0XHRcdFx0XHRjb25zdCBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdFx0XHRcdG1vZGFsLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcblx0XHRcdFx0XHRtb2RhbC5zdHlsZS50b3AgPSAnNTAlJztcblx0XHRcdFx0XHRtb2RhbC5zdHlsZS5sZWZ0ID0gJzUwJSc7XG5cdFx0XHRcdFx0bW9kYWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKSc7XG5cdFx0XHRcdFx0bW9kYWwuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcblx0XHRcdFx0XHRtb2RhbC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG5cdFx0XHRcdFx0bW9kYWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7XG5cdFx0XHRcdFx0bW9kYWwuc3R5bGUucGFkZGluZyA9ICcyMHB4Jztcblx0XHRcdFx0XHRtb2RhbC5zdHlsZS5tYXhXaWR0aCA9ICc4MCUnO1xuXHRcdFx0XHRcdG1vZGFsLnN0eWxlLm1heEhlaWdodCA9ICc4MCUnO1xuXHRcdFx0XHRcdG1vZGFsLnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xuXHRcdFx0XHRcdG1vZGFsLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zdCBwcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwcmUnKTtcblx0XHRcdFx0XHRwcmUuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuXHRcdFx0XHRcdHByZS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuXHRcdFx0XHRcdHByZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnM3B4Jztcblx0XHRcdFx0XHRwcmUuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XG5cdFx0XHRcdFx0cHJlLnRleHRDb250ZW50ID0gY29uZmlnSnNvbjtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXHRcdFx0XHRcdGNsb3NlQnV0dG9uLnRleHRDb250ZW50ID0gJ0Nsb3NlJztcblx0XHRcdFx0XHRjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG5cdFx0XHRcdFx0Y2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IG1vZGFsLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdG1vZGFsLmFwcGVuZENoaWxkKHByZSk7XG5cdFx0XHRcdFx0bW9kYWwuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xuXHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobW9kYWwpO1xuXHRcdFx0XHR9KSk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBUZXh0Q29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgRXhwb3J0UGF0aE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgZmlsZU5hbWU6IHN0cmluZztcbiAgICBwcml2YXRlIGV4dGVuc2lvbjogc3RyaW5nO1xuICAgIHByaXZhdGUgY29udGVudDogc3RyaW5nO1xuICAgIHB1YmxpYyBvbkV4cG9ydENvbXBsZXRlOiAocGF0aDogc3RyaW5nIHwgbnVsbCkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgZGVmYXVsdEZpbGVOYW1lOiBzdHJpbmcsXG4gICAgICAgIGV4dGVuc2lvbjogc3RyaW5nLFxuICAgICAgICBjb250ZW50OiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5maWxlTmFtZSA9IGRlZmF1bHRGaWxlTmFtZTtcbiAgICAgICAgdGhpcy5leHRlbnNpb24gPSBleHRlbnNpb247XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMub25FeHBvcnRDb21wbGV0ZSA9ICgpID0+IHt9O1xuICAgIH1cblxuICAgIG9uT3BlbigpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdFeHBvcnQgQ29uZmlndXJhdGlvbicgfSk7XG5cbiAgICAgICAgLy8gRmlsZSBwYXRoIGlucHV0XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdGaWxlIG5hbWUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIHRoZSBuYW1lIGZvciB0aGUgZXhwb3J0ZWQgZmlsZScpXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dDogVGV4dENvbXBvbmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUodGhpcy5maWxlTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKGBFbnRlciBmaWxlIG5hbWVgKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmlsZU5hbWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBTaG93IGN1cnJlbnQgcGF0aCBpbmZvXG4gICAgICAgIGNvbnN0IHBhdGhJbmZvID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBwYXRoSW5mby5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMWVtJztcbiAgICAgICAgcGF0aEluZm8uc3R5bGUucGFkZGluZyA9ICcwLjVlbSc7XG4gICAgICAgIHBhdGhJbmZvLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgcGF0aEluZm8uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgIHBhdGhJbmZvLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcbiAgICAgICAgcGF0aEluZm8udGV4dENvbnRlbnQgPSBgVGhlIGZpbGUgd2lsbCBiZSBzYXZlZCBpbiB5b3VyIHZhdWx0J3Mgcm9vdCBkaXJlY3RvcnkgYXM6ICR7dGhpcy5maWxlTmFtZX0uJHt0aGlzLmV4dGVuc2lvbn1gO1xuXG4gICAgICAgIC8vIEJ1dHRvbnNcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICcxZW0nO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzJlbSc7XG5cbiAgICAgICAgLy8gQ2FuY2VsIGJ1dHRvblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzAuNWVtIDFlbSc7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgY2FuY2VsQnV0dG9uLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICAgICAgY2FuY2VsQnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEV4cG9ydCBidXR0b25cbiAgICAgICAgY29uc3QgZXhwb3J0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdFeHBvcnQnIH0pO1xuICAgICAgICBleHBvcnRCdXR0b24uc3R5bGUucGFkZGluZyA9ICcwLjVlbSAxZW0nO1xuICAgICAgICBleHBvcnRCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgIGV4cG9ydEJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgIGV4cG9ydEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuICAgICAgICBleHBvcnRCdXR0b24uc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1vbi1hY2NlbnQpJztcbiAgICAgICAgZXhwb3J0QnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgZXhwb3J0QnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmV4cG9ydEZpbGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBIYW5kbGUgRW50ZXIga2V5XG4gICAgICAgIGNvbnN0IGhhbmRsZUtleVByZXNzID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmV4cG9ydEZpbGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnRlbnRFbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5UHJlc3MpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5UHJlc3MpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGV4cG9ydEZpbGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgZmlsZW5hbWUgaGFzIHRoZSBjb3JyZWN0IGV4dGVuc2lvblxuICAgICAgICAgICAgbGV0IGZpbmFsRmlsZU5hbWUgPSB0aGlzLmZpbGVOYW1lO1xuICAgICAgICAgICAgaWYgKCFmaW5hbEZpbGVOYW1lLmVuZHNXaXRoKGAuJHt0aGlzLmV4dGVuc2lvbn1gKSkge1xuICAgICAgICAgICAgICAgIGZpbmFsRmlsZU5hbWUgPSBgJHtmaW5hbEZpbGVOYW1lfS4ke3RoaXMuZXh0ZW5zaW9ufWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZmlsZSBpbiB0aGUgdmF1bHRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaW5hbEZpbGVOYW1lLCB0aGlzLmNvbnRlbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbG9zZSB0aGUgbW9kYWwgYW5kIGNhbGwgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm9uRXhwb3J0Q29tcGxldGUoZmluYWxGaWxlTmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZXhwb3J0IGZpbGU6JywgZXJyb3IpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG93IGVycm9yIG1lc3NhZ2UgaW4gdGhlIG1vZGFsXG4gICAgICAgICAgICBjb25zdCBlcnJvckRpdiA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1lcnJvciknO1xuICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUucGFkZGluZyA9ICcxZW0nO1xuICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKSc7XG4gICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgICAgIGVycm9yRGl2LnN0eWxlLm1hcmdpblRvcCA9ICcxZW0nO1xuICAgICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSBgRmFpbGVkIHRvIGV4cG9ydDogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlbW92ZSBlcnJvciBtZXNzYWdlIGFmdGVyIDMgc2Vjb25kc1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZXJyb3JEaXYucmVtb3ZlKCk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5vbkV4cG9ydENvbXBsZXRlKG51bGwpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBUZXh0Q29tcG9uZW50LCBEcm9wZG93bkNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgSW1wb3J0RmlsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgZXh0ZW5zaW9uOiBzdHJpbmc7XG4gICAgcHVibGljIG9uSW1wb3J0Q29tcGxldGU6IChmaWxlUGF0aDogc3RyaW5nIHwgbnVsbCwgZmlsZUNvbnRlbnQ6IHN0cmluZyB8IG51bGwpID0+IHZvaWQ7XG4gICAgcHJpdmF0ZSBzZWxlY3RlZEZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsXG4gICAgICAgIGV4dGVuc2lvbjogc3RyaW5nXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMuZXh0ZW5zaW9uID0gZXh0ZW5zaW9uO1xuICAgICAgICB0aGlzLm9uSW1wb3J0Q29tcGxldGUgPSAoKSA9PiB7fTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnSW1wb3J0IENvbmZpZ3VyYXRpb24nIH0pO1xuXG4gICAgICAgIC8vIEZpbGUgc2VsZWN0b3IgZHJvcGRvd25cbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbHRlcihmaWxlID0+IFxuICAgICAgICAgICAgZmlsZS5uYW1lLmVuZHNXaXRoKGAuJHt0aGlzLmV4dGVuc2lvbn1gKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5vRmlsZXNNc2cgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBub0ZpbGVzTXNnLnN0eWxlLnBhZGRpbmcgPSAnMWVtJztcbiAgICAgICAgICAgIG5vRmlsZXNNc2cuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKSc7XG4gICAgICAgICAgICBub0ZpbGVzTXNnLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbm9ybWFsKSc7XG4gICAgICAgICAgICBub0ZpbGVzTXNnLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICAgICAgbm9GaWxlc01zZy50ZXh0Q29udGVudCA9IGBObyAuJHt0aGlzLmV4dGVuc2lvbn0gZmlsZXMgZm91bmQgaW4geW91ciB2YXVsdC5gO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1NlbGVjdCBmaWxlJylcbiAgICAgICAgICAgIC5zZXREZXNjKGBDaG9vc2UgYSAuJHt0aGlzLmV4dGVuc2lvbn0gZmlsZSB0byBpbXBvcnRgKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBmaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oZmlsZS5wYXRoLCBmaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKGZpbGVzWzBdLnBhdGgpO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKCh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZmlsZXMuZmluZChmID0+IGYucGF0aCA9PT0gdmFsdWUpIHx8IG51bGw7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gU2V0IGluaXRpYWwgc2VsZWN0ZWQgZmlsZVxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZmlsZXNbMF07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBTaG93IGZpbGUgaW5mb1xuICAgICAgICBjb25zdCBmaWxlSW5mbyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTtcbiAgICAgICAgZmlsZUluZm8uc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XG4gICAgICAgIGZpbGVJbmZvLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0nO1xuICAgICAgICBmaWxlSW5mby5zdHlsZS5iYWNrZ3JvdW5kID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgIGZpbGVJbmZvLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICBmaWxlSW5mby5zdHlsZS5mb250U2l6ZSA9ICcwLjllbSc7XG4gICAgICAgIGZpbGVJbmZvLnRleHRDb250ZW50ID0gYFNlbGVjdGVkIGZpbGU6ICR7dGhpcy5zZWxlY3RlZEZpbGU/Lm5hbWUgfHwgJ05vbmUnfWA7XG5cbiAgICAgICAgLy8gQnV0dG9uc1xuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzFlbSc7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMmVtJztcblxuICAgICAgICAvLyBDYW5jZWwgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnMC41ZW0gMWVtJztcbiAgICAgICAgY2FuY2VsQnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICBjYW5jZWxCdXR0b24uc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICBjYW5jZWxCdXR0b24uc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgY2FuY2VsQnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW1wb3J0IGJ1dHRvblxuICAgICAgICBjb25zdCBpbXBvcnRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0ltcG9ydCcgfSk7XG4gICAgICAgIGltcG9ydEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzAuNWVtIDFlbSc7XG4gICAgICAgIGltcG9ydEJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgaW1wb3J0QnV0dG9uLnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgaW1wb3J0QnV0dG9uLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XG4gICAgICAgIGltcG9ydEJ1dHRvbi5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW9uLWFjY2VudCknO1xuICAgICAgICBpbXBvcnRCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICBpbXBvcnRCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW1wb3J0RmlsZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFVwZGF0ZSBmaWxlIGluZm8gd2hlbiBzZWxlY3Rpb24gY2hhbmdlc1xuICAgICAgICBjb25zdCB1cGRhdGVGaWxlSW5mbyA9ICgpID0+IHtcbiAgICAgICAgICAgIGZpbGVJbmZvLnRleHRDb250ZW50ID0gYFNlbGVjdGVkIGZpbGU6ICR7dGhpcy5zZWxlY3RlZEZpbGU/Lm5hbWUgfHwgJ05vbmUnfWA7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSGFuZGxlIEVudGVyIGtleVxuICAgICAgICBjb25zdCBoYW5kbGVLZXlQcmVzcyA9IChldmVudDogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbXBvcnRGaWxlKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjb250ZW50RWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleVByZXNzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlcigoKSA9PiB7XG4gICAgICAgICAgICBjb250ZW50RWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleVByZXNzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBpbXBvcnRGaWxlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gZmlsZSBzZWxlY3RlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZWFkIHRoZSBmaWxlIGNvbnRlbnRcbiAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZCh0aGlzLnNlbGVjdGVkRmlsZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsb3NlIHRoZSBtb2RhbCBhbmQgY2FsbCB0aGUgY2FsbGJhY2tcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIHRoaXMub25JbXBvcnRDb21wbGV0ZSh0aGlzLnNlbGVjdGVkRmlsZS5wYXRoLCBmaWxlQ29udGVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW1wb3J0IGZpbGU6JywgZXJyb3IpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG93IGVycm9yIG1lc3NhZ2UgaW4gdGhlIG1vZGFsXG4gICAgICAgICAgICBjb25zdCBlcnJvckRpdiA9IHRoaXMuY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1lcnJvciknO1xuICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUucGFkZGluZyA9ICcxZW0nO1xuICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWVycm9yKSc7XG4gICAgICAgICAgICBlcnJvckRpdi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgICAgIGVycm9yRGl2LnN0eWxlLm1hcmdpblRvcCA9ICcxZW0nO1xuICAgICAgICAgICAgZXJyb3JEaXYudGV4dENvbnRlbnQgPSBgRmFpbGVkIHRvIGltcG9ydDogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlbW92ZSBlcnJvciBtZXNzYWdlIGFmdGVyIDMgc2Vjb25kc1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZXJyb3JEaXYucmVtb3ZlKCk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uQ2xvc2UoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5vbkltcG9ydENvbXBsZXRlKG51bGwsIG51bGwpO1xuICAgIH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBUZXh0QXJlYUNvbXBvbmVudCwgQnV0dG9uQ29tcG9uZW50LCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBSVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMvY29uZmlnJztcbmltcG9ydCB7IENvbXBvc2VPcGVyYXRpb24gfSBmcm9tICcuLi9vcGVyYXRpb25zL2NvbXBvc2UnO1xuXG5pbXBvcnQgeyBVSVN0YXRlU2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL3VpLXN0YXRlLXNlcnZpY2UnO1xuZXhwb3J0IGNsYXNzIENvbXBvc2VQcm9tcHRNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIGVkaXRvcjogRWRpdG9yO1xuICAgIHByaXZhdGUgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSBjb21wb3NlT3BlcmF0aW9uOiBDb21wb3NlT3BlcmF0aW9uO1xuICAgIHByaXZhdGUgcHJvbXB0SW5wdXQ6IFRleHRBcmVhQ29tcG9uZW50O1xuICAgIHByaXZhdGUgc3VibWl0QnV0dG9uOiBCdXR0b25Db21wb25lbnQ7XG4gICAgcHJpdmF0ZSBpbml0aWFsVmFsdWU6IHN0cmluZztcbiAgICBwcml2YXRlIHVpU3RhdGVTZXJ2aWNlOiBVSVN0YXRlU2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgZWRpdG9yOiBFZGl0b3IsXG4gICAgICAgIHNlbGVjdGVkVGV4dDogc3RyaW5nLFxuICAgICAgICBzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncyxcbiAgICAgICAgY29tcG9zZU9wZXJhdGlvbjogQ29tcG9zZU9wZXJhdGlvbixcbiAgICAgICAgdWlTdGF0ZVNlcnZpY2U6IFVJU3RhdGVTZXJ2aWNlLFxuICAgICAgICBpbml0aWFsVmFsdWU6IHN0cmluZyA9ICcnXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMuY29tcG9zZU9wZXJhdGlvbiA9IGNvbXBvc2VPcGVyYXRpb247XG4gICAgICAgIHRoaXMuaW5pdGlhbFZhbHVlID0gc2VsZWN0ZWRUZXh0IHx8IGluaXRpYWxWYWx1ZTtcbiAgICAgICAgdGhpcy51aVN0YXRlU2VydmljZSA9IHVpU3RhdGVTZXJ2aWNlO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy51aVN0YXRlU2VydmljZS5zZXRNb2RhbFN0YXRlKHRydWUpO1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCwgbW9kYWxFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gQWRkIGFuaW1hdGlvbiBzdHlsZXNcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZUluU2NhbGVVcCB7XG4gICAgICAgICAgICAgICAgZnJvbSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC45NSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZU91dFNjYWxlRG93biB7XG4gICAgICAgICAgICAgICAgZnJvbSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5tb2RhbC5jb21wb3NlLW1vZGFsLW9wZW5pbmcge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZUluU2NhbGVVcCAwLjJzIGVhc2Utb3V0IGZvcndhcmRzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAubW9kYWwuY29tcG9zZS1tb2RhbC1jbG9zaW5nIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IGZhZGVPdXRTY2FsZURvd24gMC4ycyBlYXNlLWluIGZvcndhcmRzO1xuICAgICAgICAgICAgfVxuICAgICAgICBgO1xuICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubW9kYWxFbC5hZGRDbGFzcygnY29tcG9zZS1tb2RhbC1vcGVuaW5nJyk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gQ3JlYXRlIHRleHQgYXJlYSBkaXJlY3RseSB3aXRob3V0IFNldHRpbmcgd3JhcHBlclxuICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IGNvbnRlbnRFbC5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICAgICAgICBwbGFjZWhvbGRlcjogJ0VudGVyIHlvdXIgQUkgcHJvbXB0IGhlcmUuLi4nXG4gICAgICAgIH0pO1xuICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHRoaXMuaW5pdGlhbFZhbHVlO1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICBoZWlnaHQ6IDIwMHB4O1xuICAgICAgICAgICAgbWluLWhlaWdodDogMjAwcHg7XG4gICAgICAgICAgICByZXNpemU6IHZlcnRpY2FsO1xuICAgICAgICAgICAgcGFkZGluZzogMTJweDtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtcHJpbWFyeSk7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtdGV4dCk7XG4gICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgICAgICBsaW5lLWhlaWdodDogMS41O1xuICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gU3RvcmUgcmVmZXJlbmNlIGZvciBsYXRlciB1c2VcbiAgICAgICAgdGhpcy5wcm9tcHRJbnB1dCA9IHtcbiAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiB0ZXh0QXJlYS52YWx1ZSxcbiAgICAgICAgICAgIGlucHV0RWw6IHRleHRBcmVhLFxuICAgICAgICAgICAgc2V0RGlzYWJsZWQ6IChkaXNhYmxlZDogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIHRleHRBcmVhLmRpc2FibGVkID0gZGlzYWJsZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gYXMgVGV4dEFyZWFDb21wb25lbnQ7XG5cbiAgICAgICAgLy8gQXV0by1mb2N1cyBhbmQgc2VsZWN0IGFsbCBpZiB0aGVyZSdzIGluaXRpYWwgdmFsdWVcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0ZXh0QXJlYS5mb2N1cygpO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW5pdGlhbFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgdGhpcy5pbml0aWFsVmFsdWUubGVuZ3RoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICAvLyBIYW5kbGUgQ3RybCtFbnRlciAvIENtZCtFbnRlciB0byBzdWJtaXRcbiAgICAgICAgdGV4dEFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJyAmJiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTdWJtaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGJ1dHRvbiBjb250YWluZXJcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdignY29tcG9zZS1tb2RhbC1idXR0b25zJyk7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgICAgICBnYXA6IDEycHg7XG4gICAgICAgIGA7XG5cbiAgICAgICAgLy8gQ2FuY2VsIGJ1dHRvblxuICAgICAgICBuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvbkNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdDYW5jZWwnKVxuICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuICAgICAgICAvLyBTdWJtaXQgYnV0dG9uXG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChidXR0b25Db250YWluZXIpXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnR2VuZXJhdGUnKVxuICAgICAgICAgICAgLnNldEN0YSgpXG4gICAgICAgICAgICAub25DbGljaygoKSA9PiB0aGlzLmhhbmRsZVN1Ym1pdCgpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZVN1Ym1pdCgpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5wcm9tcHRJbnB1dC5nZXRWYWx1ZSgpLnRyaW0oKTtcblxuICAgICAgICBpZiAoIXByb21wdCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIGVudGVyIGEgcHJvbXB0Jyk7XG4gICAgICAgICAgICB0aGlzLnByb21wdElucHV0LmlucHV0RWwuZm9jdXMoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERpc2FibGUgdGhlIHN1Ym1pdCBidXR0b24gYW5kIHNob3cgbG9hZGluZyBzdGF0ZVxuICAgICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5zZXRCdXR0b25UZXh0KCdHZW5lcmF0aW5nLi4uJyk7XG4gICAgICAgIHRoaXMuc3VibWl0QnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICB0aGlzLnByb21wdElucHV0LnNldERpc2FibGVkKHRydWUpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBDbG9zZSB0aGlzIG1vZGFsIGZpcnN0XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG5cbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNvbXBvc2Ugb3BlcmF0aW9uXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbXBvc2VPcGVyYXRpb24uZXhlY3V0ZSh0aGlzLmVkaXRvcixwcm9tcHQsIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ29tcG9zZSBvcGVyYXRpb24gZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBnZW5lcmF0ZSBzdWdnZXN0aW9ucy4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcblxuICAgICAgICAgICAgLy8gUmUtZW5hYmxlIGNvbnRyb2xzIGlmIHRoZSBtb2RhbCBpcyBzdGlsbCBvcGVuXG4gICAgICAgICAgICB0aGlzLnN1Ym1pdEJ1dHRvbi5zZXRCdXR0b25UZXh0KCdHZW5lcmF0ZScpO1xuICAgICAgICAgICAgdGhpcy5zdWJtaXRCdXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy5wcm9tcHRJbnB1dC5zZXREaXNhYmxlZChmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLnVpU3RhdGVTZXJ2aWNlLnNldE1vZGFsU3RhdGUoZmFsc2UpO1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMubW9kYWxFbC5yZW1vdmVDbGFzcygnY29tcG9zZS1tb2RhbC1vcGVuaW5nJyk7XG4gICAgICAgIHRoaXMubW9kYWxFbC5hZGRDbGFzcygnY29tcG9zZS1tb2RhbC1jbG9zaW5nJyk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgfSwgMjAwKTsgLy8gTWF0Y2ggYW5pbWF0aW9uIGR1cmF0aW9uXG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgTWVudSwgRWRpdG9yLCBDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTdW1tYXJpemVPcGVyYXRpb24gfSBmcm9tICcuLi9vcGVyYXRpb25zL3N1bW1hcml6ZSc7XG5pbXBvcnQgeyBUcmFuc2xhdGVPcGVyYXRpb24gfSBmcm9tICcuLi9vcGVyYXRpb25zL3RyYW5zbGF0ZSc7XG5pbXBvcnQgeyBLZXl3b3Jkc09wZXJhdGlvbiB9IGZyb20gJy4uL29wZXJhdGlvbnMva2V5d29yZHMnO1xuaW1wb3J0IHsgUmV3cml0ZU9wZXJhdGlvbiB9IGZyb20gJy4uL29wZXJhdGlvbnMvcmV3cml0ZSc7XG5pbXBvcnQgeyBDb21wb3NlT3BlcmF0aW9uIH0gZnJvbSAnLi4vb3BlcmF0aW9ucy9jb21wb3NlJztcbmltcG9ydCB7IENvbXBvc2VQcm9tcHRNb2RhbCB9IGZyb20gJy4vY29tcG9zZS1tb2RhbCc7XG5pbXBvcnQgeyBBSVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMvY29uZmlnJztcbmltcG9ydCB7IExhbmd1YWdlLCBQT1BVTEFSX0xBTkdVQUdFUyB9IGZyb20gJy4uL3R5cGVzL2xhbmd1YWdlcyc7XG5pbXBvcnQgeyBUT05FUyB9IGZyb20gJy4uL3R5cGVzL3RvbmVzJztcbmltcG9ydCB7IFVJU3RhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvdWktc3RhdGUtc2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBBSUNvbnRleHRNZW51IGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBwcml2YXRlIGFwcDogQXBwO1xuICAgIHByaXZhdGUgc3VtbWFyaXplT3BlcmF0aW9uOiBTdW1tYXJpemVPcGVyYXRpb247XG4gICAgcHJpdmF0ZSB0cmFuc2xhdGVPcGVyYXRpb246IFRyYW5zbGF0ZU9wZXJhdGlvbjtcbiAgICBwcml2YXRlIGtleXdvcmRzT3BlcmF0aW9uOiBLZXl3b3Jkc09wZXJhdGlvbjtcbiAgICBwcml2YXRlIHJld3JpdGVPcGVyYXRpb246IFJld3JpdGVPcGVyYXRpb247XG4gICAgcHJpdmF0ZSBjb21wb3NlT3BlcmF0aW9uOiBDb21wb3NlT3BlcmF0aW9uO1xuICAgIHByaXZhdGUgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3M7XG4gICAgcHJpdmF0ZSBwb3B1bGFyTGFuZ3VhZ2VzOiBMYW5ndWFnZVtdO1xuICAgIHByaXZhdGUgdG9uZXM6IHN0cmluZ1tdID0gVE9ORVM7XG4gICAgcHJpdmF0ZSB1aVN0YXRlU2VydmljZTogVUlTdGF0ZVNlcnZpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsXG4gICAgICAgIHN1bW1hcml6ZU9wZXJhdGlvbjogU3VtbWFyaXplT3BlcmF0aW9uLFxuICAgICAgICB0cmFuc2xhdGVPcGVyYXRpb246IFRyYW5zbGF0ZU9wZXJhdGlvbixcbiAgICAgICAga2V5d29yZHNPcGVyYXRpb246IEtleXdvcmRzT3BlcmF0aW9uLFxuICAgICAgICByZXdyaXRlT3BlcmF0aW9uOiBSZXdyaXRlT3BlcmF0aW9uLFxuICAgICAgICBjb21wb3NlT3BlcmF0aW9uOiBDb21wb3NlT3BlcmF0aW9uLFxuICAgICAgICBzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncyxcbiAgICAgICAgdWlTdGF0ZVNlcnZpY2U6IFVJU3RhdGVTZXJ2aWNlXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnN1bW1hcml6ZU9wZXJhdGlvbiA9IHN1bW1hcml6ZU9wZXJhdGlvbjtcbiAgICAgICAgdGhpcy50cmFuc2xhdGVPcGVyYXRpb24gPSB0cmFuc2xhdGVPcGVyYXRpb247XG4gICAgICAgIHRoaXMua2V5d29yZHNPcGVyYXRpb24gPSBrZXl3b3Jkc09wZXJhdGlvbjtcbiAgICAgICAgdGhpcy5yZXdyaXRlT3BlcmF0aW9uID0gcmV3cml0ZU9wZXJhdGlvbjtcbiAgICAgICAgdGhpcy5jb21wb3NlT3BlcmF0aW9uID0gY29tcG9zZU9wZXJhdGlvbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICB0aGlzLnBvcHVsYXJMYW5ndWFnZXMgPSBbLi4uUE9QVUxBUl9MQU5HVUFHRVNdO1xuICAgICAgICB0aGlzLnVpU3RhdGVTZXJ2aWNlID0gdWlTdGF0ZVNlcnZpY2U7XG4gICAgfVxuXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIH1cblxuICAgIHNob3dDb250ZXh0TWVudShlZGl0b3I6IEVkaXRvciwgZXZ0PzogTW91c2VFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xuXG4gICAgICAgIC8vIFNldCBtZW51IHRpdGxlXG4gICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnQUkgQmFja2VuZHMnKVxuICAgICAgICAgICAgICAgIC5zZXRJY29uKCdicmFpbi1jaXJjdWl0JylcbiAgICAgICAgICAgICAgICAuc2V0RGlzYWJsZWQodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICAgICAgLy8gQWRkIGNvbXBvc2Ugb3B0aW9uIChORVcpIC0gYWx3YXlzIGF2YWlsYWJsZVxuICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0NvbXBvc2Ugd2l0aCBBSScpXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ2VkaXQtMycpXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuZXcgQ29tcG9zZVByb21wdE1vZGFsKFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb3NlT3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51aVN0YXRlU2VydmljZVxuICAgICAgICAgICAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gT25seSBzaG93IG90aGVyIG9wdGlvbnMgaWYgdGV4dCBpcyBzZWxlY3RlZFxuICAgICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICAgICAgICAgIC8vIEFkZCBzdW1tYXJpemUgb3B0aW9uXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdTdW1tYXJpemUnKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbignZG9jdW1lbnQtdGV4dCcpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3VtbWFyaXplT3BlcmF0aW9uLmV4ZWN1dGUoZWRpdG9yLCBzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQga2V5d29yZHMgb3B0aW9uXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdFeHRyYWN0IEtleXdvcmRzJylcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3RhZycpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMua2V5d29yZHNPcGVyYXRpb24uZXhlY3V0ZShlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cbiAgICAgICAgICAgIC8vIEltcHJvdmUgZGVzY3JpcHRpb25cbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0ltcHJvdmUgZGVzY3JpcHRpb24nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbignZmlsZS10ZXh0JylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXdyaXRlT3BlcmF0aW9uLmltcHJvdmVEZXNjcmlwdGlvbihlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEltcHJvdmUgd3JpdGluZ1xuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnSW1wcm92ZSB3cml0aW5nJylcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3dhbmQnKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJld3JpdGVPcGVyYXRpb24uaW1wcm92ZVdyaXRpbmcoZWRpdG9yLCBzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBGaXggc3BlbGxpbmcgJiBncmFtbWFyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdGaXggc3BlbGxpbmcgJiBncmFtbWFyJylcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ2NoZWNrJylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXdyaXRlT3BlcmF0aW9uLmZpeFNwZWxsaW5nR3JhbW1hcihlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEJyYWluc3Rvcm1cbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ0JyYWluc3Rvcm0nKVxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbignbGlnaHRidWxiJylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZXdyaXRlT3BlcmF0aW9uLmJyYWluc3Rvcm0oZWRpdG9yLCBzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBNYWtlIHNob3J0ZXJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uc2V0VGl0bGUoJ01ha2Ugc2hvcnRlcicpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdtaW51cycpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmV3cml0ZU9wZXJhdGlvbi5tYWtlU2hvcnRlcihlZGl0b3IsIHNlbGVjdGlvbiwgdGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIENoYW5nZSB0b25lIHRvIC4uLiAoc3VibWVudSlcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgodG9uZUl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICB0b25lSXRlbS5zZXRUaXRsZSgnQ2hhbmdlIHRvbmUgdG8gLi4uJylcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ21pYycpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdG9uZU1lbnUgPSAodG9uZUl0ZW0gYXMgYW55KS5zZXRTdWJtZW51KCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b25lcy5mb3JFYWNoKCh0b25lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRvbmVNZW51LmFkZEl0ZW0oKHRJdGVtOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRJdGVtLnNldFRpdGxlKHRvbmUpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmV3cml0ZU9wZXJhdGlvbi5jaGFuZ2VUb25lKGVkaXRvciwgc2VsZWN0aW9uLCB0b25lLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgICAgICAgICAvLyBBZGQgdHJhbnNsYXRlIG9wdGlvbiB3aXRoIGxhbmd1YWdlIHN1Ym1lbnVcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgodHJhbnNsYXRlSXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZUl0ZW0uc2V0VGl0bGUoJ1RyYW5zbGF0ZScpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdsYW5ndWFnZXMnKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zbGF0ZVN1Yk1lbnUgPSAodHJhbnNsYXRlSXRlbSBhcyBhbnkpLnNldFN1Ym1lbnUoKTtcblxuICAgICAgICAgICAgICAgIC8vIEFkZCBkZWZhdWx0IHRyYW5zbGF0aW9uIG9wdGlvblxuICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVN1Yk1lbnUuYWRkSXRlbSgoZGVmYXVsdEl0ZW06IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0SXRlbS5zZXRUaXRsZSgnRGVmYXVsdCBMYW5ndWFnZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbignZ2xvYmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudHJhbnNsYXRlT3BlcmF0aW9uLmV4ZWN1dGUoZWRpdG9yLCBzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0cmFuc2xhdGVTdWJNZW51LmFkZFNlcGFyYXRvcigpO1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkIHBvcHVsYXIgbGFuZ3VhZ2Ugb3B0aW9uc1xuICAgICAgICAgICAgICAgIHRoaXMucG9wdWxhckxhbmd1YWdlcy5mb3JFYWNoKGxhbmd1YWdlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlU3ViTWVudS5hZGRJdGVtKChsYW5nSXRlbTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYW5nSXRlbS5zZXRUaXRsZShsYW5ndWFnZS5sYWJlbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudHJhbnNsYXRlT3BlcmF0aW9uLmV4ZWN1dGUoZWRpdG9yLCBzZWxlY3Rpb24sIHRoaXMuc2V0dGluZ3MsIGxhbmd1YWdlLmNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2hvdyBtZXNzYWdlIHdoZW4gbm8gdGV4dCBpcyBzZWxlY3RlZFxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnU2VsZWN0IHRleHQgZm9yIG1vcmUgQUkgb3B0aW9ucycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdpbmZvJylcbiAgICAgICAgICAgICAgICAgICAgLnNldERpc2FibGVkKHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhdGUgbWVudSBwb3NpdGlvblxuICAgICAgICBsZXQgeCA9IDA7XG4gICAgICAgIGxldCB5ID0gMDtcblxuICAgICAgICBpZiAoZXZ0KSB7XG4gICAgICAgICAgICAvLyBVc2UgbW91c2UgZXZlbnQgcG9zaXRpb24gaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICB4ID0gZXZ0LmNsaWVudFg7XG4gICAgICAgICAgICB5ID0gZXZ0LmNsaWVudFk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3Iga2V5Ym9hcmQgc2hvcnRjdXRzLCBzaG93IGF0IGEgZGVmYXVsdCBwb3NpdGlvblxuICAgICAgICAgICAgLy8gV2UnbGwgdXNlIHRoZSBjZW50ZXIgb2YgdGhlIGN1cnJlbnQgdmlld3BvcnRcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcbiAgICAgICAgICAgIGlmIChhY3RpdmVMZWFmICYmIGFjdGl2ZUxlYWYudmlldy5jb250YWluZXJFbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBhY3RpdmVMZWFmLnZpZXcuY29udGFpbmVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgeCA9IHJlY3QubGVmdCArIHJlY3Qud2lkdGggLyAyO1xuICAgICAgICAgICAgICAgIHkgPSByZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMzsgLy8gU2hvdyBpbiB1cHBlciB0aGlyZCBvZiBlZGl0b3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNob3cgdGhlIG1lbnUgYXQgY2FsY3VsYXRlZCBwb3NpdGlvblxuICAgICAgICBtZW51LnNob3dBdFBvc2l0aW9uKHsgeCwgeSB9KTtcbiAgICB9XG5cbn1cbiIsICJpbXBvcnQgeyBBcHAsIE1hcmtkb3duVmlldywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQUlDb250ZXh0TWVudSB9IGZyb20gJy4vYWktY29udGV4dC1tZW51JztcbmltcG9ydCB7IENvbXBvc2VQcm9tcHRNb2RhbCB9IGZyb20gJy4vY29tcG9zZS1tb2RhbCc7XG5pbXBvcnQgeyBDb21wb3NlT3BlcmF0aW9uIH0gZnJvbSAnLi4vb3BlcmF0aW9ucy9jb21wb3NlJztcbmltcG9ydCB7IEFJUGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcy9jb25maWcnO1xuaW1wb3J0IHsgVUlTdGF0ZVNlcnZpY2UgfSBmcm9tICcuLi9zZXJ2aWNlcy91aS1zdGF0ZS1zZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIFJpYmJvbkljb25NYW5hZ2VyIHtcbiAgICBwcml2YXRlIGFwcDogQXBwO1xuICAgIHByaXZhdGUgYWlDb250ZXh0TWVudTogQUlDb250ZXh0TWVudTtcbiAgICBwcml2YXRlIGNvbXBvc2VPcGVyYXRpb246IENvbXBvc2VPcGVyYXRpb247XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncztcbiAgICBwcml2YXRlIHVpU3RhdGVTZXJ2aWNlOiBVSVN0YXRlU2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgYWlDb250ZXh0TWVudTogQUlDb250ZXh0TWVudSxcbiAgICAgICAgY29tcG9zZU9wZXJhdGlvbjogQ29tcG9zZU9wZXJhdGlvbixcbiAgICAgICAgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MsXG4gICAgICAgIHVpU3RhdGVTZXJ2aWNlOiBVSVN0YXRlU2VydmljZVxuICAgICkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5haUNvbnRleHRNZW51ID0gYWlDb250ZXh0TWVudTtcbiAgICAgICAgdGhpcy5jb21wb3NlT3BlcmF0aW9uID0gY29tcG9zZU9wZXJhdGlvbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICB0aGlzLnVpU3RhdGVTZXJ2aWNlID0gdWlTdGF0ZVNlcnZpY2U7XG4gICAgfVxuXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIH1cblxuICAgIGhhbmRsZVJpYmJvbkljb25DbGljayhldnQ6IE1vdXNlRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICAgICAgY29uc3QgZWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIFNoaWZ0IGtleSBpcyBwcmVzc2VkXG4gICAgICAgICAgICBpZiAoZXZ0LnNoaWZ0S2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgU2hpZnQrQ2xpY2ssIG9wZW4gY29tcG9zZSBtb2RhbFxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBuZXcgQ29tcG9zZVByb21wdE1vZGFsKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9zZU9wZXJhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51aVN0YXRlU2VydmljZVxuICAgICAgICAgICAgICAgICkub3BlbigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBSZWd1bGFyIGNsaWNrLCBzaG93IGNvbnRleHQgbWVudVxuICAgICAgICAgICAgICAgIHRoaXMuYWlDb250ZXh0TWVudS5zaG93Q29udGV4dE1lbnUoZWRpdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIGFjdGl2ZSBlZGl0b3IsIGp1c3Qgc2hvdyBhIG5vdGljZVxuICAgICAgICAgICAgY29uc3Qgbm90aWNlID0gbmV3IE5vdGljZSgnT3BlbiBhIG5vdGUgdG8gdXNlIEFJIEJhY2tlbmRzJyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG5vdGljZS5oaWRlKCksIDMwMDApO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIE1hcmtkb3duVmlldywgRWRpdG9yLCBDb21wb25lbnQsIHNldFRvb2x0aXAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBSUNvbnRleHRNZW51IH0gZnJvbSAnLi9haS1jb250ZXh0LW1lbnUnO1xuaW1wb3J0IHsgQ29tcG9zZVByb21wdE1vZGFsIH0gZnJvbSAnLi9jb21wb3NlLW1vZGFsJztcbmltcG9ydCB7IENvbXBvc2VPcGVyYXRpb24gfSBmcm9tICcuLi9vcGVyYXRpb25zL2NvbXBvc2UnO1xuaW1wb3J0IHsgQUlQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzL2NvbmZpZyc7XG5pbXBvcnQgeyBVSVN0YXRlU2VydmljZSwgVUlTdGF0ZSB9IGZyb20gJy4uL3NlcnZpY2VzL3VpLXN0YXRlLXNlcnZpY2UnO1xuXG5leHBvcnQgY2xhc3MgRmxvYXRpbmdJY29uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBwcml2YXRlIGFwcDogQXBwO1xuICAgIHByaXZhdGUgYWlDb250ZXh0TWVudTogQUlDb250ZXh0TWVudTtcbiAgICBwcml2YXRlIGNvbXBvc2VPcGVyYXRpb246IENvbXBvc2VPcGVyYXRpb247XG4gICAgcHJpdmF0ZSBzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncztcbiAgICBwcml2YXRlIHVpU3RhdGVTZXJ2aWNlOiBVSVN0YXRlU2VydmljZTtcbiAgICBwcml2YXRlIGljb25FbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGlzVmlzaWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgY3VycmVudEVkaXRvcjogRWRpdG9yIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSB1cGRhdGVQb3NpdGlvblRocm90dGxlZDogKCkgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgYWlDb250ZXh0TWVudTogQUlDb250ZXh0TWVudSxcbiAgICAgICAgY29tcG9zZU9wZXJhdGlvbjogQ29tcG9zZU9wZXJhdGlvbixcbiAgICAgICAgc2V0dGluZ3M6IEFJUGx1Z2luU2V0dGluZ3MsXG4gICAgICAgIHVpU3RhdGVTZXJ2aWNlOiBVSVN0YXRlU2VydmljZVxuICAgICkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5haUNvbnRleHRNZW51ID0gYWlDb250ZXh0TWVudTtcbiAgICAgICAgdGhpcy5jb21wb3NlT3BlcmF0aW9uID0gY29tcG9zZU9wZXJhdGlvbjtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICB0aGlzLnVpU3RhdGVTZXJ2aWNlID0gdWlTdGF0ZVNlcnZpY2U7XG5cbiAgICAgICAgLy8gVGhyb3R0bGUgcG9zaXRpb24gdXBkYXRlcyB0byBpbXByb3ZlIHBlcmZvcm1hbmNlXG4gICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb25UaHJvdHRsZWQgPSB0aGlzLnRocm90dGxlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSWNvblBvc2l0aW9uKCk7XG4gICAgICAgIH0sIDUwKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTZXR0aW5ncyhzZXR0aW5nczogQUlQbHVnaW5TZXR0aW5ncyk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgfVxuXG4gICAgb25sb2FkKCk6IHZvaWQge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGZsb2F0aW5nIGljb24gZWxlbWVudFxuICAgICAgICB0aGlzLmljb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuYWRkQ2xhc3MoJ2ZhYi1GbG9hdGluZ0FjdGlvbkJ1dHRvbicpO1xuICAgICAgICB0aGlzLmljb25FbGVtZW50LmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggZD1cIm0xMiAyLTMgN2g2bC0zIDdcIj48L3BhdGg+PC9zdmc+JztcbiAgICAgICAgXG4gICAgICAgIC8vIFN0eWxlIHRoZSBpY29uXG4gICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIHdpZHRoOiAzMnB4O1xuICAgICAgICAgICAgaGVpZ2h0OiAzMnB4O1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KTtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgei1pbmRleDogMTAwO1xuICAgICAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xNSk7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC4ycyBlYXNlO1xuICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMC44KTtcbiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICBgO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGhvdmVyIGVmZmVjdFxuICAgICAgICB0aGlzLmljb25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmljb25FbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpJztcbiAgICAgICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEuMSknO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuICAgICAgICAgICAgdGhpcy5pY29uRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGUoMSknO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBjbGljayBoYW5kbGVyXG4gICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUljb25DbGljayhldnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0b29sdGlwXG4gICAgICAgIHNldFRvb2x0aXAodGhpcy5pY29uRWxlbWVudCwgJ0FJIEJhY2tlbmRzJywge1xuICAgICAgICAgICAgZGVsYXk6IDUwMCxcbiAgICAgICAgICAgIHBsYWNlbWVudDogJ2xlZnQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRvIGRvY3VtZW50IGJvZHlcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmljb25FbGVtZW50KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVkaXRvckNoYW5nZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLWNoYW5nZScsIChlZGl0b3IpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZWRpdG9yID09PSB0aGlzLmN1cnJlbnRFZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvblRocm90dGxlZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcmFjayBjdXJzb3IgbW92ZW1lbnRcbiAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU1vdmUoZXZ0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsIHNldHVwXG4gICAgICAgIHRoaXMuaGFuZGxlRWRpdG9yQ2hhbmdlKCk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBtb2RhbCBzdGF0ZSBjaGFuZ2VzXG4gICAgICAgIHRoaXMudWlTdGF0ZVNlcnZpY2Uub24oJ21vZGFsLXN0YXRlLWNoYW5nZScsIChzdGF0ZTogVUlTdGF0ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHN0YXRlLmlzTW9kYWxPcGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlSWNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbnVubG9hZCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaWNvbkVsZW1lbnQgJiYgdGhpcy5pY29uRWxlbWVudC5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB0aGlzLmljb25FbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5pY29uRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGhhbmRsZUVkaXRvckNoYW5nZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoYWN0aXZlVmlldyAmJiBhY3RpdmVWaWV3LmVkaXRvcikge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RWRpdG9yID0gYWN0aXZlVmlldy5lZGl0b3I7XG4gICAgICAgICAgICB0aGlzLnNob3dJY29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0b3IgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5oaWRlSWNvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVNb3VzZU1vdmUoZXZ0OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50RWRpdG9yKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBtb3VzZSBpcyBvdmVyIHRoZSBlZGl0b3JcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZWRpdG9yRWwgPSBhY3RpdmVWaWV3LmNvbnRhaW5lckVsO1xuICAgICAgICBjb25zdCByZWN0ID0gZWRpdG9yRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXZ0LmNsaWVudFggPj0gcmVjdC5sZWZ0ICYmIGV2dC5jbGllbnRYIDw9IHJlY3QucmlnaHQgJiZcbiAgICAgICAgICAgIGV2dC5jbGllbnRZID49IHJlY3QudG9wICYmIGV2dC5jbGllbnRZIDw9IHJlY3QuYm90dG9tKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dJY29uKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uVGhyb3R0bGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhpZGVJY29uKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUljb25Qb3NpdGlvbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmljb25FbGVtZW50KSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5pY29uRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7XG4gICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUuYm90dG9tID0gJzQ1cHgnOyAvLyAyMHB4IGZyb20gdGhlIGJvdHRvbSBvZiB0aGUgd2luZG93XG4gICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUucmlnaHQgPSAnMjBweCc7ICAvLyAyMHB4IGZyb20gdGhlIHJpZ2h0IG9mIHRoZSB3aW5kb3dcbiAgICB9XG5cbiAgICBzaG93SWNvbigpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmlzaWJsZSAmJiB0aGlzLmljb25FbGVtZW50ICYmICF0aGlzLnVpU3RhdGVTZXJ2aWNlLmdldFN0YXRlKCkuaXNNb2RhbE9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICAgICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDEpJztcbiAgICAgICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhpZGVJY29uKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUgJiYgdGhpcy5pY29uRWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgICAgIHRoaXMuaWNvbkVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlKDAuOCknO1xuICAgICAgICAgICAgdGhpcy5pY29uRWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoYW5kbGVJY29uQ2xpY2soZXZ0OiBNb3VzZUV2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50RWRpdG9yKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLmN1cnJlbnRFZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIElmIHRleHQgaXMgc2VsZWN0ZWQsIHNob3cgY29udGV4dCBtZW51XG4gICAgICAgICAgICB0aGlzLmFpQ29udGV4dE1lbnUuc2hvd0NvbnRleHRNZW51KHRoaXMuY3VycmVudEVkaXRvciwgZXZ0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIElmIG5vIHRleHQgaXMgc2VsZWN0ZWQsIHNob3cgY29tcG9zZSBtb2RhbFxuICAgICAgICAgICAgbmV3IENvbXBvc2VQcm9tcHRNb2RhbChcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRFZGl0b3IsXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb3NlT3BlcmF0aW9uLFxuICAgICAgICAgICAgICAgIHRoaXMudWlTdGF0ZVNlcnZpY2UsXG4gICAgICAgICAgICApLm9wZW4oKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gdGhyb3R0bGUgZnVuY3Rpb24gY2FsbHNcbiAgICBwcml2YXRlIHRocm90dGxlKGZ1bmM6ICgpID0+IHZvaWQsIGxpbWl0OiBudW1iZXIpOiAoKSA9PiB2b2lkIHtcbiAgICAgICAgbGV0IGluVGhyb3R0bGU6IGJvb2xlYW47XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWluVGhyb3R0bGUpIHtcbiAgICAgICAgICAgICAgICBmdW5jKCk7XG4gICAgICAgICAgICAgICAgaW5UaHJvdHRsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBpblRocm90dGxlID0gZmFsc2UsIGxpbWl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBcURhO0FBckRiO0FBQUE7QUFxRE8sSUFBTSxtQkFBcUM7QUFBQSxNQUNqRCxRQUFRO0FBQUEsTUFDUixRQUFRO0FBQUEsTUFDUixnQkFBZ0I7QUFBQTtBQUFBO0FBQUEsTUFHaEIsaUJBQWlCO0FBQUEsTUFDakIsY0FBYztBQUFBLE1BQ2Qsb0JBQW9CO0FBQUEsTUFDcEIsZUFBZTtBQUFBO0FBQUEsTUFHZixXQUFXO0FBQUEsUUFDVixVQUFVO0FBQUEsUUFDVixPQUFPO0FBQUEsUUFDUCxhQUFhO0FBQUEsUUFDYixRQUFRO0FBQUEsUUFDUixXQUFXO0FBQUEsTUFDWjtBQUFBLE1BRUEsVUFBVTtBQUFBLFFBQ1QsVUFBVTtBQUFBLFFBQ1YsT0FBTztBQUFBLFFBQ1AsYUFBYTtBQUFBLFFBQ2IsUUFBUTtBQUFBLFFBQ1IsYUFBYTtBQUFBLE1BQ2Q7QUFBQSxNQUVBLFdBQVc7QUFBQSxRQUNWLFVBQVU7QUFBQSxRQUNWLE9BQU87QUFBQSxRQUNQLGFBQWE7QUFBQSxRQUNiLFFBQVE7QUFBQSxRQUNSLHVCQUF1QjtBQUFBLE1BQ3hCO0FBQUEsTUFFQSxTQUFTO0FBQUEsUUFDUixVQUFVO0FBQUEsUUFDVixPQUFPO0FBQUEsUUFDUCxhQUFhO0FBQUEsUUFDYixRQUFR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LFdBQUssV0FBVyxPQUFPO0FBQUEsSUFDeEIsQ0FBQztBQUdELFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLENBQUMsV0FBbUI7QUFDbkMsY0FBTSxZQUFZLE9BQU8sYUFBYTtBQUN0QyxZQUFJO0FBQUEsVUFDSCxLQUFLO0FBQUEsVUFDTDtBQUFBLFVBQ0E7QUFBQSxVQUNBLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxVQUNMLEtBQUs7QUFBQSxRQUNOLEVBQUUsS0FBSztBQUFBLE1BQ1I7QUFBQSxJQUNELENBQUM7QUFHRCxTQUFLLFdBQVc7QUFBQSxNQUNmLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFNBQVMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxPQUFPLE9BQU8sR0FBRyxLQUFLLElBQUksQ0FBQztBQUFBLE1BQ25ELGdCQUFnQixDQUFDLFdBQW1CO0FBQ25DLGFBQUssY0FBYyxnQkFBZ0IsTUFBTTtBQUFBLE1BQzFDO0FBQUEsSUFDRCxDQUFDO0FBQUEsRUFDRjtBQUFBLEVBRUEsTUFBTSxlQUE4QjtBQUNuQyxTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxrQkFBa0IsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQzFFO0FBQUEsRUFFQSxNQUFNLGVBQThCO0FBQ25DLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUdqQyxTQUFLLGNBQWMsZUFBZSxLQUFLLFFBQVE7QUFDL0MsU0FBSyxVQUFVLGVBQWUsS0FBSyxRQUFRO0FBQzNDLFNBQUssZ0JBQWdCLGVBQWUsS0FBSyxRQUFRO0FBQ2pELFNBQUssY0FBYyxlQUFlLEtBQUssUUFBUTtBQUMvQyxTQUFLLGtCQUFrQixlQUFlLEtBQUssUUFBUTtBQUNuRCxTQUFLLGFBQWEsZUFBZSxLQUFLLFFBQVE7QUFHOUMsU0FBSyxjQUFjLGVBQWUsS0FBSyxRQUFRO0FBQUEsRUFDaEQ7QUFBQSxFQUVBLFdBQWlCO0FBQ2hCLFNBQUssY0FBYyxRQUFRO0FBQUEsRUFDNUI7QUFBQTtBQUdEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiZXhjZXB0aW9uIiwgIm1hcCIsICJzY2hlbWEiLCAidHlwZSIsICJleHRlbmQiLCAic3RyIiwgInN0cmluZyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgInRvZ2dsZSIsICJERUZBVUxUX1NFVFRJTkdTIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiJdCn0K
